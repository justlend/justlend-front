/*! For license information please see 15.eb855000.chunk.js.LICENSE.txt */
(this["webpackJsonpjustlend-front"]=this["webpackJsonpjustlend-front"]||[]).push([[15],{1565:function(t,e,r){"use strict";var n,o=r(3),a=r(9),i=r(10),c=r(17),s=r(18),l=r(0),u=r.n(l),v=(r(59),r(23)),p=r(1),d=r(241),f=r(2),h=r.n(f),m=r(8);r(454),r(1546);function g(){g=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(S){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),c=new N(o||[]);return n(i,"_invoke",{value:E(t,r,c)}),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(S){return{type:"throw",arg:S}}}t.wrap=l;var v={};function p(){}function d(){}function f(){}var h={};s(h,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(O([])));y&&y!==e&&r.call(y,a)&&(h=y);var b=f.prototype=p.prototype=Object.create(h);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var o;n(this,"_invoke",{value:function(n,a){function i(){return new e((function(o,i){!function n(o,a,i,c){var s=u(t[o],t,a);if("throw"!==s.type){var l=s.arg,v=l.value;return v&&"object"==typeof v&&r.call(v,"__await")?e.resolve(v.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(v).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,c)}))}c(s.arg)}(n,a,o,i)}))}return o=o?o.then(i,i):i()}})}function E(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return L()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=j(i,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function j(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,v;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,v):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return d.prototype=f,n(b,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:d,configurable:!0}),d.displayName=s(f,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},_(w.prototype),s(w.prototype,i,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new w(l(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(b),s(b,c,"Generator"),s(b,a,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),v}},t}var y=Object(v.b)("network")(n=Object(v.b)("lend")(n=Object(v.b)("system")(n=Object(v.c)(n=function(t){Object(c.a)(r,t);var e=Object(s.a)(r);function r(){var t;return Object(a.a)(this,r),(t=e.call(this)).startInterval=Object(o.a)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.timerInterval||(t.timerInterval=setInterval(Object(o.a)(g().mark((function t(){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),3e3));case 1:case"end":return e.stop()}}),e)}))),t.componentDidMount=function(){t.startInterval()},t.withdrawVotes=function(){var e=Object(o.a)(g().mark((function e(r){var n,o,a,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gtag("event","click",{event_category:"PC_V1.5",event_label:"recycle_votes_modal"}),t.setState({clickProposalId:r}),t.props.system.clearRejectError(),n=m.b.oldVoteLastId,o=r<=n?m.b.contract.oldWJSTAddress:m.b.contract.WJSTAddress,i={title:"toast.ex",title2:"deposit.transactionsent",title3:"toast.ex_failed",title4:"deposit.confirm_transaction",obj:{value:(a={proposalId:r,contractAddr:o}).votes,token:a.proposalId||""},trnasType:"withdrawVotes"},e.next=9,t.props.system.withdrawVotes(a,i);case 9:e.sent?(gtag("event","click",{event_category:"PC_V1.5",event_label:"recycle_votes_modal_success"}),t.props.lend.setData({redeemFromVotePop:!1}),t.setState({clickProposalId:""})):t.setState({clickProposalId:""});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.renderVoting=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.props.lend.voteSourceData,o=t.state,a=o.lang,i=o.clickProposalId;if((null===e||void 0===e?void 0:e.length)>0)return null===e||void 0===e?void 0:e.map((function(e,o){var c;return u.a.createElement("div",{className:"vote-detail-item",key:o},u.a.createElement("div",{className:"proposalId"},"#",null===e||void 0===e?void 0:e.proposalId),u.a.createElement("div",{className:"title "+("en-US"===a?"":"zh")},n&&(null===(c=n[null===e||void 0===e?void 0:e.proposalId])||void 0===c?void 0:c.title)?"en-US"===a?n[e.proposalId].title.split("&&")[1]:n[e.proposalId].title.split("&&")[0]:""),u.a.createElement("div",{className:"amount ellipsis",title:Object(p.k)(e.allVotes,3)},Object(p.k)(e.allVotes,3)),r&&(i?i===e.proposalId?u.a.createElement("div",{className:"link disabled"},u.a.createElement("span",{className:"siging-icon"})):u.a.createElement("div",{className:"link disabled"},h.a.get("v2.vote.redeem_vote_btn")):u.a.createElement("div",{className:"link",onClick:function(){return t.withdrawVotes(e.proposalId)}},h.a.get("v2.vote.redeem_vote_btn"))))}))},t.timerInterval=null,t.state={lang:window.localStorage.getItem("lang")||h.a.options.currentLocale,visible:!1,clickProposalId:""},t}return Object(i.a)(r,[{key:"componentWillUnmount",value:function(){clearInterval(this.timerInterval),this.timerInterval=null}},{key:"render",value:function(){var t=this,e=this.props.lend,r=e.userCanRedeemVoteList,n=e.userVotingVote,o=e.voteDetailModalVisible,a=e.userCanRedeemVoteNum,i=e.theme,c=this.state.clickProposalId,s=this.props.system.transModalInfo,l=s.declined,v=s.trnasType,f=Object(p.a)(a).eq(0)?0:Object(p.k)(a,3,{miniText:.001});return u.a.createElement(d.a,{title:h.a.get("v2.vote.recovered_vote"),maskClosable:!1,visible:o,closable:!0,onCancel:function(){t.props.system.clearRejectError(),t.props.lend.setData({voteDetailModalVisible:!1}),gtag("event","click",{event_category:"PC_V1.5",event_label:"recycle_votes_close"})},footer:null,className:"vote-detail-modal-v2 ".concat(i),width:457,centered:!0},u.a.createElement("div",{className:"tick-vote-logo"}),u.a.createElement("p",{className:"redeemNum"},h.a.getHTML("v2.vote.recover_vote",{value:f})),n&&(null===n||void 0===n?void 0:n.length)>0||r&&(null===r||void 0===r?void 0:r.length)>0?u.a.createElement("div",{className:"vote-detail-container"},r.length>4&&u.a.createElement("div",{className:"linear"}),r&&(null===r||void 0===r?void 0:r.length)>0&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"box"},this.renderVoting(r,!0))),c?u.a.createElement("div",{className:"info"},u.a.createElement("div",{className:"j-sign-tip flex aic jcc"},u.a.createElement("span",{className:"j-warning-icon"}),u.a.createElement("span",null,h.a.get("v2.sign_in_wallet")))):l&&"withdrawVotes"===v&&u.a.createElement("div",{className:"info"},u.a.createElement("div",{className:"j-reject-tip"},u.a.createElement("span",{className:"j-reject-img mt-3"}),u.a.createElement("span",null,h.a.get("v2.reject_in_wallet"))))):null)}}]),r}(u.a.Component))||n)||n)||n)||n;e.a=y},1626:function(t,e,r){},1636:function(t,e,r){"use strict";r.r(e);var n,o=r(9),a=r(10),i=r(17),c=r(18),s=r(0),l=r.n(s),u=r(3),v=r(2),p=r.n(v),d=r(59),f=r(14),h=r.n(f),m=r(23),g=r(366),y=r(69),b=r(8),_=r(1),w=r(456),E=r(458),j=r(241),x=r(457);r(454),r(1546);function k(){k=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(S){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),c=new N(o||[]);return n(i,"_invoke",{value:w(t,r,c)}),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(S){return{type:"throw",arg:S}}}t.wrap=l;var v={};function p(){}function d(){}function f(){}var h={};s(h,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==e&&r.call(g,a)&&(h=g);var y=f.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){var o;n(this,"_invoke",{value:function(n,a){function i(){return new e((function(o,i){!function n(o,a,i,c){var s=u(t[o],t,a);if("throw"!==s.type){var l=s.arg,v=l.value;return v&&"object"==typeof v&&r.call(v,"__await")?e.resolve(v.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(v).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,c)}))}c(s.arg)}(n,a,o,i)}))}return o=o?o.then(i,i):i()}})}function w(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return L()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=E(i,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,v;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,v):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function O(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return d.prototype=f,n(y,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:d,configurable:!0}),d.displayName=s(f,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},b(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},b(y),s(y,c,"Generator"),s(y,a,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),v}},t}var N,O=Object(m.b)("lend")(n=Object(m.b)("system")(n=Object(m.c)(n=function(t){Object(i.a)(r,t);var e=Object(c.a)(r);function r(t){var n;return Object(o.a)(this,r),(n=e.call(this,t)).hideRedeemFromVotePop=function(){n.setState({isSigning:!1}),n.props.lend.setData({redeemFromVotePop:!1}),gtag("event","click",{event_category:"PC_V1.5",event_label:"vote_detail_recycle_close"})},n.withdrawVotes=Object(u.a)(k().mark((function t(){var e,r,o,a;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.props.system.clearRejectError(),gtag("event","click",{event_category:"PC_V1.5",event_label:"vote_detail_recycle_btn"}),n.setState({isSigning:!0}),e=n.props.lend,e.lockNum,r=e.redeemFromVotePopProposalId,o={proposalId:r,contractAddr:b.b.contract.WJSTAddress},a={title:"toast.ex",title2:"deposit.transactionsent",title3:"toast.ex_failed",title4:"deposit.confirm_transaction",obj:{value:o.votes,token:o.proposalId||""},trnasType:"withdrawVote"},t.prev=6,t.next=9,n.props.system.withdrawVotes(o,a);case 9:t.sent?(gtag("event","click",{event_category:"PC_V1.5",event_label:"vote_detail_recycle_success"}),n.hideRedeemFromVotePop()):n.setState({isSigning:!1}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),n.setState({isSigning:!1});case 16:case"end":return t.stop()}}),t,null,[[6,13]])}))),n.state={isSigning:!1},n}return Object(a.a)(r,[{key:"render",value:function(){var t,e=this,r=this.props.lend,n=r.redeemFromVotePop,o=r.lockNum,a=this.props.system.transModalInfo,i=a.declined,c=a.trnasType,s=this.state.isSigning,u="--";return o&&o.gt(0)&&(u=Object(_.k)(Object(_.a)(o).div(b.b.tokenDefaultPrecision),3)),t=s?p.a.get("v2.sign_in_wallet"):p.a.get("v2.vote.redeem_vote_modal_btn"),l.a.createElement(l.a.Fragment,null,l.a.createElement(j.a,{visible:n,title:p.a.get("v2.vote.redeem_vote_modal_title"),width:400,footer:null,className:"j-modal header-border redeem-vote-pop",onCancel:function(){return e.hideRedeemFromVotePop()},closable:!0,maskClosable:!1,centered:!0,getContainer:function(){return document.querySelector(".j-wrapper")}},l.a.createElement("div",{className:"modal-content-container"},l.a.createElement("div",{className:"content-icon"}),l.a.createElement("div",{className:"content-title"},p.a.getHTML("v2.vote.redeem_vote_modal_content_title",{value:u})),l.a.createElement("div",{className:"content-subtitle"},p.a.get("v2.vote.redeem_vote_modal_content_subtitle"))),l.a.createElement("button",{className:h()("j-large-btn",{"is-signing":s}),disabled:s,onClick:function(){e.withdrawVotes()}},t,l.a.createElement("span",{className:"siging-icon"})),i&&"withdrawVote"===c&&l.a.createElement("div",{className:"j-error-tip wallet-reject"},l.a.createElement("span",{className:"j-error-img"}),l.a.createElement("div",null,p.a.get("v2.reject_in_wallet")))),l.a.createElement(x.a,null))}}]),r}(l.a.Component))||n)||n)||n,L=r(369);function S(){S=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(L){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:w(t,r,c)}),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(L){return{type:"throw",arg:L}}}t.wrap=l;var v={};function p(){}function d(){}function f(){}var h={};s(h,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(N([])));g&&g!==e&&r.call(g,a)&&(h=g);var y=f.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){var o;n(this,"_invoke",{value:function(n,a){function i(){return new e((function(o,i){!function n(o,a,i,c){var s=u(t[o],t,a);if("throw"!==s.type){var l=s.arg,v=l.value;return v&&"object"==typeof v&&r.call(v,"__await")?e.resolve(v.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(v).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,c)}))}c(s.arg)}(n,a,o,i)}))}return o=o?o.then(i,i):i()}})}function w(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return O()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=E(i,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,v;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,v):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return d.prototype=f,n(y,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:d,configurable:!0}),d.displayName=s(f,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},b(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},b(y),s(y,c,"Generator"),s(y,a,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=N,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:N(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),v}},t}var P,I=Object(m.b)("lend")(N=Object(m.b)("system")(N=Object(m.b)("network")(N=Object(m.c)(N=function(t){Object(i.a)(r,t);var e=Object(c.a)(r);function r(t){var n;return Object(o.a)(this,r),(n=e.call(this,t)).componentDidMount=Object(u.a)(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.props.network.isConnected&&n.getMountedData(),n.props.network.on("connect",(function(){n.getMountedData()}));case 2:case"end":return t.stop()}}),t)}))),n.getMountedData=Object(u.a)(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.props.lend.getUserWithdrawInfo();case 2:case"end":return t.stop()}}),t)}))),n.hideVoteForPop=function(){n.setState({isSigning:!1,voteInputValue:"",inputErrorText:""}),n.props.lend.setData({voteForPop:!1})},n.getRedeemableVote=function(){n.props.lend.setData({voteDetailModalVisible:!0}),n.hideVoteForPop(),gtag("event","click",{event_category:"PC_V1.5",event_label:"vote_detail_redeem_votes"})},n.getVote=function(){n.props.system.clearRejectError(),n.props.lend.setData({swapJstToVoteModalVisible:!0}),n.hideVoteForPop(),gtag("event","click",{event_category:"PC_V1.5",event_label:"vote_detail_get_votes"})},n.getJst=function(){window.open("".concat(b.b.sunSwap,"?lang=").concat(n.state.lang,"?tokenAddress=").concat(b.b.contract.JST,"&type=swap"),"_blank","noreferrer"),n.hideVoteForPop(),gtag("event","click",{event_category:"PC_V1.5",event_label:"vote_detail_get_JST"})},n.maxRender=function(){return l.a.createElement("div",{className:"max-value-button",onClick:n.chooseMax},p.a.get("v2.max"))},n.chooseMax=function(){var t=n.props.lend.voteInfo,e=Object(_.k)(t.surplusVotes.div(b.b.tokenDefaultPrecision),3,{per:!0});n.setState({voteInputValue:e})},n.voteInputValueOnChange=function(t){var e=Object(_.ab)(t,3),r=e.valid,o=e.str;if(r){n.setState({voteInputValue:o});var a=n.props.lend.voteInfo;a&&a.success&&a.surplusVotes.div(b.b.tokenDefaultPrecision).lt(Object(_.a)(o))?n.setState({inputErrorText:p.a.get("v2.vote.vote_modal_insufficient_vote")}):n.setState({inputErrorText:""})}},n.vote=Object(u.a)(S().mark((function t(){var e,r,o,a,i,c,s;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.props.system.clearRejectError(),n.setState({isSigning:!0}),e=n.state.voteInputValue,r=n.props.lend,o=r.lockNum,a=r.voteForPopIsFor,i=r.voteForPopProposalId,o&&Object(_.a)(o).gt(0)?gtag("event","click",{event_category:"PC_V1.5",event_label:"vote_btn"}):gtag("event","click",{event_category:"PC_V1.5",event_label:"add_vote_btn"}),c={proposalId:i,support:a,votes:Object(_.a)(e).times(b.b.tokenDefaultPrecision)._toHex(),contractAddr:b.b.contract.governorAlphaAddress,totalVotes:Object(_.a)(e).times(b.b.tokenDefaultPrecision).plus(o)._toHex()},s={title:"toast.ex",title2:"deposit.transactionsent",title3:"toast.ex_failed",title4:"deposit.confirm_transaction",needCallAgain:"getVoteDetail",obj:{value:c.votes,token:c.proposalId||""},trnasType:"vote"},t.prev=8,t.next=11,n.props.system.castVote(c,s);case 11:t.sent?(gtag("event","click",{event_category:"PC_V1.5",event_label:"vote_success"}),n.hideVoteForPop(),setTimeout((function(){n.props.lend.getVoteDetail(i)}),5e3)):n.setState({isSigning:!1}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(8),n.setState({isSigning:!1});case 18:case"end":return t.stop()}}),t,null,[[8,15]])}))),n.state={lang:window.localStorage.getItem("lang")||p.a.options.currentLocale,isSigning:!1,voteInputValue:"",inputErrorText:""},n}return Object(a.a)(r,[{key:"render",value:function(){var t,e,r,n,o,a=this,i=this.props.lend,c=i.voteForPop,s=i.voteForPopIsFor,u=i.voteForPopProposalId,v=i.lockNum,d=i.voteInfo,f=i.userCanRedeemVoteNum,m=this.props.system.transModalInfo,g=m.declined,y=m.trnasType,w=this.state,E=w.isSigning,x=w.voteInputValue,k=w.inputErrorText,N=!1,O=!1,S=!1,P="--",I="--",V="--",T=v&&Object(_.a)(v).gt(0),F="--";if(d&&d.success){var C=Object(_.a)(d.surplusVotes),D=Object(_.a)(d.jstBalance),M=Object(_.a)(f);N=C.gt(0),O=D.gt(0),S=M.gt(0),P=Object(_.k)(C.div(b.b.tokenDefaultPrecision),3,{miniText:.001}),I=Object(_.k)(D.div(b.b.tokenDefaultPrecision),3,{miniText:.001}),V=Object(_.a)(f).eq(0)?0:Object(_.k)(f,3,{miniText:.001})}return T&&(F=Object(_.k)(Object(_.a)(v).div(b.b.tokenDefaultPrecision),3)),N?(t=p.a.get("v2.vote.vote_modal_title",{value:u}),o=!0,T?(e=l.a.createElement("span",{className:"vote-title"},F),r=s?p.a.get("v2.vote.vote_modal_content_title_voted_for",{value:u}):p.a.get("v2.vote.vote_modal_content_title_voted_against",{value:u})):(e=s?p.a.getHTML("v2.vote.vote_modal_content_title_will_vote_for",{value:u}):p.a.getHTML("v2.vote.vote_modal_content_title_will_vote_against",{value:u}),r=""),n=E?p.a.get("v2.sign_in_wallet"):s?p.a.get("v2.vote.cast_for_votes"):p.a.get("v2.vote.cast_against_votes")):(t=p.a.get("v2.vote.vote_modal_title_no_vote"),o=!1,S?(e=p.a.getHTML("v2.vote.vote_modal_content_title_vote_to_redeem",{value:V}),n=p.a.get("v2.vote.vote_modal_action_btn_vote_to_redeem"),r=p.a.get("v2.vote.vote_modal_redeem_vote")):O?(e=p.a.getHTML("v2.vote.vote_modal_content_title_no_vote",{value:I}),n=p.a.get("v2.vote.vote_modal_action_btn_no_vote"),r=p.a.get("v2.vote.vote_modal_swap_jst")):(e=p.a.get("v2.vote.vote_modal_content_title_no_jst"),n=p.a.get("v2.vote.vote_modal_action_btn_no_jst"),r="")),l.a.createElement(j.a,{visible:c,title:t,width:400,footer:null,className:"j-modal header-border vote-pop",onCancel:function(){a.props.system.clearRejectError(),a.hideVoteForPop(),gtag("event","click",{event_category:"PC_V1.5",event_label:"vote_detail_vote_close"})},closable:!0,maskClosable:!1,centered:!0,getContainer:function(){return document.querySelector(".j-wrapper")}},l.a.createElement("div",{className:h()("modal-content-container",{"have-input":N})},l.a.createElement("div",{className:h()("content-icon",{"no-vote":!N&&!S})}),l.a.createElement("div",{className:"content-title"},e),r&&l.a.createElement("div",{className:"content-subtitle"},r),o&&l.a.createElement("div",{className:"input-container"},l.a.createElement("div",{className:"input-header"},l.a.createElement("div",{className:"input-title"},T?p.a.getHTML("v2.vote.vote_modal_add_vote_count"):p.a.getHTML("v2.vote.vote_modal_vote_count")),l.a.createElement("div",{className:"remaining-votes"},l.a.createElement("div",{className:"text"},p.a.get("v2.vote.vote_modal_remaining_vote")),l.a.createElement("div",{className:"balance"},P))),l.a.createElement(L.a,{className:"j-input "+(k?"j-error-input":""),value:x,placeholder:s?p.a.get("v2.vote.vote_modal_input_hint"):p.a.get("v2.vote.vote_modal_input_against_hint"),addonAfter:this.maxRender(),onChange:function(t){return a.voteInputValueOnChange(t.target.value)},allowClear:!0,disabled:!!E}),l.a.createElement("div",{className:h()("j-error-tip",{"show-error":k})},l.a.createElement("span",{className:"j-error-img"}),l.a.createElement("div",null,k)))),l.a.createElement("button",{className:h()("j-large-btn",{"is-signing":N&&E}),disabled:N&&(E||k||!x||"0"==x),onClick:function(){N?a.vote():S?a.getRedeemableVote():O?a.getVote():a.getJst()}},n,l.a.createElement("span",{className:"siging-icon"})),g&&"vote"===y&&l.a.createElement("div",{className:"j-error-tip wallet-reject"},l.a.createElement("span",{className:"j-error-img"}),l.a.createElement("div",null,p.a.get("v2.reject_in_wallet"))))}}]),r}(l.a.Component))||N)||N)||N)||N;function V(){V=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(L){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:w(t,r,c)}),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(L){return{type:"throw",arg:L}}}t.wrap=l;var v={};function p(){}function d(){}function f(){}var h={};s(h,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(N([])));g&&g!==e&&r.call(g,a)&&(h=g);var y=f.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){var o;n(this,"_invoke",{value:function(n,a){function i(){return new e((function(o,i){!function n(o,a,i,c){var s=u(t[o],t,a);if("throw"!==s.type){var l=s.arg,v=l.value;return v&&"object"==typeof v&&r.call(v,"__await")?e.resolve(v.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(v).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,c)}))}c(s.arg)}(n,a,o,i)}))}return o=o?o.then(i,i):i()}})}function w(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return O()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=E(i,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,v;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,v):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return d.prototype=f,n(y,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:d,configurable:!0}),d.displayName=s(f,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},b(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},b(y),s(y,c,"Generator"),s(y,a,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=N,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:N(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),v}},t}var T,F=Object(m.b)("lend")(P=Object(m.b)("system")(P=Object(m.b)("network")(P=Object(m.c)(P=function(t){Object(i.a)(r,t);var e=Object(c.a)(r);function r(t){var n;return Object(o.a)(this,r),(n=e.call(this,t)).hideSwapJstToVotePop=function(){n.setState({isSigning:!1,jstInputValue:"",inputErrorText:""}),n.props.lend.setData({swapJstToVoteModalVisible:!1}),gtag("event","click",{event_category:"PC_V1.5",event_label:"vote_detail_get_votes_close"})},n.componentDidMount=Object(u.a)(V().mark((function t(){return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.props.network.isConnected&&n.getMountedData(),n.props.network.on("connect",(function(){n.getMountedData()}));case 2:case"end":return t.stop()}}),t)}))),n.getMountedData=Object(u.a)(V().mark((function t(){var e;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getApprove();case 2:e=t.sent,n.setState({approveStatus:e,approving:!1},(function(){n.props.lend.getBalanceForVote(),n.props.lend.getOldWjstBalanceForVote()}));case 4:case"end":return t.stop()}}),t)}))),n.getApprove=Object(u.a)(V().mark((function t(){var e,r;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={collateralAddress:b.b.contract.JST,jtokenAddress:b.b.contract.WJSTAddress,precision:b.b.tokenDefaultPrecision},t.next=4,n.props.lend.getVoteBalanceOf(e);case 4:return r=t.sent,t.abrupt("return",Object(_.a)(r).gt(0));case 8:return t.prev=8,t.t0=t.catch(0),console.log("getApprove, ",t.t0),t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])}))),n.maxRender=function(){return l.a.createElement("div",{className:"max-value-button",onClick:n.chooseMax},p.a.get("vote.voteto_input_max"))},n.chooseMax=function(){var t=n.props.lend.voteInfo,e=Object(_.k)(t.jstBalance.div(b.b.tokenDefaultPrecision),3,{per:!0});n.setState({jstInputValue:e})},n.jstInputValueOnChange=function(t){var e=Object(_.ab)(t,3),r=e.valid,o=e.str;if(r){n.setState({jstInputValue:o});var a=n.props.lend.voteInfo;a&&a.success&&a.jstBalance.div(b.b.tokenDefaultPrecision).lt(Object(_.a)(o))?n.setState({inputErrorText:p.a.get("tab.not_enough")}):n.setState({inputErrorText:""})}},n.swap=Object(u.a)(V().mark((function t(){var e,r,o;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.props.system.clearRejectError(),e=n.state.jstInputValue,n.setState({isSigning:!0}),r={collateralAddress:b.b.contract.JST,jtokenAddress:b.b.contract.WJSTAddress,amount:Object(_.a)(e).times(b.b.tokenDefaultPrecision)._toHex()},o={title:"toast.ex",title2:"deposit.transactionsent",title3:"toast.ex_failed",title4:"deposit.confirm_transaction",obj:{value:r.collateralSymbol},trnasType:"swapVote"},t.prev=5,t.next=8,n.props.system.voteDeposit(r,o);case 8:t.sent?n.hideSwapJstToVotePop():n.setState({isSigning:!1}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),n.setState({isSigning:!1});case 15:case"end":return t.stop()}}),t,null,[[5,12]])}))),n.toApprove=Object(u.a)(V().mark((function t(){var e;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.props.system.clearRejectError(),e={collateralAddress:b.b.contract.JST,jtokenAddress:b.b.contract.WJSTAddress,trnasType:"approve"},{title:"deposit.confirm_approve",obj:{value:e.collateralSymbol}},n.setState({isSuccess:!1,txID:"",approving:!0}),t.next=6,n.props.system.approveToken(e,[["lend/hideAuthorizePop"]]);case 6:t.sent&&n.setState({approveStatus:!0}),n.setState({approving:!1});case 9:case"end":return t.stop()}}),t)}))),n.renderSwapPop=function(){var t,e,r=n.props.lend,o=(r.swapJstToVoteModalVisible,r.voteInfo),a=n.state,i=a.isSigning,c=a.jstInputValue,s=a.inputErrorText,u=n.props.system.transModalInfo,v=u.declined,d=u.trnasType,f="--";if(o&&o.success){var m=Object(_.a)(o.jstBalance);f=Object(_.k)(m.div(b.b.tokenDefaultPrecision),3,{miniText:.001})}return t=p.a.getHTML("v2.vote.get_vote_modal_text"),e=i?p.a.get("v2.sign_in_wallet"):p.a.get("v2.vote.deposit_now"),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:h()("modal-content-container","have-input")},l.a.createElement("div",{className:"content-icon"}),l.a.createElement("div",{className:"content-title"},t),l.a.createElement("div",{className:"input-container"},l.a.createElement("div",{className:"input-header"},l.a.createElement("div",{className:"input-title"},p.a.getHTML("vote.deposit_amount")),l.a.createElement("div",{className:"remaining-votes"},l.a.createElement("div",{className:"text"},p.a.get("wallet_ballance")),l.a.createElement("div",{className:"balance"},f)),l.a.createElement("a",{className:"get-jst-link",target:"_blank",rel:"noopener noreferrer",href:"".concat(b.b.sunSwap,"?lang=").concat(n.state.lang,"?tokenAddress=").concat(b.b.contract.JST,"&type=swap")},p.a.get("lend.get"))),l.a.createElement(L.a,{className:"j-input "+(s?"j-error-input":""),value:c,placeholder:p.a.get("vote.convert_input_tips"),addonAfter:n.maxRender(),onChange:function(t){return n.jstInputValueOnChange(t.target.value)},allowClear:!0,disabled:!!i}),l.a.createElement("div",{className:h()("j-error-tip",{"show-error":s})},l.a.createElement("span",{className:"j-error-img"}),l.a.createElement("div",null,s)))),l.a.createElement("button",{className:h()("j-large-btn",{"is-signing":i}),disabled:i||s||!c||"0"==c,onClick:function(){n.swap()}},e,l.a.createElement("span",{className:"siging-icon"})),v&&"swapVote"===d&&l.a.createElement("div",{className:"j-error-tip wallet-reject"},l.a.createElement("span",{className:"j-error-img"}),l.a.createElement("div",null,p.a.get("v2.reject_in_wallet"))))},n.renderApprovePop=function(){var t=n.state.approving,e=n.props.system.transModalInfo,r=e.declined,o=e.trnasType;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"vote-authorize-logo"}),l.a.createElement("div",{className:"v-desc"},p.a.getHTML("vote.approve_text")),t?l.a.createElement("button",{className:"modal-btn is-valid",disabled:!0},p.a.get("v2.sign_in_wallet"),l.a.createElement("span",{className:"siging-icon"})):l.a.createElement("div",{className:"modal-btn is-valid",onClick:n.toApprove},p.a.get("vote.approve_btn")),r&&"approve"===o&&l.a.createElement("div",{className:"j-error-tip wallet-reject"},l.a.createElement("span",{className:"j-error-img"}),l.a.createElement("div",null,p.a.get("v2.reject_in_wallet"))))},n.state={lang:window.localStorage.getItem("lang")||p.a.options.currentLocale,isSigning:!1,jstInputValue:"",inputErrorText:"",approveStatus:null,approving:!1},n}return Object(a.a)(r,[{key:"render",value:function(){var t=this,e=this.props.lend,r=e.swapJstToVoteModalVisible,n=(e.voteInfo,this.state.approveStatus),o=n?p.a.get("vote.myvote_deposit"):p.a.get("deposit.confirm_approve");return l.a.createElement(j.a,{visible:r,title:o,width:400,footer:null,className:"j-modal header-border swap-jst-to-vote-pop",onCancel:function(){return t.hideSwapJstToVotePop()},closable:!0,maskClosable:!1,centered:!0,getContainer:function(){return document.querySelector(".j-wrapper")}},n?this.renderSwapPop():this.renderApprovePop())}}]),r}(l.a.Component))||P)||P)||P)||P,C=r(1565);r(1626);function D(){D=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(L){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),c=new k(o||[]);return n(i,"_invoke",{value:w(t,r,c)}),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(L){return{type:"throw",arg:L}}}t.wrap=l;var v={};function p(){}function d(){}function f(){}var h={};s(h,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(N([])));g&&g!==e&&r.call(g,a)&&(h=g);var y=f.prototype=p.prototype=Object.create(h);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){var o;n(this,"_invoke",{value:function(n,a){function i(){return new e((function(o,i){!function n(o,a,i,c){var s=u(t[o],t,a);if("throw"!==s.type){var l=s.arg,v=l.value;return v&&"object"==typeof v&&r.call(v,"__await")?e.resolve(v.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(v).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,c)}))}c(s.arg)}(n,a,o,i)}))}return o=o?o.then(i,i):i()}})}function w(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return O()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=E(i,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,v;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,v):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return d.prototype=f,n(y,"constructor",{value:f,configurable:!0}),n(f,"constructor",{value:d,configurable:!0}),d.displayName=s(f,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},b(_.prototype),s(_.prototype,i,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},b(y),s(y,c,"Generator"),s(y,a,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=N,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:N(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),v}},t}var M,A="succeeded",G="failed",R="pending",H="waiting",J=Object(m.b)("network")(T=Object(m.b)("system")(T=Object(m.b)("lend")(T=Object(m.c)(T=function(t){Object(i.a)(r,t);var e=Object(c.a)(r);function r(t){var n;return Object(o.a)(this,r),(n=e.call(this,t)).componentDidMount=Object(u.a)(D().mark((function t(){return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.title="Vote - JustLend DAO",n.props.lend.setData({voteDetailData:null}),n.getProposalIdFromUrl(),n.startInterval();case 4:case"end":return t.stop()}}),t)}))),n.startInterval=Object(u.a)(D().mark((function t(){return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.timerInterval){t.next=5;break}if(!n.state.proposalId){t.next=4;break}return t.next=4,n.props.lend.getVoteDetail(n.state.proposalId);case 4:n.timerInterval=setInterval(Object(u.a)(D().mark((function t(){return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.state.proposalId){t.next=3;break}return t.next=3,n.props.lend.getVoteDetail(n.state.proposalId);case 3:case"end":return t.stop()}}),t)}))),3e4);case 5:case"end":return t.stop()}}),t)}))),n.getProposalIdFromUrl=function(){n.props.lend.setData({lockNum:Object(_.a)(0)});var t=Object(_.H)("proposalId");n.setState({proposalId:t},(function(){n.props.lend.getVoteDetail(t)}))},n.getFormattedTimeString=function(t){return new Date(t).format("yyyy-MM-dd h:m:s")},n.showRedeemFromVotePop=function(){var t=n.state.proposalId;n.props.lend.setData({redeemFromVotePop:!0,redeemFromVotePopProposalId:t})},n.voteAgainstButtonOnClick=function(){var t=n.state.proposalId,e=n.props.lend.addVote;0!==n.props.network.isRightChain?0!==n.props.network.isMainNetwork?"yes"!==e&&n.props.lend.setData({voteForPop:!0,voteForPopIsFor:!1,voteForPopProposalId:t}):n.props.network.showNetworkErrorModal():n.props.network.changeChain()},n.voteForButtonOnClick=function(){var t=n.state.proposalId,e=n.props.lend.addVote;0!==n.props.network.isRightChain?0!==n.props.network.isMainNetwork?"no"!==e&&n.props.lend.setData({voteForPop:!0,voteForPopIsFor:!0,voteForPopProposalId:t}):n.props.network.showNetworkErrorModal():n.props.network.changeChain()},n.renderStatusItem=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;return l.a.createElement("div",{className:h()("status-history",{expandable:e},{collapsed:r}),key:"history"+t.status+"_"+o},l.a.createElement("div",{className:h()("expand-button",{visible:e}),onMouseEnter:function(){n.setState({shouldExpandTimeline:!0}),gtag("event","click",{event_category:"PC_V1.5",event_label:"vote_detail_expand"})},onMouseLeave:function(){n.setState({shouldExpandTimeline:!1})}},p.a.get("v2.vote.status_expand_btn")),l.a.createElement("div",{className:h()("timeline-icon",{succeeded:t.icon===A},{failed:t.icon===G},{pending:t.icon===R},{waiting:t.icon===H})}),l.a.createElement("div",{className:h()("status-title",{"hover-enabled":t.hoverHint})},t.title,t.hoverHint&&l.a.createElement("div",{className:"hover-hint"},t.hoverHint)),l.a.createElement("div",{className:"status-time"},t.timeString),l.a.createElement("div",{className:"timeline-dot"}),l.a.createElement("div",{className:"timeline-arrow-dot"}))},n.state={mobile:Object(d.a)(window.navigator).any,lang:window.localStorage.getItem("lang")||p.a.options.currentLocale,proposalId:void 0,shouldExpandTimeline:!1},n}return Object(a.a)(r,[{key:"componentWillUnmount",value:function(){clearInterval(this.timerInterval),this.timerInterval=null}},{key:"render",value:function(){var t,e,r,n,o,a,i,c,s,u,v,d,f,m,j=this,k=this.state,N=k.lang,L=(k.mobile,k.shouldExpandTimeline),S=this.props.lend,P=S.theme,V=S.voteDetailData,T=S.addVote,D=S.lockNum,M=this.props.network.isConnected,H="en-US"===N,J=[];if(V){t=H?V.title.split("&&")[1]:V.title.split("&&")[0],e=V.proposalId,r=H?V.content.split("&&&&&&&&")[0]:V.content.split("&&&&&&&&")[1];var B=V.state;J.push({status:"creation",icon:A,title:p.a.get("v2.vote.status_created"),timeString:this.getFormattedTimeString(V.activeTime)}),2!=B&&J.push({status:"voting",icon:A,title:p.a.get("v2.vote.voting_begun"),timeString:this.getFormattedTimeString(V.activeTime)}),B<2&&J.push({status:"confirmingVotingResult",icon:R,title:p.a.get("v2.vote.status_result_confirm"),timeString:this.getFormattedTimeString(V.endTime)}),2==B&&J.push({status:"cancelCreation",icon:G,title:p.a.get("v2.vote.status_cancel_creation"),timeString:this.getFormattedTimeString(V.cancelTime)}),3==B&&J.push({status:"failed",icon:G,title:p.a.get("v2.vote.status_failed"),hoverHint:p.a.get("v2.vote.status_hint_insufficient_vote_count"),timeString:this.getFormattedTimeString(V.endTime)}),B>3&&6!=B&&J.push({status:"passed",icon:A,title:p.a.get("v2.vote.status_passed"),timeString:this.getFormattedTimeString(V.endTime)}),4==B&&J.push({status:"waitForQueue",icon:R,title:p.a.get("v2.vote.status_wait_for_queue"),timeString:this.getFormattedTimeString(V.endTime)}),5!=B&&7!=B||J.push({status:"queuing",icon:A,title:p.a.get("v2.vote.status_queuing"),timeString:this.getFormattedTimeString(V.queuedTime)}),6==B&&J.push({status:"cancelled",icon:G,title:p.a.get("v2.vote.status_expired"),hoverHint:"",timeString:this.getFormattedTimeString(V.queuedTime+2592e5)}),7==B&&J.push({status:"executed",icon:A,title:p.a.get("v2.vote.status_executed"),hoverHint:"",timeString:this.getFormattedTimeString(V.executedTime)}),n="6"!=B;var q=Object(_.a)(V.forVotes),U=Object(_.a)(V.againstVotes);if(o=q.gt(0),a=U.gt(0),i=Object(_.k)(q.div(b.b.tokenDefaultPrecision)._toHex(),3),c=Object(_.k)(U.div(b.b.tokenDefaultPrecision)._toHex(),3),q<=0&&U<=0)s=-1;else if(q<=0)s=0;else if(U<=0)s=100;else{var W=q/U;s=Object(_.a)(W/(1+W)*100).integerValue(_.a.ROUND_HALF_UP)}var Y=Object(_.a)(D).gt(0);u=0==B||1==B,d="no"==T&&Y,v="yes"==T&&Y,f=Object(_.k)(Object(_.a)(D).div(b.b.tokenDefaultPrecision),3),m=M&&"1"!=B&&"0"!=B&&Y}return l.a.createElement("div",{className:"j-wrapper "+P},l.a.createElement(E.a,null),l.a.createElement("div",{className:"j-container"},V?l.a.createElement("div",{className:"vote-detail"},l.a.createElement(y.b,{className:"back-to-vote-button",to:"/voteNew"},p.a.get("v2.vote.back_to_vote_btn")),l.a.createElement("div",{className:"vote-detail-header"},l.a.createElement("div",{className:"vote-detail-title-container"},l.a.createElement("div",{className:"vote-detail-title"},t,l.a.createElement("span",{className:"proposal-id-tag"},"#"+e)),l.a.createElement("div",{className:"vote-detail-links-row"},l.a.createElement("a",{className:"link-item",href:b.b.tronscanUrl+"/address/"+(null===V||void 0===V?void 0:V.proposer),target:"tronscan",onClick:gtag("event","click",{event_category:"PC_V1.5",event_label:"vote_on_chain_info"})},p.a.get("v2.vote.header_chain_info_link")))),l.a.createElement("div",{className:h()("vote-detail-status-box content-container",{"invisible-content":J.length>3})},J.length>3?J.map((function(t,e){if(0===e||e>J.length-3)return j.renderStatusItem(t,0===e,!1,e)})):J.map((function(t,e){return j.renderStatusItem(t,!1,!1,e)})),J.length>3&&l.a.createElement("div",{className:h()("vote-detail-status-box content-container expandable-display",{expanding:L})},L?J.map((function(t,e){return j.renderStatusItem(t,!1,!1,e)})):J.map((function(t,e){return 0===e||e>J.length-3?j.renderStatusItem(t,0===e,!1,e):j.renderStatusItem(t,0===e,!0,e)}))))),n&&l.a.createElement("div",{className:"progress-bar-container"+(u?"":" no-vote")},l.a.createElement("div",{className:h()("support-progress-bar-container",{"zero-vote":!o}),style:{flexBasis:s+"%"}},l.a.createElement("div",{className:"progress-bar-title"},p.a.get("v2.vote.support")),l.a.createElement("div",{className:"progress-bar-vote-string"},i),v&&l.a.createElement("div",{className:"wallet-vote-container"},l.a.createElement("div",{className:"vote-icon"},l.a.createElement("div",{className:"voted-hint"},p.a.get("v2.vote.voted_before"))),l.a.createElement("div",{className:"wallet-vote-count"},f)),u&&l.a.createElement("button",{className:"action-button",disabled:!M||d,onClick:function(){j.voteForButtonOnClick(),gtag("event","click",{event_category:"PC_V1.5",event_label:"".concat(v?"add_vote":"vote"),value:"for"})}},p.a.get(v?"v2.vote.add_vote_btn":"v2.vote.support")),l.a.createElement("div",{className:"progress-bar-background"},l.a.createElement("div",{className:"progress-bar"})),l.a.createElement("div",{className:"progress-bar"}),l.a.createElement("div",{className:"progress-bar square-upper-half"})),l.a.createElement("div",{className:h()("against-progress-bar-container",{"zero-vote":!a}),style:{flexBasis:100-s+"%"}},l.a.createElement("div",{className:"progress-bar-title"},p.a.get("v2.vote.against")),l.a.createElement("div",{className:"progress-bar-vote-string"},c),d&&l.a.createElement("div",{className:"wallet-vote-container"},l.a.createElement("div",{className:"vote-icon"},l.a.createElement("div",{className:"voted-hint"},p.a.get("v2.vote.voted_before"))),l.a.createElement("div",{className:"wallet-vote-count"},f)),u&&l.a.createElement("button",{className:"action-button",disabled:!M||v,onClick:function(){j.voteAgainstButtonOnClick(),gtag("event","click",{event_category:"PC_V1.5",event_label:"".concat(d?"add_vote":"vote"),value:"against"})}},p.a.get(d?"v2.vote.add_vote_btn":"v2.vote.against")),l.a.createElement("div",{className:"progress-bar-background"},l.a.createElement("div",{className:"progress-bar"})),l.a.createElement("div",{className:"progress-bar"}),l.a.createElement("div",{className:"progress-bar square-upper-half"}))),!M&&l.a.createElement("div",{className:"connect-wallet-hint-bar content-container content-container-shadow"},l.a.createElement("div",{className:"bar-title"},p.a.get("v2.vote.connect_wallet_title")),l.a.createElement("button",{className:"bar-action-btn",onClick:function(){return j.props.network.connectWalletV2()}},p.a.get("v2.vote.connect_wallet_btn"))),m&&l.a.createElement("div",{className:"redeem-vote-bar content-container content-container-shadow"},l.a.createElement("div",{className:"bar-title"},p.a.get("v2.vote.redeem_vote_title",{value:f})),l.a.createElement("button",{className:"bar-action-btn",disabled:!M,onClick:function(){j.showRedeemFromVotePop(),gtag("event","click",{event_category:"PC_V1.5",event_label:"vote_detail_recycle"})}},p.a.get("v2.vote.redeem_vote_btn"))),l.a.createElement("div",{className:"vote-detail-info-container content-container content-container-shadow"},l.a.createElement("div",{className:"vote-detail-info-header"},p.a.get("v2.vote.info_title")),l.a.createElement("div",{className:h()("vote-detail-info-text",{dark:"white"!==P}),dangerouslySetInnerHTML:{__html:r}}))):l.a.createElement("div",{className:"vote-detail-loading-screen"},l.a.createElement(g.a,null))),V&&l.a.createElement(w.a,null),l.a.createElement(O,null),l.a.createElement(I,null),l.a.createElement(F,null),l.a.createElement(C.a,null),l.a.createElement(x.a,null))}}]),r}(l.a.Component))||T)||T)||T)||T,B=Object(m.b)("network")(M=Object(m.c)(M=function(t){Object(i.a)(r,t);var e=Object(c.a)(r);function r(){return Object(o.a)(this,r),e.apply(this,arguments)}return Object(a.a)(r,[{key:"componentDidMount",value:function(){this.props.network.setData({routeName:"vote"})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(J,null))}}]),r}(l.a.Component))||M)||M;e.default=B}}]);