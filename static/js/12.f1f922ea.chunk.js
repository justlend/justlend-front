/*! For license information please see 12.f1f922ea.chunk.js.LICENSE.txt */
(this["webpackJsonpjustlend-front"]=this["webpackJsonpjustlend-front"]||[]).push([[12],{1600:function(e,t,n){"use strict";var a,r,o=n(9),i=n(10),c=n(16),s=n(17),l=n(0),u=n.n(l),d=n(68),p=n(22),m=n(1),v=n.n(m),h=(n(1602),Object(p.b)("network")(a=Object(p.b)("lend")(a=Object(p.c)(a=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).touchStart=0,a.touchEnd=0,a.handleTouchStart=function(e){a.touchStart=e.changedTouches[0].clientY},a.handleTouchEnd=function(e){a.touchEnd=e.changedTouches[0].clientY,a.calculateSwipe()},a.calculateSwipe=function(){var e=a.props.network.showTabsBar,t=a.touchStart-a.touchEnd,n=document.body.scrollHeight||document.documentElement.scrollHeight,r=document.body.clientHeight||document.documentElement.clientHeight,o=document.body.scrollTop||document.documentElement.scrollTop;Number(o+r)===Number(n)?!e&&t>10&&a.props.network.setData({showTabsBar:!0}):t>10?a.props.network.setData({showTabsBar:!1}):Math.abs(t)>10&&a.props.network.setData({showTabsBar:!0})},a.state={showTabsBar:!0},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("touchstart",this.handleTouchStart),window.addEventListener("touchend",this.handleTouchEnd)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchend",this.handleTouchEnd)}},{key:"render",value:function(){return this.props.network.showTabsBar?this.props.children:null}}]),n}(u.a.Component))||a)||a)||a),f=Object(p.b)("network")(r=Object(p.b)("lend")(r=Object(p.c)(r=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={lang:window.localStorage.getItem("lang")||v.a.options.currentLocale},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.network.routeName,t="white"===this.props.theme;return u.a.createElement(h,null,u.a.createElement("div",{className:"m-tabsbar ".concat(this.props.classNames||""," ").concat(t?"white":"")},u.a.createElement("nav",{className:"menu"},u.a.createElement(d.b,{to:"/homeNew",className:"home"===e?"menu-item current":"menu-item"},u.a.createElement("span",{className:"menu-icons home"}),u.a.createElement("span",{className:"menu-item-label"},v.a.get("v2.lend_title"))),u.a.createElement(d.b,{to:"/strx",className:"LiquidityStake"===e?"menu-item current":"menu-item"},u.a.createElement("span",{className:"menu-icons strx"}),u.a.createElement("span",{className:"menu-item-label"},v.a.get("strx.stake_trx_liquid_staking"))),u.a.createElement(d.b,{to:"/energy",className:"EnergyRent"===e?"menu-item current":"menu-item"},u.a.createElement("span",{className:"menu-icons energy"}),u.a.createElement("span",{className:"menu-item-label"},v.a.get("strx.energy_rental"))),u.a.createElement(d.b,{to:"/voteNew",className:"vote"===e?"menu-item current":"menu-item"},u.a.createElement("span",{className:"menu-icons dao"}),u.a.createElement("span",{className:"menu-item-label"},v.a.get("navi.vote_btn"))))))}}]),n}(u.a.Component))||r)||r)||r;t.a=f},1602:function(e,t,n){},1603:function(e,t,n){"use strict";var a,r=n(9),o=n(10),i=n(16),c=n(17),s=n(0),l=n.n(s),u=(n(62),n(22)),d=n(2),p=n(248),m=n(1),v=n.n(m),h=(n(840),n(465)),f=n.n(h),g=n(467),b=n.n(g),w=(n(1606),n(182)),y=n.n(w),E=n(181),x=n.n(E),N=n(183),k=n.n(N),j=Object(u.b)("network")(a=Object(u.b)("lend")(a=Object(u.b)("system")(a=Object(u.c)(a=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).close=function(){e.props.system.setData({transModalInfo:{visible:!1}})},e.state={},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.system.transModalInfo,n=t.visible,a=t.step,r=t.txId,o=t.title,i=t.obj,c=t.title2,s=t.title3,u=t.title4,m=this.props.lend.theme;return l.a.createElement(p.a,{title:"",visible:n,closable:!0,icon:null,onCancel:function(){return e.props.system.hideTransModal()},footer:null,width:345,className:"trans-modal ".concat(m)},l.a.createElement("div",{className:"trans-modal-body center"},1==a?l.a.createElement(l.a.Fragment,{key:"step1"},o&&l.a.createElement("div",{className:"trans-modal-title"},v.a.get(u||o,i)),l.a.createElement("div",{className:"trans-modal-icon"},l.a.createElement("img",{src:x.a,className:"authorizeIcon"}),l.a.createElement("div",{className:"points"},l.a.createElement("span",{className:"point"}),l.a.createElement("span",{className:"point"}),l.a.createElement("span",{className:"point"}))),l.a.createElement("div",{className:"trans-modal-status trans-modal-wait-confirm"},v.a.get("deposit.signTronlink"))):null,2==a?l.a.createElement(l.a.Fragment,{key:"step2"},l.a.createElement("div",{className:"trans-modal-title"},v.a.get(c||"deposit.transactionsent",i)),l.a.createElement("div",{className:"trans-modal-icon"},l.a.createElement("img",{src:b.a,alt:"",style:{width:"50px"}})),l.a.createElement("div",{className:"trans-modal-tips trans-modal-submit-tips"},Object(d.qb)(v.a.get("deposit.explanation4"),r)),l.a.createElement("div",{className:"modal-btn border-btn",onClick:this.props.system.hideTransModal,style:{marginTop:"20px"}},v.a.get("deposit.closed"))):null,3==a?l.a.createElement(l.a.Fragment,{key:"step3"},l.a.createElement("div",{className:"trans-modal-title"},v.a.get(s||"toast.ex_failed",i)),l.a.createElement("div",{className:"trans-modal-icon"},l.a.createElement("img",{src:f.a,alt:"",style:{width:"40px"}})),l.a.createElement("div",{className:"trans-modal-status trans-modal-cancel"},v.a.get("deposit.explanation3"))):null,4==a?l.a.createElement(l.a.Fragment,{key:"step1"},o&&l.a.createElement("div",{className:"trans-modal-title"},v.a.get(u||o,i)),l.a.createElement("div",{className:"trans-modal-icon"},l.a.createElement("img",{src:y.a,className:"authorizeIcon"}),l.a.createElement("div",{className:"points"},l.a.createElement("span",{className:"point"}),l.a.createElement("span",{className:"point"}),l.a.createElement("span",{className:"point"}))),l.a.createElement("div",{className:"trans-modal-status trans-modal-wait-confirm"},v.a.get("deposit.signWalletConnect"))):null,5==a?l.a.createElement(l.a.Fragment,{key:"step1"},o&&l.a.createElement("div",{className:"trans-modal-title"},v.a.get(u||o,i)),l.a.createElement("div",{className:"trans-modal-icon"},l.a.createElement("img",{src:k.a,className:"authorizeIcon"}),l.a.createElement("div",{className:"points"},l.a.createElement("span",{className:"point"}),l.a.createElement("span",{className:"point"}),l.a.createElement("span",{className:"point"}))),l.a.createElement("div",{className:"trans-modal-status trans-modal-wait-confirm"},v.a.get("deposit.signLedger"))):null,9==a?l.a.createElement(l.a.Fragment,{key:"step3"},l.a.createElement("div",{className:"trans-modal-title"},v.a.get(s||"toast.ex_failed",i)),l.a.createElement("div",{className:"trans-modal-icon"},l.a.createElement("img",{src:f.a,alt:"",style:{width:"40px"}})),l.a.createElement("div",{className:"trans-modal-status trans-modal-cancel"},v.a.get("deposit.explanation_expired"))):null))}}]),n}(l.a.Component))||a)||a)||a)||a;t.a=j},1606:function(e,t,n){e.exports=n.p+"static/media/authorize.6f2e8e85.svg"},1617:function(e,t,n){},1703:function(e,t,n){"use strict";n.r(t);var a,r=n(9),o=n(10),i=n(16),c=n(17),s=n(0),l=n.n(s),u=n(31),d=n(3),p=n(170),m=n(95),v=n(380),h=n(248),f=n(68),g=n(382),b=n(62),w=n(1),y=n.n(w),E=(n(1617),n(2)),x=n(8),N=n(22),k=n(1603);n(840);function j(){j=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(V){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new O(r||[]);return a(i,"_invoke",{value:E(e,n,c)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(V){return{type:"throw",arg:V}}}e.wrap=l;var d={};function p(){}function m(){}function v(){}var h={};s(h,o,(function(){return this}));var f=Object.getPrototypeOf,g=f&&f(f(_([])));g&&g!==t&&n.call(g,o)&&(h=g);var b=v.prototype=p.prototype=Object.create(h);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;a(this,"_invoke",{value:function(a,o){function i(){return new t((function(r,i){!function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,i,c)}),(function(e){a("throw",e,i,c)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return a("throw",e,i,c)}))}c(s.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}})}function E(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return L()}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=x(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}function x(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var r=u(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function _(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:L}}function L(){return{value:void 0,done:!0}}return m.prototype=v,a(b,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:m,configurable:!0}),m.displayName=s(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(y.prototype),s(y.prototype,i,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new y(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(b),s(b,c,"Generator"),s(b,o,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=_,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;k(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}var O,_=Object(N.b)("network")(a=Object(N.b)("lend")(a=Object(N.b)("system")(a=Object(N.c)(a=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).startInterval=Object(d.a)(j().mark((function t(){return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.timerInterval||(e.timerInterval=setInterval(Object(d.a)(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),3e3));case 1:case"end":return t.stop()}}),t)}))),e.componentDidMount=function(){e.startInterval()},e.withdrawVotes=function(){var t=Object(d.a)(j().mark((function t(n){var a,r,o,i,c;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=x.b.oldVoteLastId,r=n<=a?x.b.contract.oldWJSTAddress:x.b.contract.WJSTAddress,i={title:"toast.ex",title2:"deposit.transactionsent",title3:"toast.ex_failed",title4:"deposit.confirm_transaction",obj:{value:(o={proposalId:n,contractAddr:r}).votes,token:o.proposalId||""}},t.next=6,e.props.system.withdrawVotes(o,i);case 6:(c=t.sent)&&(console.log("withdrawVotes complete:",c),e.props.lend.setData({redeemFromVotePop:!1}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderVoting=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.props.lend.voteSourceData,r=e.state.lang;if((null===t||void 0===t?void 0:t.length)>0)return null===t||void 0===t?void 0:t.map((function(t,o){var i;return l.a.createElement("div",{className:"vote-detail-item",key:o},l.a.createElement("div",{className:"point "+("en-US"===r?"":"zh")},l.a.createElement("div",{className:"title"},"#",null===t||void 0===t?void 0:t.proposalId," ",a&&(null===(i=a[null===t||void 0===t?void 0:t.proposalId])||void 0===i?void 0:i.title)?"en-US"===r?a[t.proposalId].title.split("&&")[1]:a[t.proposalId].title.split("&&")[0]:""),l.a.createElement("div",{className:"amount"},l.a.createElement("span",null,Object(E.k)(t.allVotes,0))," JST")),n&&l.a.createElement("span",{className:"link",onClick:function(){return e.withdrawVotes(t.proposalId)}},y.a.get("v2.vote.redeem_vote_btn")))}))},e.timerInterval=null,e.state={lang:window.localStorage.getItem("lang")||y.a.options.currentLocale,visible:!1},e}return Object(o.a)(n,[{key:"componentWillUnmount",value:function(){clearInterval(this.timerInterval),this.timerInterval=null}},{key:"render",value:function(){var e=this,t=this.props.lend,n=t.userCanRedeemVoteList,a=t.userVotingVote,r=t.voteDetailModalVisible;return l.a.createElement(h.a,{title:y.a.get("vote.vote_details"),maskClosable:!1,visible:r,closable:!0,onCancel:function(){return e.props.lend.setData({voteDetailModalVisible:!1})},footer:null,width:400,className:"vote-detail-modal"},a&&(null===a||void 0===a?void 0:a.length)>0||n&&(null===n||void 0===n?void 0:n.length)>0?l.a.createElement("div",{className:"vote-detail-container"},a.length>0&&l.a.createElement("div",{className:"box full"},this.renderVoting(a)),n&&(null===n||void 0===n?void 0:n.length)>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"tip"},y.a.get("vote.can_withdraw")),l.a.createElement("div",{className:"box"},this.renderVoting(n,!0)))):l.a.createElement("div",{className:"no-data"},y.a.get("vote.no_data")))}}]),n}(l.a.Component))||a)||a)||a)||a;function L(){L=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(V){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new j(r||[]);return a(i,"_invoke",{value:E(e,n,c)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(V){return{type:"throw",arg:V}}}e.wrap=l;var d={};function p(){}function m(){}function v(){}var h={};s(h,o,(function(){return this}));var f=Object.getPrototypeOf,g=f&&f(f(O([])));g&&g!==t&&n.call(g,o)&&(h=g);var b=v.prototype=p.prototype=Object.create(h);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;a(this,"_invoke",{value:function(a,o){function i(){return new t((function(r,i){!function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,i,c)}),(function(e){a("throw",e,i,c)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return a("throw",e,i,c)}))}c(s.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}})}function E(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return _()}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=x(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}function x(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var r=u(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:_}}function _(){return{value:void 0,done:!0}}return m.prototype=v,a(b,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:m,configurable:!0}),m.displayName=s(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(y.prototype),s(y.prototype,i,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new y(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(b),s(b,c,"Generator"),s(b,o,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=O,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;k(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}var V,S=Object(N.b)("network")(O=Object(N.b)("lend")(O=Object(N.b)("system")(O=Object(N.c)(O=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).startInterval=Object(d.a)(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.timerInterval||(e.timerInterval=setInterval(Object(d.a)(L().mark((function e(){return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),3e3));case 1:case"end":return t.stop()}}),t)}))),e.componentDidMount=function(){e.startInterval()},e.closeOldAndOpenNewModal=function(){var t=e.props.lend.voteInfo;e.props.lend.setData({voteOldWithdrawModalVisible:!1}),t&&t.success&&(null===t||void 0===t?void 0:t.surplusVotes.gt(0))&&e.props.lend.setData({withdrawPop:!0})},e.toWithdraw=function(){var t=Object(d.a)(L().mark((function t(n){var a,r;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={collateralAddress:x.b.contract.JST,jtokenAddress:x.b.contract.oldWJSTAddress,amount:Object(E.a)(n).times(x.b.tokenDefaultPrecision)._toHex()},r={title:"toast.ex",title2:"deposit.transactionsent",title3:"toast.ex_failed",title4:"deposit.confirm_transaction",obj:{value:a.collateralSymbol}},e.setState({isSuccess:!1,txID:""}),t.next=5,e.props.system.voteWithdraw(a,r);case 5:t.sent&&e.props.lend.setData({voteOldWithdrawModalVisible:!1});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.timerInterval=null,e.state={lang:window.localStorage.getItem("lang")||y.a.options.currentLocale,visible:!1},e}return Object(o.a)(n,[{key:"componentWillUnmount",value:function(){clearInterval(this.timerInterval),this.timerInterval=null}},{key:"render",value:function(){var e=this,t=this.props.lend,n=t.oldVoteInfo,a=t.voteOldWithdrawModalVisible,r=this.state.lang;return l.a.createElement(h.a,{title:y.a.get("vote.invalid_vote"),maskClosable:!1,visible:a,closable:!0,onCancel:function(){return e.closeOldAndOpenNewModal()},footer:null,width:400,className:"vote-old-withdraw-modal"},l.a.createElement("div",{className:"vote-old-withdraw-content"},l.a.createElement("div",{className:"title"},y.a.get("vote.as_jst")),l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"point"},y.a.get("vote.update_description")),l.a.createElement("div",{className:"point flex-sp"},y.a.getHTML("vote.will_receive",{amount:n&&n.success&&(null===n||void 0===n?void 0:n.surplusVotes.div(x.b.tokenDefaultPrecision).toString())}),l.a.createElement("a",{target:"vote-notice",href:"en-US"===r?x.b.voteNoticeEn:x.b.voteNoticeZn,className:"link"},y.a.get("vote.details")))),l.a.createElement("div",{className:"withdraw-btn",onClick:function(){return e.toWithdraw(n&&n.success&&(null===n||void 0===n?void 0:n.surplusVotes.div(x.b.tokenDefaultPrecision)))}},y.a.get("vote.withdraw"))))}}]),n}(l.a.Component))||O)||O)||O)||O,I=n(293),D=n(1600);function F(){F=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(L){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof p?t:p,i=Object.create(o.prototype),c=new j(r||[]);return a(i,"_invoke",{value:E(e,n,c)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(L){return{type:"throw",arg:L}}}e.wrap=l;var d={};function p(){}function m(){}function v(){}var h={};s(h,o,(function(){return this}));var f=Object.getPrototypeOf,g=f&&f(f(O([])));g&&g!==t&&n.call(g,o)&&(h=g);var b=v.prototype=p.prototype=Object.create(h);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;a(this,"_invoke",{value:function(a,o){function i(){return new t((function(r,i){!function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,i,c)}),(function(e){a("throw",e,i,c)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return a("throw",e,i,c)}))}c(s.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}})}function E(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return _()}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=x(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}function x(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var r=u(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:_}}function _(){return{value:void 0,done:!0}}return m.prototype=v,a(b,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:m,configurable:!0}),m.displayName=s(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(y.prototype),s(y.prototype,i,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new y(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(b),s(b,c,"Generator"),s(b,o,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=O,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;k(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}var P,T=p.a.Option,C=Object(N.b)("network")(V=Object(N.b)("system")(V=Object(N.b)("lend")(V=Object(N.c)(V=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).componentDidMount=Object(d.a)(F().mark((function e(){var t,n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.title="Vote - JustLend DAO",a.props.lend.setData({voteForPop:!1,redeemFromVotePop:!1}),e.prev=2,e.next=5,a.props.lend.getCurrentBlock();case 5:return t=e.sent,e.next=8,a.props.lend.getVoteList(t);case 8:n=e.sent,a.setState({dataList:n.arr}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log("getVoteList: ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])}))),a.pageChange=function(e){},a.renderVoteList=function(){var e=a.state.dataList,t=a.props.network.isConnected;if(!e||!e.length)return l.a.createElement("div",{className:""},Object(E.i)());var n=e.map((function(e,n){return e&&e.state?t?l.a.createElement(f.b,{to:{pathname:"/voteDetail",search:"?proposalId=".concat(e.proposalId)},key:n},a.renderVoteInfo(e)):l.a.createElement("a",{key:n,onClick:function(){return a.props.network.connectWallet()}},a.renderVoteInfo(e)):null}));return l.a.createElement(l.a.Fragment,null,n)},a.renderVoteInfo=function(e){var t=a.state.lang;return l.a.createElement("div",{className:"card-list"},l.a.createElement("div",{className:"flex-between"},l.a.createElement("span",{className:"c-0F134F fs14 proposal-title"},e.title?"en-US"===t?e.title.split("&&")[1]:e.title.split("&&")[0]:""),l.a.createElement("span",{className:"c-84869E fs12 proposal-id"},"# ",e.proposalId)),l.a.createElement("div",{className:"flex-between mt13"},l.a.createElement("div",{className:"cl-footer-left"},l.a.createElement("span",{className:"status sta"+e.state},e&&e.intl),1===e.state?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,y.a.get("vote.detail_subtitle_for"),"\uff1a",l.a.createElement("span",{className:"c-0F134F fs12 fw500"},Object(E.k)(Object(E.a)(e.forVotes).div(x.b.tokenDefaultPrecision)._toHex(),0))),l.a.createElement("span",null,y.a.get("vote.detail_subtitle_against"),"\uff1a",l.a.createElement("span",{className:"c-0F134F fs12 fw500"},Object(E.k)(Object(E.a)(e.againstVotes).div(x.b.tokenDefaultPrecision)._toHex(),0)))):l.a.createElement("span",{className:"ex-"+e.state},e.exIntl)),l.a.createElement("span",{className:"fs12"},y.a.get("vote.case_info_endtime")," \xa0\xa0",l.a.createElement("span",{className:"c-84869E fs12"},new Date(e.endTime).format("yyyy-MM-dd h:m:s")))))},a.renderMyVote=function(){var e=a.props.lend,t=e.voteInfo,n=e.oldVoteInfo,r=a.state.mobile;return l.a.createElement("div",{className:"vr-info"},l.a.createElement("div",{className:"vr-header flex-between block-header"},l.a.createElement("span",{className:"c-0F134F fw600"},l.a.createElement("span",null,y.a.get("vote.myvote_title")),l.a.createElement(m.a,{title:y.a.get("vote.myvote_help"),arrowPointAtCenter:!0,placement:"topLeft",trigger:["click","hover"]},l.a.createElement("span",{className:"tooltip-icon"})))),l.a.createElement("div",{className:"vr-content"},l.a.createElement("div",{className:"flex-between mb16"},l.a.createElement("span",null,y.a.get("vote.myvote_balance")),l.a.createElement("span",{className:"fs14 c-0F134F"},t&&t.success&&Object(E.k)(t.surplusVotes.div(x.b.tokenDefaultPrecision),3,{miniText:.001}))),l.a.createElement("div",{className:"vote-detail"},l.a.createElement("div",{className:"flex-between"},l.a.createElement("span",null,y.a.get("vote.myvote_total")),l.a.createElement("span",null,t&&t.success&&n&&n.success&&Object(E.k)(t.totalVote.plus(n.totalVote).div(x.b.tokenDefaultPrecision),3,{miniText:.001}))),l.a.createElement("div",{className:"flex-between"},l.a.createElement("span",null,y.a.get("vote.myvote_voted")),r?l.a.createElement("span",{className:"link",onClick:function(){a.props.lend.setData({voteDetailModalVisible:!0})}},t&&t.success&&n&&n.success&&Object(E.k)(t.castVote.plus(n.castVote).div(x.b.tokenDefaultPrecision),3,{miniText:.001})):l.a.createElement(m.a,{arrowPointAtCenter:!0,title:y.a.get("vote.view_details"),placement:"topRight",trigger:["click","hover"]},l.a.createElement("span",{className:"link",onClick:function(){a.props.lend.setData({voteDetailModalVisible:!0})}},t&&t.success&&n&&n.success&&Object(E.k)(t.castVote.plus(n.castVote).div(x.b.tokenDefaultPrecision),3,{miniText:.001})))))),l.a.createElement("div",{className:"vr-footer flex-between"},l.a.createElement("span",{className:"btn",onClick:function(){return a.openModal()}},y.a.get("vote.myvote_deposit")),l.a.createElement("span",{className:"btn",onClick:function(){return a.withdrawClick()}},y.a.get("vote.myvote_withdraw"))),n&&n.success&&(null===n||void 0===n?void 0:n.surplusVotes.gt(0))&&l.a.createElement("div",{className:"withdraw_tip",onClick:function(){return a.props.lend.setData({voteOldWithdrawModalVisible:!0})}},l.a.createElement("div",{className:"w1314"}),l.a.createElement("div",{className:"text"},y.a.get("vote.to_withdraw")),l.a.createElement("div",{className:"w48"})))},a.getFilterData=function(){var e=Object(d.a)(F().mark((function e(t){var n,r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.lend.voteSourceList;case 2:n=e.sent,r=Object(u.a)(n),"all"!==t&&(n=r.filter((function(e){return Object(E.a)(t).gte(4)?Object(E.a)(e.state).gte(4):e.state==t}))),a.setState({dataList:n});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.withdrawClick=function(){var e=a.props.network.isConnected,t=a.props.lend.oldVoteInfo;e?(a.setState({exchangeVoteValue:"",withdrawValue:""}),t&&t.success&&(null===t||void 0===t?void 0:t.surplusVotes.gt(0))?a.props.lend.setData({voteOldWithdrawModalVisible:!0}):a.props.lend.setData({withdrawPop:!0})):a.props.network.connectWallet()},a.exchangeVoteChange=function(e){var t=Object(E.ab)(e.target.value,3),n=t.valid,r=t.str;n&&a.setState({exchangeVoteValue:r})},a.withdrawChange=function(e){var t=Object(E.ab)(e.target.value,3),n=t.valid,r=t.str;n&&a.setState({withdrawValue:r})},a.maxRender=function(e){return 1===e?l.a.createElement("div",{className:"c-0F134F fs12 fw500",onClick:a.chooseMax},y.a.get("vote.voteto_input_max")):2===e?l.a.createElement("div",{className:"c-0F134F fs12 fw500",onClick:a.chooseWithdrawMax},y.a.get("vote.voteto_input_max")):void 0},a.chooseMax=function(){var e=a.props.lend.voteInfo,t=Object(E.k)(e.jstBalance.div(x.b.tokenDefaultPrecision),3,{per:!0});a.setState({exchangeVoteValue:t})},a.chooseWithdrawMax=function(){var e=a.props.lend.voteInfo,t=Object(E.k)(e.surplusVotes.div(x.b.tokenDefaultPrecision),3,{per:!0});a.setState({withdrawValue:t})},a.withdrawSubmit=function(){var e=a.state.withdrawValue;a.toWithdraw(e)},a.toDeposit=Object(d.a)(F().mark((function e(){var t,n,r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.exchangeVoteValue,n={collateralAddress:x.b.contract.JST,jtokenAddress:x.b.contract.WJSTAddress,amount:Object(E.a)(t).times(x.b.tokenDefaultPrecision)._toHex()},r={title:"toast.ex",title2:"deposit.transactionsent",title3:"toast.ex_failed",title4:"deposit.confirm_transaction",obj:{value:n.collateralSymbol}},a.setState({isSuccess:!1,txID:""}),e.next=6,a.props.system.voteDeposit(n,r);case 6:e.sent;case 7:case"end":return e.stop()}}),e)}))),a.toWithdraw=function(){var e=Object(d.a)(F().mark((function e(t){var n,r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={collateralAddress:x.b.contract.JST,jtokenAddress:x.b.contract.WJSTAddress,amount:Object(E.a)(t).times(x.b.tokenDefaultPrecision)._toHex()},r={title:"toast.ex",title2:"deposit.transactionsent",title3:"toast.ex_failed",title4:"deposit.confirm_transaction",obj:{value:n.collateralSymbol}},a.setState({isSuccess:!1,txID:""}),e.next=5,a.props.system.voteWithdraw(n,r);case 5:e.sent;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getApprove=Object(d.a)(F().mark((function e(){var t,n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={collateralAddress:x.b.contract.JST,jtokenAddress:x.b.contract.WJSTAddress,precision:x.b.tokenDefaultPrecision},e.next=4,a.props.lend.getVoteBalanceOf(t);case 4:return n=e.sent,e.abrupt("return",Object(E.a)(n).gt(0));case 8:return e.prev=8,e.t0=e.catch(0),console.log("getApprove, ",e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),a.openModal=function(){var e=a.props.network.isConnected,t=a.state.approveStatus;e?t?a.authorize():a.props.lend.setData({authorizePop:!0}):a.props.network.connectWallet()},a.toApprove=Object(d.a)(F().mark((function e(){var t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={collateralAddress:x.b.contract.JST,jtokenAddress:x.b.contract.WJSTAddress},{title:"deposit.confirm_approve",obj:{value:t.collateralSymbol}},a.setState({isSuccess:!1,txID:""}),e.next=5,a.props.system.approveToken(t,[["lend/hideAuthorizePop"]]);case 5:e.sent&&a.setState({approveStatus:!0},(function(){a.authorize()}));case 7:case"end":return e.stop()}}),e)}))),a.authorize=function(){a.setState({exchangeVoteValue:""}),a.props.lend.setData({exchangeVotePop:!0,authorizePop:!1})},a.hideDepositPop=function(){a.props.lend.setData({authorizePop:!1,exchangeVotePop:!1,withdrawPop:!1})},a.renderApprovePop=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"vote-authorize-logo"}),l.a.createElement("div",{className:"tac margin-0-auto fs14 c-0F134F vote-text"},y.a.getHTML("vote.approve_text")),l.a.createElement("div",{className:"modal-btn authorize-btn mt40",onClick:function(){return a.toApprove()}},y.a.get("vote.approve_btn")))},a.renderDepositPop=function(){var e,t=a.state.lang,n=a.props.lend.voteInfo;return console.log(" Vote.js --- voteInfo:",n),n&&n.success&&(e=Object(E.k)(n.jstBalance.div(x.b.tokenDefaultPrecision),3,{per:!0})),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"flex-between mb16"},l.a.createElement("span",{className:"c-84869E fs12"},y.a.get("vote.deposit_amount"))),l.a.createElement(v.a,{className:"mb8",value:a.state.exchangeVoteValue,placeholder:y.a.get("vote.convert_input_tips"),suffix:a.maxRender(1),onChange:a.exchangeVoteChange}),l.a.createElement("div",{className:"c-0F134F fs14 flexB"},l.a.createElement("span",{className:"c-84869E fs12"},y.a.get("vote.deposit_balance")),l.a.createElement("div",null,n&&n.success&&Object(E.k)(n.jstBalance.div(x.b.tokenDefaultPrecision),3,{miniText:.001})," ","JST",l.a.createElement("a",{className:"toSwap",href:"".concat(x.b.sunSwap,"?lang=").concat(t,"?tokenAddress=").concat(x.b.contract.JST,"&type=swap"),target:"sunswap"},y.a.get("index.get")))),l.a.createElement("div",{className:"c-84869E fs12 mb16"},y.a.get("vote.deposit_tips")),a.state.exchangeVoteValue>0?l.a.createElement("button",{className:"modal-btn authorize-btn",onClick:function(){return a.toDeposit()},disabled:Object(E.a)(a.state.exchangeVoteValue).gt(e)},Object(E.a)(a.state.exchangeVoteValue).gt(e)?y.a.get("vote.voteto_insufficient_vote_balance"):y.a.get("vote.deposit_btn_deposit")):l.a.createElement("button",{className:"modal-btn no-use-btn"},y.a.get("vote.convert_input_tips")))},a.renderWithdrawPop=function(){var e,t=a.props.lend.voteInfo;return t&&t.success&&(e=Object(E.k)(t.surplusVotes.div(x.b.tokenDefaultPrecision),3,{miniText:.001})),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"flex-between mb16"},l.a.createElement("span",{className:"c-84869E fs12"},y.a.get("vote.withdraw_amount"))),l.a.createElement(v.a,{className:"mb8",value:a.state.withdrawValue,placeholder:y.a.get("vote.withdraw_input_tip"),suffix:a.maxRender(2),onChange:a.withdrawChange}),l.a.createElement("div",{className:"c-0F134F fs14 flexB"},l.a.createElement("span",{className:"c-84869E fs12"},y.a.get("vote.voteto_subtitle_votebal")),l.a.createElement("span",null,t&&t.success&&Object(E.k)(t.surplusVotes.div(x.b.tokenDefaultPrecision),3,{miniText:.001})," ","JST")),l.a.createElement("div",{className:"c-84869E fs12 mb16"},y.a.get("vote.deposit_tips")),a.state.withdrawValue>0?l.a.createElement("button",{className:"modal-btn authorize-btn",onClick:function(){return a.withdrawSubmit()},disabled:Object(E.a)(a.state.withdrawValue).gt(e)},Object(E.a)(a.state.withdrawValue).gt(e)?y.a.get("vote.voteto_insufficient_vote_balance"):y.a.get("v2.vote.redeem_now")):l.a.createElement("button",{className:"modal-btn no-use-btn"},y.a.get("v2.vote.redeem_now")))},a.getMountedData=Object(d.a)(F().mark((function e(){var t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.getApprove();case 3:t=e.sent,a.setState({approveStatus:t},(function(){a.props.lend.getBalanceForVote(),a.props.lend.getOldWjstBalanceForVote(),a.startInterval()})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("getVoteDataError: ",e.t0);case 10:return e.next=12,a.props.lend.getUserWithdrawInfo();case 12:case"end":return e.stop()}}),e,null,[[0,7]])}))),a.startInterval=Object(d.a)(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.timerInterval||(a.timerInterval=setInterval(Object(d.a)(F().mark((function e(){var t;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getApprove();case 2:return t=e.sent,a.setState({approveStatus:t}),e.next=6,a.props.lend.getBalanceForVote();case 6:return e.next=8,a.props.lend.getOldWjstBalanceForVote();case 8:return e.next=10,a.props.lend.getUserWithdrawInfo();case 10:case"end":return e.stop()}}),e)}))),6e4));case 1:case"end":return e.stop()}}),e)}))),a.state={mobile:Object(b.a)(window.navigator).any,lang:window.localStorage.getItem("lang")||y.a.options.currentLocale,dataList:[{}],voteSourceList:[{}],pagination:{size:"small",pageSize:1,simple:!1,showSizeChanger:!1,hideOnSinglePage:!0},selectKey:"all",selectValue:y.a.get("vote.allcase_picker_all"),exchangeVoteValue:"",withdrawValue:"",approveStatus:null},a}return Object(o.a)(n,[{key:"renderVoteHeader",value:function(){return l.a.createElement("div",{className:"vote-header"},l.a.createElement("h1",{className:"fs30 c-0F134F fw600"},y.a.get("vote.title")),l.a.createElement("h2",{className:"fs12 c-5A5E89"},y.a.get("vote.subtitle")))}},{key:"renderVoteLeft",value:function(){var e=this.state,t=(e.dataList,e.selectValue),n=this.props.lend.voteSourceList,a=Object(E.h)(n,"intl");return l.a.createElement("div",{className:"vote-left"},l.a.createElement("div",{className:"vl-header flex-between block-header"},l.a.createElement("span",{className:"c-0F134F fw600"},y.a.get("vote.allcase.title")),l.a.createElement(p.a,{className:"vote-select",defaultValue:"all",onChange:this.getFilterData},l.a.createElement(T,{value:"all"},t,"(",n.length,")"),a&&a.length>0&&a.map((function(e,t){return l.a.createElement(T,{value:e.state,key:t},e.intl,"(",e.count,")")})))),l.a.createElement("div",{className:"vl-list"},a&&a.length>0?this.renderVoteList():Object(E.i)()))}},{key:"renderVoteRight",value:function(){return l.a.createElement("div",{className:"vote-right"},this.renderMyWallet(),this.renderMyVote())}},{key:"renderMyWallet",value:function(){var e=this.props.lend.voteInfo;return l.a.createElement("div",{className:"vr-info"},l.a.createElement("div",{className:"vr-header flex-between block-header"},l.a.createElement("span",{className:"c-0F134F fw600"},l.a.createElement("span",null,y.a.get("vote.mywallet_title")),l.a.createElement(m.a,{title:y.a.get("vote.mywallet_help"),arrowPointAtCenter:!0,placement:"topLeft",trigger:["click","hover"]},l.a.createElement("span",{className:"tooltip-icon"}))),l.a.createElement("a",{className:"btn btn-small btn-getjst",target:"swap",href:"".concat(x.b.sunSwap,"?lang=").concat(this.state.lang,"?tokenAddress=").concat(x.b.contract.JST,"&type=swap")},y.a.get("vote.mywallet_btn_getjst"))),l.a.createElement("div",{className:"vr-content"},l.a.createElement("div",{className:"flex-between"},l.a.createElement("span",{className:"c-84869E fs12"},y.a.get("vote.mywallet_jstbalance")),l.a.createElement("span",{className:"c-0F134F fs14"},e&&e.success&&Object(E.k)(e.jstBalance.div(x.b.tokenDefaultPrecision),3,{miniText:.001})," ","JST"))))}},{key:"renderVoteAddressSum",value:function(){return l.a.createElement("div",{className:"vr-info flex-between"},l.a.createElement("span",{className:"fs14 c-84869E"},y.a.get("vote.myvote_address")),l.a.createElement("span",{className:"fs14 c-0F134F"},Object(E.k)(12345678.12375,0)," "))}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerInterval),this.timerInterval=null}},{key:"render",value:function(){var e=this,t=this.state.mobile,n=this.props.network.menuFlag,a=this.props.lend,r=a.exchangeVotePop,o=a.authorizePop,i=a.withdrawPop,c=o||r||i,s="";return o?s=y.a.get("vote.approve_title"):r?s=y.a.get("vote.deposit_title"):i&&(s=y.a.get("vote.withdraw_title")),l.a.createElement("div",{className:t?"":"flex-end"},l.a.createElement(g.a,{mountedActions:this.getMountedData,classNames:t?"transparant-bg":""}),l.a.createElement("div",{className:t?"vote-container right-container mobile-right-container":n?"vote-container right-container":"vote-container right-container max-width"},this.renderVoteHeader(),l.a.createElement("div",{className:"vote-content flex-between"},this.renderVoteLeft(),this.renderVoteRight()),l.a.createElement(h.a,{visible:c,title:s,width:400,footer:null,className:"vote-deposit"+(r?" border-bottom-header":""),onCancel:function(){return e.hideDepositPop()}},o?this.renderApprovePop():r?this.renderDepositPop():this.renderWithdrawPop()),l.a.createElement(k.a,null),l.a.createElement(_,null),l.a.createElement(S,null),l.a.createElement(I.a,null),t&&l.a.createElement(D.a,{theme:"white"})))}}]),n}(l.a.Component))||V)||V)||V)||V,A=Object(N.b)("network")(P=Object(N.c)(P=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.network.setData({routeName:"vote"})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(C,null))}}]),n}(l.a.Component))||P)||P;t.default=A}}]);