(this["webpackJsonpjustlend-front"]=this["webpackJsonpjustlend-front"]||[]).push([[3],{1539:function(e,t,a){"use strict";var r,n=a(8),s=a(13),o=a(17),l=a(18),c=a(0),i=a.n(c),m=(a(58),a(24)),d=a(3),p=a(243),u=a(2),b=a.n(u),f=(a(780),a(452)),w=a.n(f),v=a(456),g=a.n(v),E=(a(1540),a(173)),j=a.n(E),h=a(172),k=a.n(h),x=a(174),N=a.n(x),O=Object(m.b)("network")(r=Object(m.b)("lend")(r=Object(m.b)("system")(r=Object(m.c)(r=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).close=function(){e.props.system.setData({transModalInfo:{visible:!1}})},e.state={},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.system.transModalInfo,a=t.visible,r=t.step,n=t.txId,s=t.title,o=t.obj,l=t.title2,c=t.title3,m=t.title4,u=this.props.lend.theme;return i.a.createElement(p.a,{title:"",visible:a,closable:!0,icon:null,onCancel:function(){return e.props.system.hideTransModal()},footer:null,width:345,className:"trans-modal ".concat(u)},i.a.createElement("div",{className:"trans-modal-body center"},1==r?i.a.createElement(i.a.Fragment,{key:"step1"},s&&i.a.createElement("div",{className:"trans-modal-title"},b.a.get(m||s,o)),i.a.createElement("div",{className:"trans-modal-icon"},i.a.createElement("img",{src:k.a,className:"authorizeIcon"}),i.a.createElement("div",{className:"points"},i.a.createElement("span",{className:"point"}),i.a.createElement("span",{className:"point"}),i.a.createElement("span",{className:"point"}))),i.a.createElement("div",{className:"trans-modal-status trans-modal-wait-confirm"},b.a.get("deposit.signTronlink"))):null,2==r?i.a.createElement(i.a.Fragment,{key:"step2"},i.a.createElement("div",{className:"trans-modal-title"},b.a.get(l||"deposit.transactionsent",o)),i.a.createElement("div",{className:"trans-modal-icon"},i.a.createElement("img",{src:g.a,alt:"",style:{width:"50px"}})),i.a.createElement("div",{className:"trans-modal-tips trans-modal-submit-tips"},Object(d.kb)(b.a.get("deposit.explanation4"),n)),i.a.createElement("div",{className:"modal-btn border-btn",onClick:this.props.system.hideTransModal,style:{marginTop:"20px"}},b.a.get("deposit.closed"))):null,3==r?i.a.createElement(i.a.Fragment,{key:"step3"},i.a.createElement("div",{className:"trans-modal-title"},b.a.get(c||"toast.ex_failed",o)),i.a.createElement("div",{className:"trans-modal-icon"},i.a.createElement("img",{src:w.a,alt:"",style:{width:"40px"}})),i.a.createElement("div",{className:"trans-modal-status trans-modal-cancel"},b.a.get("deposit.explanation3"))):null,4==r?i.a.createElement(i.a.Fragment,{key:"step1"},s&&i.a.createElement("div",{className:"trans-modal-title"},b.a.get(m||s,o)),i.a.createElement("div",{className:"trans-modal-icon"},i.a.createElement("img",{src:j.a,className:"authorizeIcon"}),i.a.createElement("div",{className:"points"},i.a.createElement("span",{className:"point"}),i.a.createElement("span",{className:"point"}),i.a.createElement("span",{className:"point"}))),i.a.createElement("div",{className:"trans-modal-status trans-modal-wait-confirm"},b.a.get("deposit.signWalletConnect"))):null,5==r?i.a.createElement(i.a.Fragment,{key:"step1"},s&&i.a.createElement("div",{className:"trans-modal-title"},b.a.get(m||s,o)),i.a.createElement("div",{className:"trans-modal-icon"},i.a.createElement("img",{src:N.a,className:"authorizeIcon"}),i.a.createElement("div",{className:"points"},i.a.createElement("span",{className:"point"}),i.a.createElement("span",{className:"point"}),i.a.createElement("span",{className:"point"}))),i.a.createElement("div",{className:"trans-modal-status trans-modal-wait-confirm"},b.a.get("deposit.signLedger"))):null))}}]),a}(i.a.Component))||r)||r)||r)||r;t.a=O},1540:function(e,t,a){e.exports=a.p+"static/media/authorize.6f2e8e85.svg"},1546:function(e,t,a){"use strict";var r,n=a(1),s=a.n(n),o=a(4),l=a(8),c=a(13),i=a(17),m=a(18),d=a(0),p=a.n(d),u=(a(58),a(20)),b=a.n(u),f=a(24),w=a(3),v=a(63),g=a(365),E=a(366),j=a(79),h=a(243),k=a(2),x=a.n(k),N=(a(780),a(118)),O=a.n(N),y=a(786),D=a.n(y),F=a(432),A=a.n(F),I=a(9),S=g.a.TabPane,C=Object(f.b)("network")(r=Object(f.b)("lend")(r=Object(f.b)("system")(r=Object(f.c)(r=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).componentDidMount=function(){r.startInterval();var e=r.props.lend.borrowLimit;r.props.lend.DAWPop.popData;r.setState({borrowLimitAfter:e,withdrawLimitAfter:e})},r.getCash=Object(o.a)(s.a.mark((function e(){var t,a,n,o,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.props.lend.DAWPop.popData,!(a=void 0===t?{}:t)||!a.jtokenAddress){e.next=9;break}return e.next=4,Object(v.c)(a.jtokenAddress);case 4:n=e.sent,o=n.balance,l=void 0===o?0:o,n.success&&(r.state.poolCash=b()(l));case 9:case"end":return e.stop()}}),e)}))),r.startInterval=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.timerInterval){e.next=4;break}return e.next=3,r.getCash();case 3:r.timerInterval=setInterval(Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getCash();case 2:case"end":return e.stop()}}),e)}))),3e3);case 4:case"end":return e.stop()}}),e)}))),r.clickMaxWithdraw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.deposited,a=void 0===t?0:t,n=e.collateralDecimal,s=b()(a)._toFixed(n,1);try{r.setState({withdrawValue:s},(function(){r.withdrawChange(s)}))}catch(o){console.log("clickMaxWithdraw: ",o)}},r.clickSafeMax=function(e){try{var t=r.props.lend,a=t.borrowLimit,n=t.totalBorrowUsdForUSDD,s=t.trxPrice,o=t.userList,l=e.precision,c=e.collateralFactor,i=e.assetPrice,m=e.collateralDecimal,d=e.jtokenAddress,p=e.deposited_usd,u=void 0===p?0:p,f=e.deposited,v=void 0===f?0:f,g=b()(0);if(g=d===I.b.usddJtoken?b()(a).minus(b()(v).times(c).div(I.b.tokenDefaultPrecision)):b()(a).minus(b()(u).times(c).div(I.b.tokenDefaultPrecision)),!Object(w.e)(o,d)||r.checkSafe(n,g))return r.setState({isClear:!0}),r.clickMaxWithdraw(e);var E=b()(n).div(I.b.safeMaxRate),j=b()(0);j=(j=d===I.b.usddJtoken?b()(a).minus(E).div(c).times(I.b.tokenDefaultPrecision):b()(a).minus(E).times(I.b.defaultPrecision).div(s).times(I.b.tokenDefaultPrecision).div(i).times(I.b.tokenDefaultPrecision).div(c).times(I.b.tokenDefaultPrecision).div(l)).lt(0)?0:j._toFixed(m,1),r.setState({withdrawValue:j,withdrawLimitAfter:E},(function(){r.withdrawChange(j)}))}catch(h){console.log("clickSafeMax: ",h)}},r.clickMax=function(){try{var e=r.props.lend.balanceInfo,t=r.props.lend.DAWPop.popData,a=t.precision,n=t.collateralDecimal,s=t.jtokenAddress,o=t.collateralAddress,l=b()(e[s].balance).div(a);l=o===I.b.zeroAddr&&l.lt(0)?0:l._toFixed(n,1),r.setState({depositValue:l},(function(){r.depositChange(l)}))}catch(c){console.log("clickMax:",c)}},r.checkSafe=function(e,t){return b()(e).eq(0)||b()(e).div(t).gte(0)&&b()(e).div(t).lt(I.b.safeMaxRate)},r.getSafeMaxText=function(e){try{var t=r.props.lend,a=t.borrowLimit,n=t.totalBorrowUsdForUSDD,s=t.userList,o=e.jtokenAddress,l=e.deposited_usd,c=void 0===l?0:l,i=e.collateralFactor,m=e.deposited,d=b()(a).minus(b()(o===I.b.usddJtoken?m:c).times(i).div(I.b.tokenDefaultPrecision));return!Object(w.e)(s,o)||r.checkSafe(n,d)?x.a.get("deposit.max"):x.a.get("withdraw.safemax")}catch(p){return console.log("getSafeMaxText, ",p),x.a.get("withdraw.safemax")}},r.withDrawContent=function(e){var t=r.state,a=t.withdrawValue,n=t.withdrawLimitAfter,s=t.isClear,o=t.errInfo2,l=o.btnText,c=o.status,i=r.props.lend,m=i.borrowLimit,d=(i.totalBorrowUsdForUSDD,i.assetList),u=i.risk,f=i.totalBorrowValueInTrx,v=i.totalCollateralValueInTrx,g=b()(u).times(100),h=b()(f).div(b()(v).minus(b()(a).times(e.assetPrice).times(b()(10).pow(e.collateralDecimal)).div(b()(10).pow(24)).times(e.collateralFactor).div(I.b.tokenDefaultPrecision))).times(100),k=r.getSafeMaxText(e),N=""!=a&&(!b()(m).eq(0)||!b()(n).eq(0)),O=""!=a&&(b()(h).gt(0)||b()(g).gt(0)),y=b()(h).gt(100),D=Object(w.K)(e,d).totalApy;return p.a.createElement("div",{className:"deposit mt16"},p.a.createElement(E.a,{className:"common-input",prefix:s?p.a.createElement("span",null,"~"):p.a.createElement("span",null),placeholder:x.a.get("withdraw.enteramount"),size:"small",addonAfter:p.a.createElement("span",{className:"pointer",onClick:function(){r.clickSafeMax(e)}},k),value:a,onChange:function(e){return r.withdrawChange(e.target.value,!0)}}),p.a.createElement("p",{className:"flex-between mb16",style:{marginTop:16}},p.a.createElement("span",{className:"c-84869E fs12"},x.a.get("deposit.Loanlimit")),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},p.a.createElement("span",{className:"c-84869E fw700"},Object(w.j)(m,2,{miniText:.01,needDolar:!0})),N&&1==e.account_entered&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"arrow-right"}),Object(w.j)(n,2,{miniText:.01,needDolar:!0})))),p.a.createElement("p",{className:"flex-between"},p.a.createElement("span",{className:"c-84869E fs12"},x.a.get("deposit.limitused")),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},p.a.createElement("span",{className:"c-84869E fw700"},Object(w.db)(g)),O&&1==e.account_entered&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"arrow-right"}),Object(w.db)(h)))),p.a.createElement("div",{className:"modal-progress mb16"},O&&e.account_entered&&0!==e.account_entered?Object(w.eb)(h,{showInfo:!1,reverse:!0}):Object(w.eb)(g,{showInfo:!1,reverse:!0})),p.a.createElement("p",{className:"flex-between mb16"},p.a.createElement("span",{className:"c-84869E fs12"},x.a.get("market_withdraw")),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},Object(w.d)(b()(e.totalCash).div(b()(10).pow(e.collateralDecimal)),2)," ",e.collateralSymbol)),p.a.createElement("div",{className:"horizontal-line"}),p.a.createElement("p",{className:"flex-between mb16"},p.a.createElement("span",{className:"c-84869E fs12"},x.a.get("withdraw.withdrawamount")),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},Object(w.j)(b()(e.deposited),3)," ",e.collateralSymbol)),p.a.createElement("p",{className:"flex-between mb16"},p.a.createElement("span",{className:"c-84869E fs12"},x.a.get("deposit.depositapy")),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},Object(w.db)(D,{cutZero:!1,useFull:!1}))),p.a.createElement(j.a,{className:"modal-btn withdraw-btn",disabled:!c||y&&0!==e.account_entered,onClick:r.withdraw},y&&O&&0!==e.account_entered?x.a.get("withdraw.Insufficient_mortgage"):l))},r.getBorrowLimitAfter=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;try{var a=r.props.lend,n=a.DAWPop,s=a.borrowLimit,o=a.trxPrice,l=n.popData,c=l.precision,i=l.assetPrice,m=l.jtokenAddress,d=b()(l.collateralFactor).div(I.b.tokenDefaultPrecision),p=b()(0);return p=m===I.b.usddJtoken?b()(e).times(d):b()(e).times(c).times(d).times(i).times(o).div(I.b.tokenDefaultPrecision).div(I.b.tokenDefaultPrecision).div(I.b.defaultPrecision),t?s.minus(p).lt(0)?b()(0):s.minus(p):s.plus(p)}catch(u){console.log("getBorrowLimitAfter error: ".concat(u))}},r.setSafeFee=function(){var e=r.props.lend.balanceInfo,t=r.props.lend.DAWPop.popData,a=t.precision,n=t.collateralDecimal,s=t.jtokenAddress,o=b()(e[s].balance).div(a),l=b()(o).minus(r.state.trxFee)._toFixed(n,1);r.setState({depositValue:l},(function(){r.depositChange(l)}))},r.depositContent=function(e){var t=r.props.lend,a=(t.userList,t.marketList,t.balanceInfo),n=t.borrowLimit,s=(t.totalBorrowUsdForUSDD,t.assetList),o=t.risk,l=t.totalBorrowValueInTrx,c=t.totalCollateralValueInTrx,i=r.state,m=i.depositValue,d=i.borrowLimitAfter,u=i.errInfo1,f=u.btnText,v=u.status,g=i.lang,h=b()(o).times(100),k=b()(l).div(b()(c).plus(b()(m).times(e.assetPrice).times(b()(10).pow(e.collateralDecimal)).div(b()(10).pow(24)).times(e.collateralFactor).div(I.b.tokenDefaultPrecision))).times(100),N=""!=m&&(!b()(n).eq(0)||!b()(d).eq(0)),O=""!=m&&(b()(k).gt(0)||b()(h).gt(0)),y=Object(w.K)(e,s).totalApy,D=e.precision,F=(e.collateralDecimal,e.jtokenAddress),S=(e.collateralAddress,b()(a[F].balance).div(D));return p.a.createElement("div",{className:"deposit mt16"},p.a.createElement("div",{className:"safe-input"},p.a.createElement(E.a,{className:"common-input mb16",placeholder:x.a.get("deposit.enteramount"),addonAfter:p.a.createElement("span",{className:"pointer",onClick:function(){r.clickMax()}},x.a.get("deposit.max")),value:m,onChange:function(e){return r.depositChange(e.target.value)}}),v&&b()(S).lte(r.state.trxFee)?p.a.createElement("div",{className:"safe-tip"},p.a.createElement("img",{src:A.a}),p.a.createElement("div",null,x.a.getHTML("safe_tip",{value:r.state.trxFee}))):v&&b()(b()(S).minus(r.state.trxFee)).lt(m)?p.a.createElement("div",{className:"safe-tip"},p.a.createElement("img",{src:A.a}),p.a.createElement("div",null,x.a.getHTML("safe_tip",{value:r.state.trxFee})," ",p.a.createElement("span",{className:"safe-fee",onClick:function(e){return r.setSafeFee()}},x.a.get("safe_fee")))):""),p.a.createElement("p",{className:"flex-between mb16"},p.a.createElement("span",{className:"c-84869E fs12"},x.a.get("deposit.Loanlimit")),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},p.a.createElement("span",{className:"c-84869E fw700"},Object(w.j)(n,2,{miniText:.01,needDolar:!0})),N&&1==e.account_entered&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"arrow-right"}),Object(w.j)(d,2,{miniText:.01,needDolar:!0})))),p.a.createElement("div",{className:"flex-between"},p.a.createElement("span",{className:"c-84869E fs12"},x.a.get("deposit.limitused")),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},p.a.createElement("span",{className:"c-84869E fw700"},Object(w.db)(h)),O&&1==e.account_entered&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"arrow-right"}),Object(w.db)(k)))),p.a.createElement("div",{className:"modal-progress"},Object(w.eb)(O&&1==e.account_entered?k:h,{showInfo:!1,reverse:!0})),p.a.createElement("div",{className:"horizontal-line"}),p.a.createElement("p",{className:"flex-between mb16"},p.a.createElement("span",{className:"c-84869E fs12"},x.a.get("deposit.deposited")),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},Object(w.j)(b()(e.deposited),3)," ",e.collateralSymbol)),p.a.createElement("p",{className:"flex-between mb16"},p.a.createElement("span",{className:"c-84869E fs12"},x.a.get("deposit.wallet_balance")),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},Object(w.Z)(e,a,3),p.a.createElement("a",{className:"toSwap",href:"".concat(I.b.sunSwap,"?lang=").concat(g).concat("TRX"===e.collateralSymbol?"":"?tokenAddress=".concat(e.collateralAddress,"&type=swap")),target:"sunswap"},x.a.get("index.get")))),p.a.createElement("p",{className:"flex-between mb-26"},p.a.createElement("span",{className:"c-84869E fs12"},x.a.get("deposit.depositapy")),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},Object(w.db)(y,{cutZero:!1,useFull:!1}))),p.a.createElement(j.a,{className:"modal-btn deposit-btn",onClick:function(){return r.deposit()},disabled:!v},f))},r.deposit=Object(o.a)(s.a.mark((function e(){var t,a,n,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.state.depositValue,a=r.props.lend.DAWPop,n=a.popData,o={title:"toast.ex",title2:"deposit.transactionsent",title3:"toast.ex_failed",title4:"deposit.confirm_transaction",obj:{value:t,token:n.collateralSymbol||""}},r.setState({isSuccess:!1,txID:""}),e.next=7,r.props.system.justMint(n,new b.a(t).times(n.precision)._toHex(),o);case 7:e.sent&&setTimeout((function(){r.props.lend.getTokenBalanceInfo()}),5e3);case 9:case"end":return e.stop()}}),e)}))),r.getDepositFee=function(){var e=Object(o.a)(s.a.mark((function e(t){var a,n,o,l,c,i,m,d,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.props.lend,n=a.DAWPop,o=a.energyFee,l=a.getEnergyFee,c=n.popData,i={title:"toast.ex",title2:"deposit.transactionsent",title3:"toast.ex_failed",title4:"deposit.confirm_transaction",obj:{value:t,token:c.collateralSymbol||""}},e.next=5,r.props.system.justMintValue(c,new b.a(t).times(c.precision)._toHex(),i);case 5:if(m=e.sent,e.t0=o,e.t0){e.next=11;break}return e.next=10,l();case 10:e.t0=e.sent;case 11:d=e.t0,p=b()(b()(m).times(d).div(1e6)._toFixed(0,1)).plus(2).toNumber(),r.setState({trxFee:p});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.withdraw=Object(o.a)(s.a.mark((function e(){var t,a,n,o,l,c,i,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.state,a=t.withdrawValue,n=t.isClear,o=r.props.lend.DAWPop.popData,l=o.jtokenAddress,c={title:"toast.ex",title2:"deposit.transactionsent",title3:"toast.ex_failed",title4:"deposit.confirm_transaction",obj:{value:a,token:o.collateralSymbol}},!n){e.next=12;break}return e.next=7,Object(v.g)(l,window.defaultAccount);case 7:return i=e.sent,m=i.value,e.next=11,r.props.system.justRedeem(o,new b.a(m)._toHex(),c,!0);case 11:return e.abrupt("return",e.sent);case 12:return e.next=14,r.props.system.justRedeem(o,new b.a(a).times(o.precision)._toHex(),c);case 14:e.sent&&setTimeout((function(){r.props.lend.getTokenBalanceInfo(),r.props.detailInfo&&(r.props.lend.getUserData(),r.props.lend.getUserDataFromMarkets(),r.props.lend.getMarketData())}),5e3);case 16:case"end":return e.stop()}}),e)}))),r.approveContent=function(e){var t=r.props.lend,a=t.balanceInfo,n=t.assetList,l=r.state,c=l.lang,i=l.approving,m=Object(w.K)(e,n).totalApy;return p.a.createElement("div",{className:"deposit"},p.a.createElement("img",{src:D.a,alt:"Token Logo",onError:function(e){e.target.onerror=null,e.target.src=O.a}}),p.a.createElement("div",{className:"approve-tip"},x.a.getHTML("deposit.explanation1",{value:e.collateralSymbol})),p.a.createElement("div",{className:"horizontal-line"}),p.a.createElement("p",{className:"flex-between mb16"},p.a.createElement("span",{className:"c-84869E fs12"},x.a.get("deposit.wallet_balance")),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},Object(w.Z)(e,a,3),p.a.createElement("a",{className:"toSwap",href:"".concat(I.b.sunSwap,"?lang=").concat(c).concat("TRX"===e.collateralSymbol?"":"?tokenAddress=".concat(e.collateralAddress,"&type=swap")),target:"sunswap"},x.a.get("index.get")))),p.a.createElement("p",{className:"flex-between mb-26"},p.a.createElement("span",{className:"c-84869E fs12"},x.a.get("deposit.depositapy")),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},Object(w.db)(m,{cutZero:!1,useFull:!1}))),i?p.a.createElement("button",{className:"modal-btn deposit-btn",disabled:!0},p.a.createElement("div",{className:"points"},p.a.createElement("span",{className:"point"}),p.a.createElement("span",{className:"point"}),p.a.createElement("span",{className:"point"}))):p.a.createElement("button",{className:"modal-btn deposit-btn",onClick:Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.setState({approving:!0}),t.next=3,r.props.system.approveToken(e);case 3:t.sent&&(r.props.lend.getTokenBalanceInfo(),r.props.detailInfo&&(r.props.lend.getUserData(),r.props.lend.getUserDataFromMarkets(),r.props.lend.getMarketData()));case 5:case"end":return t.stop()}}),t)})))},x.a.get("deposit.approve",{value:e.collateralSymbol})))},r.distribute=function(e){var t=r.props.lend,a=t.DAWPop,n=t.balanceInfo,s=void 0===n?{}:n,o=t.userList,l=t.marketList,c=a.popData,i=c,m=i.jtokenAddress,d=i.collateralAddress;c=o[m]||l[m];var u=s[m]&&b()(s[m].allowance).gt(0)||!1;return c&&m&&s[m]?1===e?d===I.b.zeroAddr||u?r.depositContent(c):r.approveContent(c):r.withDrawContent(c):p.a.createElement(p.a.Fragment,null)},r.withdrawChange=function(){var e=Object(o.a)(s.a.mark((function e(t){var a,n,o,l,c,i,m,d,p,u,f,v,g,E,j,h,k,N,O,y,D=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=D.length>1&&void 0!==D[1]&&D[1];try{n=r.props.lend,o=n.DAWPop,n.balanceInfo,l=n.userList,c=n.marketList,i=o.popData,d=(m=void 0===i?{}:i).jtokenAddress,m=l[d]||c[d],u=(p=m).deposited,f=void 0===u?0:u,v=p.totalCash,g=p.collateralDecimal,E=Object(w.V)(t,m.collateralDecimal),j=E.valid,h=E.str,j&&(k=r.state.errInfo2.status,N=r.state.errInfo2.btnText,O=r.state.isClear,r.setState({isClear:!a&&O,withdrawValue:t}),2!==m.account_entered&&0!=t&&r.setState({withdrawLimitAfter:""!==h&&Object(w.e)(l,d)?r.getBorrowLimitAfter(h,!0):0}),y=b()(h),Object(w.S)(y,f)?(k=!1,N=x.a.get("withdraw.Insufficient_withdrawamount")):y.isNaN()||y.eq(0)?(k=!1,N=x.a.get("withdraw.enter_amount")):b()(y).gt(b()(v).div(b()(10).pow(g)))?(k=!1,N=x.a.get("withdraw_lack")):(k=!0,N=x.a.get("deposit.withdraw")),r.setState({errInfo2:{status:k,btnText:N}}))}catch(s){}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.depositChange=function(e){try{var t=r.props.lend,a=t.DAWPop,n=t.balanceInfo,s=t.userList,o=a.popData,l=void 0===o?{}:o,c=l.jtokenAddress,i=l.precision,m=l.collateralSymbol,d=(n[c]||{}).balance,p=Object(w.V)(e,l.collateralDecimal),u=p.valid,f=p.str;if(u){var v=r.state.errInfo1.status,g=r.state.errInfo1.btnText;r.setState({depositValue:f,borrowLimitAfter:""!==f&&Object(w.e)(s,c)?r.getBorrowLimitAfter(f):r.props.lend.borrowLimit});var E=b()(f);Object(w.S)(E,d,i)?(v=!1,g=x.a.get("deposit.amountout")):E.isNaN()||E.eq(0)?(v=!1,g=x.a.get("deposit.enteramount2")):(v=!0,g=x.a.get("deposit.deposit")),v&&!r.state.trxFee&&"TRX"===m&&r.getDepositFee(f),r.setState({errInfo1:{status:v,btnText:g}})}}catch(j){}},r.changeTab=function(e){1==e?r.withdrawChange("",!0):r.depositChange("",!0);var t=r.props.lend.DAWPop.popData;r.props.lend.setData({DAWPop:{show:!0,activeKey:e,popData:t}})},r.getDepositStatus=function(e){try{var t=(r.props.lend.userList[e.jtokenAddress]||{}).borrowBalanceNew,a=void 0===t?0:t;return b()(a).gt(0)}catch(n){return!1}},r.timerInterval=null,r.state={lang:window.localStorage.getItem("lang")||x.a.options.currentLocale,approved:!1,approving:!1,errInfo1:{btnText:x.a.get("deposit.enteramount2"),status:!1},errInfo2:{btnText:x.a.get("withdraw.enter_amount"),status:!1},isClear:!1,poolCash:null,depositValue:"",withdrawValue:"",borrowLimitAfter:"",withdrawLimitAfter:"",trxFee:""},r}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){clearInterval(this.timerInterval),this.timerInterval=null}},{key:"componentDidUpdate",value:function(e,t){if(!b()(e.lend.borrowLimit).eq(this.props.lend.borrowLimit)){if(1===Number(this.props.lend.DAWPop.activeKey))return this.depositChange(this.state.borrowValue);if(2===Number(this.props.lend.DAWPop.activeKey))return this.withdrawChange(this.state.withdrawValue)}}},{key:"render",value:function(){var e=this,t=this.props.lend.DAWPop,a=t.popData,r=void 0===a?{}:a,n=r.collateralSymbol,s=r.logoUrl;return p.a.createElement(h.a,{title:p.a.createElement("div",null,p.a.createElement("img",{src:s}),n||""),maskClosable:!1,visible:t.show,closable:!0,onCancel:function(){return e.props.lend.hideDAWPop()},footer:null,className:"DAWPop",getContainer:function(){return document.querySelector(".main")}},p.a.createElement(g.a,{className:"tabs-deposit",defaultActiveKey:t.activeKey,activeKey:t.activeKey,centered:!0,type:"card",onChange:this.changeTab},p.a.createElement(S,{tab:x.a.get("deposit.deposit"),key:"1"},this.distribute(1)),p.a.createElement(S,{tab:x.a.get("deposit.withdraw"),key:"2"},this.distribute(2))))}}]),a}(p.a.Component))||r)||r)||r)||r;t.a=C},1547:function(e,t,a){"use strict";var r,n=a(1),s=a.n(n),o=a(4),l=a(8),c=a(13),i=a(17),m=a(18),d=a(0),p=a.n(d),u=(a(58),a(24)),b=a(3),f=a(365),w=a(366),v=a(102),g=a(79),E=a(243),j=a(2),h=a.n(j),k=a(9),x=(a(780),a(118)),N=a.n(x),O=a(1583),y=a.n(O),D=a(432),F=a.n(D),A=a(63),I=f.a.TabPane,S=Object(u.b)("network")(r=Object(u.b)("lend")(r=Object(u.b)("system")(r=Object(u.c)(r=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.startInterval();var t=e.props.lend.totalBorrowUsdForUSDD;e.setState({totalBorrowUsdAfter:t,totalRepayUsdAfter:t})},e.getCash=Object(o.a)(s.a.mark((function t(){var a,r,n,o,l,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=e.props.lend,r=a.borrowModalInfo,a.userList,a.marketList,!(n=r.jtokenAddress)){t.next=11;break}return t.next=6,Object(A.c)(n);case 6:o=t.sent,l=o.balance,c=void 0===l?0:l,o.success&&(console.log(),e.state.poolCash=Object(b.a)(c));case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])}))),e.startInterval=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.timerInterval){t.next=4;break}return t.next=3,e.getCash();case 3:e.timerInterval=setInterval(Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCash();case 2:case"end":return t.stop()}}),t)}))),3e3);case 4:case"end":return t.stop()}}),t)}))),e.clickSafeMax=function(t){try{var a=e.props.lend,r=a.borrowLimit,n=a.totalBorrowUsdForUSDD,s=a.trxPrice,o=t.precision,l=t.collateralFactor,c=t.assetPrice,i=t.collateralDecimal,m=t.jtokenAddress,d=t.account_entered,p=t.deposited,u=t.deposited_usd,f=r;0===d&&(f=m===k.b.usddJtoken?Object(b.a)(f).plus(Object(b.a)(p).times(l).div(k.b.tokenDefaultPrecision)):Object(b.a)(f).plus(Object(b.a)(u).times(l).div(k.b.tokenDefaultPrecision)));var w=Object(b.a)(f).times(k.b.safeMaxRate),v=Object(b.a)(0);v=(v=m===k.b.usddJtoken?Object(b.a)(w).minus(n):w.minus(n).times(k.b.tokenDefaultPrecision).div(c).times(k.b.tokenDefaultPrecision).div(s).times(k.b.defaultPrecision).div(o)).lt(0)?0:v._toFixed(i,1),e.setState({borrowValue:v,totalBorrowUsdAfter:w},(function(){e.onChangeBorrow(v)}))}catch(g){console.log("clickSafeMax: ",g)}},e.onChangeBorrow=function(){var t=Object(o.a)(s.a.mark((function t(a){var r,n,o,l,c,i,m,d,p,u,f,w,v,g,E,j,x,N,O,y;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r=e.props.lend,n=r.borrowModalInfo,o=r.userList,l=r.marketList,c=r.totalBorrowUsdForUSDD,i=r.borrowLimit,m=r.totalBorrowValueInTrx,d=r.totalCollateralValueInTrx,p=n.jtokenAddress,u=o[p]||l[p],f=Object(b.V)(a,u.collateralDecimal),w=f.valid,v=f.str,u.collateralDecimal,u.borrowPaused,g=Object(b.U)(l[p]),w&&(E=""===v?c:e.getTotalBorrowUsdAfter(v),e.setState({borrowValue:v,totalBorrowUsdAfter:E}),j=e.state.errInfo1.status,x=e.state.errInfo1.btnText,N=Object(b.a)(v),O=i,0===u.account_entered&&(O=u.jtokenAddress===k.b.usddJtoken?Object(b.a)(O).plus(Object(b.a)(u.deposited).times(u.collateralFactor).div(k.b.tokenDefaultPrecision)):Object(b.a)(O).plus(Object(b.a)(u.deposited_usd).times(u.collateralFactor).div(k.b.tokenDefaultPrecision))),y=Object(b.a)(m).plus(Object(b.a)(v).times(u.assetPrice).times(Object(b.a)(10).pow(u.collateralDecimal)).div(Object(b.a)(10).pow(24))).div(d).times(100),N.isNaN()||N.eq(0)?(j=!1,x=h.a.get("borrow.enter_amount")):Object(b.a)(y).gte(100)?(j=!1,x=h.a.get("borrow.Insufficient_mortgage")):Object(b.a)(N).gt(g)?(j=!1,x=h.a.get("lend_lack")):(j=!0,x=h.a.get("borrow.borrow")),e.setState({errInfo1:{status:j,btnText:x}}))}catch(s){console.log("onChangeBorrow ",s)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getUsd=function(e,t,a,r){var n=a.precision,s=a.assetPrice;a.collateralFactor;return Object(b.a)(a.collateralFactor).div(k.b.tokenDefaultPrecision),a.jtokenAddress===k.b.usddJtoken?Object(b.a)(e):Object(b.a)(e).times(n).times(s).times(t).div(k.b.tokenDefaultPrecision).div(k.b.tokenDefaultPrecision).div(k.b.defaultPrecision)},e.getTotalBorrowUsdAfter=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1?arguments[1]:void 0;try{var r=e.props.lend,n=r.borrowModalInfo,s=r.userList,o=r.marketList,l=r.totalBorrowUsdForUSDD,c=r.trxPrice,i=n.jtokenAddress,m=s[i]||o[i],d=e.getUsd(t,c,m,a);return a?Object(b.a)(l).minus(d):Object(b.a)(l).plus(d)}catch(p){console.log("getTotalBorrowUsdAfter ",p)}},e.onChangeRepay=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var r=e.props.lend,n=r.borrowModalInfo,s=r.userList,o=r.marketList,l=r.totalBorrowUsdForUSDD,c=r.balanceInfo,i=n.jtokenAddress,m=s[i]||o[i],d=m.precision,p=m.collateralSymbol,u=void 0===p?"":p,f=m.borrowBalanceNew,w=void 0===f?0:f,v=(m.collateralDecimal,Object(b.V)(t,m.collateralDecimal)),g=v.valid,E=v.str;if(g){var j=e.state.isClear,k=""===E?l:e.getTotalBorrowUsdAfter(E,!0);e.setState({isClear:!a&&j,repayValue:E}),0!=t&&e.setState({totalRepayUsdAfter:k});var x=Object(b.a)(w).div(d),N=c[i]||{},O=N.balance,y=Object(b.a)(E),D=e.state.errInfo2.status,F=e.state.errInfo2.btnText;Object(b.a)(x).lte(0)?(D=!1,F=h.a.get("repay.no_debt")):y.isNaN()||y.eq(0)?(D=!1,F=h.a.get("repay.enter_amount")):y.gt(x)?(D=!1,F=h.a.get("repay.exceeded_amount_borrowed")):Object(b.S)(y,O,d)?(D=!1,F=h.a.get("repay.Insufficient_wallet_balance")):(D=!0,F=h.a.get("repay.repay")),D&&!e.state.trxFee&&"TRX"===u&&e.getRepayBorrowFee(E),e.setState({errInfo2:{status:D,btnText:F}})}}catch(A){console.log("onChangeRepay ",A)}},e.toBorrow=Object(o.a)(s.a.mark((function t(){var a,r,n,o,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state.borrowValue,r=e.props.lend.borrowModalInfo.jtokenAddress,n=e.props.lend.marketList,o=n[r],e.props.lend.collateralValid(o.collateralSymbol)){t.next=6;break}return t.abrupt("return");case 6:return l={title:"toast.ex",title2:"deposit.transactionsent",title3:"toast.ex_failed",title4:"deposit.confirm_transaction",obj:{value:a,token:o.collateralSymbol}},t.next=9,e.props.system.borrow(o,new b.a(a).times(o.precision)._toHex(),l);case 9:t.sent&&setTimeout((function(){e.props.lend.getTokenBalanceInfo()}),5e3);case 11:case"end":return t.stop()}}),t)}))),e.renderBorrow=function(){var t=e.props.lend,a=(t.totalBorrowUsd,t.borrowLimit),r=t.borrowModalInfo,n=t.userList,s=t.marketList,o=t.totalBorrowUsdForUSDD,l=t.risk,c=t.totalBorrowValueInTrx,i=t.totalCollateralValueInTrx,m=e.state,d=m.totalBorrowUsdAfter,u=m.borrowValue,f=m.errInfo1,E=f.status,j=f.btnText,x=r.jtokenAddress,N=n[x]||s[x],O=Object(b.U)(s[x]),y=N.precision,D=N.collateralSymbol,F=void 0===D?"":D,A=N.borrowBalanceNew,I=A?A.div(y):Object(b.a)(0),S=a;0===N.account_entered&&(S=N.jtokenAddress===k.b.usddJtoken?Object(b.a)(S).plus(Object(b.a)(N.deposited).times(N.collateralFactor).div(k.b.tokenDefaultPrecision)):Object(b.a)(S).plus(Object(b.a)(N.deposited_usd).times(N.collateralFactor).div(k.b.tokenDefaultPrecision)));var C=Object(b.a)(l).times(100),_=Object(b.a)(c).plus(Object(b.a)(u).times(N.assetPrice).times(Object(b.a)(10).pow(N.collateralDecimal)).div(Object(b.a)(10).pow(24))).div(i).times(100),T=""!=u&&(!Object(b.a)(o).eq(0)||!Object(b.a)(d).eq(0)),L=""!=u&&(!Object(b.a)(C).eq(0)||!Object(b.a)(_).eq(0));return p.a.createElement("div",{className:"mt16"},p.a.createElement("div",{style:{marginBottom:16}},p.a.createElement(w.a,{className:"common-input",onChange:function(t){return e.onChangeBorrow(t.target.value)},addonAfter:p.a.createElement("span",{className:"pointer",onClick:function(){e.clickSafeMax(N)}},h.a.get("limit_amount")),value:u,placeholder:h.a.get("borrow.enter_amount")})),p.a.createElement("div",null,p.a.createElement("div",{className:"flex-between mb10"},p.a.createElement("span",{className:"c-545669 fs12 mr-20"},h.a.get("borrow.total_borrowing")),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},p.a.createElement("span",{className:"c-545669 fw400"},Object(b.j)(o,2,{miniText:.01,needDolar:!0})),T&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"arrow-right"}),Object(b.j)(d,2,{miniText:.01,needDolar:!0})))),p.a.createElement("div",{className:"flex-between"},p.a.createElement("span",{className:"c-545669 fs12 mr-20"},h.a.get("borrow.limitused")),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},p.a.createElement("span",{className:"c-545669 fw400"},Object(b.db)(C,{keep0:!0})),L&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"arrow-right"}),Object(b.db)(_,{keep0:!0})))),p.a.createElement("div",{className:"modal-progress mb10"},Object(b.eb)(_,{showInfo:!1,reverse:!0})),p.a.createElement("p",{className:"flex-between mb10"},p.a.createElement("span",{className:"c-84869E flex aic"},p.a.createElement("span",{className:"mr-4 fs12 c-545669"},h.a.get("market_lend")),p.a.createElement(v.a,{overlayClassName:"mltr",title:h.a.getHTML("market_lend_tip"),placement:"top"},p.a.createElement("span",{className:"tooltip-icon"}))),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},Object(b.d)(Object(b.a)(O),2,{miniText:.01})," ",p.a.createElement("span",{className:"fw400"},N.collateralSymbol))),p.a.createElement("div",{className:"horizontal-line"})),p.a.createElement("div",null,p.a.createElement("div",{className:"flex-between mb10"},p.a.createElement("span",{className:"fs12 c-545669"},h.a.get("index.markets_borrowapy")),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},Object(b.db)(N.lendApy,{cutZero:!1,useFull:!1}))),p.a.createElement("div",{className:"flex-between mb16"},p.a.createElement("span",{className:"fs12 c-545669"},h.a.get("borrow.borrowed",{value:F})),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},Object(b.j)(I,3,{miniText:"0.001",round:!1})," ",F))),p.a.createElement("div",null,p.a.createElement("div",{className:"borrow-tip"},p.a.createElement("span",null),h.a.get("borrow_tip")),p.a.createElement(g.a,{className:"modal-btn lend-btn",type:"primary",disabled:!E,onClick:function(){return e.toBorrow()}},j)))},e.clickMax=function(t,a){var r=t._toFixed(a,1);e.setState({isClear:!0,repayValue:r},(function(){e.onChangeRepay(r)}))},e.approveContent=function(t){var a=e.props.lend,r=a.balanceInfo,n=a.assetList,l=e.state.lang,c=(Object(b.K)(t,n).totalApy,t.precision),i=t.borrowBalanceNew,m=i?i.div(c):Object(b.a)(0);return p.a.createElement("div",{className:"deposit"},p.a.createElement("img",{src:y.a,alt:"Token Logo",onError:function(e){e.target.onerror=null,e.target.src=N.a}}),p.a.createElement("div",{className:"approve-tip"},h.a.getHTML("deposit.explanation1",{value:t.collateralSymbol})),p.a.createElement("div",{className:"horizontal-line mt-40"}),p.a.createElement("p",{className:"flex-between mb16"},p.a.createElement("span",{className:"c-84869E fs12"},h.a.get("deposit.wallet_balance")),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},Object(b.Z)(t,r,3),p.a.createElement("a",{className:"toSwap",href:"".concat(k.b.sunSwap,"?lang=").concat(l).concat("TRX"===t.collateralSymbol?"":"?tokenAddress=".concat(t.collateralAddress,"&type=swap")),target:"sunswap"},h.a.get("index.get")))),p.a.createElement("div",{className:"flex-between mb-26"},p.a.createElement("span",{className:"c-84869E fs12"},h.a.get("borrow.borrowed",{value:t.collateralSymbol})),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},Object(b.j)(m,3,{miniText:"0.001",round:!1})," ",t.collateralSymbol)),p.a.createElement(g.a,{className:"modal-btn deposit-btn",onClick:Object(o.a)(s.a.mark((function a(){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.props.system.approveToken(t);case 2:a.sent&&(e.props.lend.getTokenBalanceInfo(),e.props.detailInfo&&(e.props.lend.getUserData(),e.props.lend.getUserDataFromMarkets(),e.props.lend.getMarketData()));case 4:case"end":return a.stop()}}),a)})))},h.a.get("deposit.approve",{value:t.collateralSymbol})))},e.setSafeFee=function(){var t=e.props.lend.balanceInfo,a=e.props.lend,r=a.userList,n=a.marketList,s=e.props.lend.borrowModalInfo.jtokenAddress,o=r[s]||n[s],l=o.precision,c=o.collateralDecimal,i=Object(b.a)(t[s].balance).div(l),m=Object(b.a)(i).minus(e.state.trxFee)._toFixed(c,1);e.setState({repayValue:m},(function(){e.onChangeRepay(m,!0)}))},e.renderRepay=function(){var t=e.state,a=(t.totalBorrowUsdAfter,t.repayValue),r=t.totalRepayUsdAfter,n=t.errInfo2,s=n.status,o=n.btnText,l=t.isClear,c=t.lang,i=e.props.lend,m=(i.borrowLimit,i.totalBorrowUsd,i.balanceInfo),d=i.userLendDataSource,u=i.totalBorrowUsdForUSDD,f=i.risk,v=i.totalBorrowValueInTrx,E=i.totalCollateralValueInTrx,j=e.props.lend,x=j.userList,N=j.marketList,O=e.props.lend.borrowModalInfo.jtokenAddress,y=x[O]||N[O],D=y.precision,A=y.collateralSymbol,I=void 0===A?"":A,S=y.borrowBalanceNew,C=y.collateralDecimal,_=S?S.div(D):Object(b.a)(0),T=m[O]&&m[O].balance&&m[O].balance.div(D),L=_;Object(b.a)(T).lt(0)&&(T=Object(b.a)(0)),Object(b.a)(T).lte(_)&&(L=T);var P=Object(b.a)(f).times(100),B=d&&1===d.length&&l,M=B&&0!=a?0:Object(b.a)(v).minus(Object(b.a)(a).times(y.assetPrice).times(Object(b.a)(10).pow(y.collateralDecimal)).div(Object(b.a)(10).pow(24))).div(E).times(100),U=""!=a&&0!=a&&(!Object(b.a)(u).eq(0)||!Object(b.a)(L).eq(0)),V=""!=a&&0!=a&&(!Object(b.a)(P).eq(0)||!Object(b.a)(M).eq(0)),R=Object(b.a)(m[O].balance).div(D);return p.a.createElement("div",null,p.a.createElement("div",{className:"mt16"},p.a.createElement("div",{className:"safe-input"},p.a.createElement(w.a,{className:"common-input mb16",prefix:l&&Object(b.a)(T).gt(_)?p.a.createElement("span",null,"~"):p.a.createElement("span",null),size:"small",onChange:function(t){return e.onChangeRepay(t.target.value,!0)},addonAfter:p.a.createElement("span",{className:"pointer",onClick:function(){e.clickMax(L,C)}},h.a.get("deposit.max")),value:a,placeholder:h.a.get("repay.enter_amount")}),s&&Object(b.a)(R).lte(e.state.trxFee)?p.a.createElement("div",{className:"safe-tip"},p.a.createElement("img",{src:F.a}),p.a.createElement("div",null,h.a.getHTML("safe_tip",{value:e.state.trxFee}))):s&&Object(b.a)(Object(b.a)(R).minus(e.state.trxFee)).lt(a)?p.a.createElement("div",{className:"safe-tip"},p.a.createElement("img",{src:F.a}),p.a.createElement("div",null,h.a.getHTML("safe_tip",{value:e.state.trxFee})," ",p.a.createElement("span",{className:"safe-fee",onClick:function(t){return e.setSafeFee()}},h.a.get("safe_fee")))):"")),p.a.createElement("div",null,p.a.createElement("div",{className:"flex-between mb16"},p.a.createElement("span",{className:"c-545669 fs12 mr-20"},h.a.get("borrow.borrowed",{value:I})),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},Object(b.j)(_,3,{miniText:"0.001",round:!1})," ",I)),p.a.createElement("div",{className:"flex-between mb16"},p.a.createElement("span",{className:"c-545669 fs12 mr-20"},h.a.get("repay.borrowed_amount")),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},p.a.createElement("span",{className:"c-545669 fw700"},Object(b.j)(u,2,{miniText:.01,needDolar:!0})),U&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"arrow-right"}),Object(b.j)(B?0:r,2,{miniText:.01,needDolar:!0})))),p.a.createElement("div",null,p.a.createElement("div",{className:"flex-between"},p.a.createElement("span",{className:"c-545669 fs12 mr-20"},h.a.get("borrow.limitused")),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},p.a.createElement("span",{className:"c-84869E fw700"},Object(b.db)(P,{keep0:!0})),V&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"arrow-right"}),Object(b.db)(M,{keep0:!0})))),p.a.createElement("div",{className:"modal-progress"},Object(b.eb)(M,{showInfo:!1,reverse:!0})),p.a.createElement("div",{className:"horizontal-line"}),p.a.createElement("div",{className:"flex-between mb16"},p.a.createElement("span",{className:"c-84869E fs12"},h.a.get("deposit.wallet_balance")),p.a.createElement("span",{className:"c-0F134F fs14 fw700"},Object(b.Z)(y,m,3),p.a.createElement("a",{className:"toSwap",href:"".concat(k.b.sunSwap,"?lang=").concat(c).concat("TRX"===y.collateralSymbol?"":"?tokenAddress=".concat(y.collateralAddress,"&type=swap")),target:"sunswap"},h.a.get("index.get"))))),p.a.createElement("div",null,p.a.createElement(g.a,{className:"modal-btn repay-btn",type:"primary",disabled:!s,onClick:function(){return e.repayBorrow()}},o))))},e.repayBorrow=Object(o.a)(s.a.mark((function t(){var a,r,n,o,l,c,i,m,d,p,u,f,w,v,g,E,j,h,x;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.lend,r=a.marketList,n=a.userList,o=a.balanceInfo,l=e.props.lend.borrowModalInfo.jtokenAddress,c=e.state,i=c.repayValue,m=c.isClear,d=n[l]||r[l],p=d.borrowratePerblock,u=d.precision,f=d.collateralDecimal,w=d.collateralSymbol,v=d.borrowBalanceNew,g=v?v.div(u):Object(b.a)(0),E=o[l]&&o[l].balance.div(u),"TRX"===w&&(E=Object(b.a)(E).minus(50),Object(b.a)(E).lt(0)&&(E=Object(b.a)(0))),j={title:"toast.ex",title2:"deposit.transactionsent",title3:"toast.ex_failed",title4:"deposit.confirm_transaction",obj:{value:i,token:d.collateralSymbol}},h=0,x=0,m&&Object(b.a)(E).gt(g)?(h=A.a,d.collateralAddress===k.b.zeroAddr&&(x=Object(b.a)(Object(b.a)(k.b.tokenDefaultPrecision).plus(Object(b.a)(p).times(20)).times(i).div(k.b.tokenDefaultPrecision)._toFixed(f,1)).times(u)._toHex())):h=Object(b.a)(i).times(u)._toHex(),t.next=14,e.props.system.repayBorrow(d,h,j,x,m&&Object(b.a)(E).gt(g));case 14:t.sent&&setTimeout((function(){e.props.lend.getTokenBalanceInfo(),e.props.detailInfo&&(e.props.lend.getUserData(),e.props.lend.getUserDataFromMarkets(),e.props.lend.getMarketData())}),5e3);case 16:case"end":return t.stop()}}),t)}))),e.getRepayBorrowFee=function(){var t=Object(o.a)(s.a.mark((function t(a){var r,n,o,l,c,i,m,d,p,u,f,w,v,g,E,j,h,x,N,O,y;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.lend,n=r.marketList,o=r.userList,l=r.balanceInfo,c=r.energyFee,i=r.getEnergyFee,m=e.props.lend.borrowModalInfo.jtokenAddress,d=e.state.isClear,p=o[m]||n[m],u=p.borrowratePerblock,f=p.precision,w=p.collateralDecimal,v=p.collateralSymbol,g=p.borrowBalanceNew,E=g?g.div(f):Object(b.a)(0),j=l[m]&&l[m].balance.div(f),"TRX"===v&&(j=Object(b.a)(j).minus(50),Object(b.a)(j).lt(0)&&(j=Object(b.a)(0))),h={title:"toast.ex",title2:"deposit.transactionsent",title3:"toast.ex_failed",title4:"deposit.confirm_transaction",obj:{value:a,token:p.collateralSymbol}},0,x=0,d&&Object(b.a)(j).gt(E)?(A.a,p.collateralAddress===k.b.zeroAddr&&(x=Object(b.a)(Object(b.a)(k.b.tokenDefaultPrecision).plus(Object(b.a)(u).times(20)).times(a).div(k.b.tokenDefaultPrecision)._toFixed(w,1)).times(f)._toHex())):Object(b.a)(a).times(f)._toHex(),t.next=14,e.props.system.repayBorrowValue(p,h,x);case 14:if(N=t.sent,t.t0=c,t.t0){t.next=20;break}return t.next=19,i();case 19:t.t0=t.sent;case 20:O=t.t0,y=Object(b.a)(Object(b.a)(N).times(O).div(1e6)._toFixed(0,1)).plus(2).toNumber(),e.setState({trxFee:y});case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.changeTab=function(t){var a=e.props.lend.borrowModalInfo.jtokenAddress;e.props.lend.setData({borrowModalInfo:{type:t,visible:!0,jtokenAddress:a}}),1!==Number(t)?e.onChangeBorrow("",!0):e.onChangeRepay("",!0)},e.renderContent=function(t){var a=e.props.lend,r=a.borrowModalInfo,n=a.balanceInfo,s=void 0===n?{}:n,o=a.marketList,l=a.userList,c=r.jtokenAddress,i=l[c]||o[c],m=i.collateralAddress,d=s[c]&&Object(b.a)(s[c].allowance).gt(0)||!1;return 1===t?e.renderBorrow():i&&c&&s[c]?m===k.b.zeroAddr||d?1===t?e.renderBorrow():e.renderRepay():e.approveContent(i):p.a.createElement(p.a.Fragment,null)},e.timerInterval=null,e.state={lang:window.localStorage.getItem("lang")||h.a.options.currentLocale,borrowValue:"",repayValue:"",errInfo1:{btnText:h.a.get("borrow.enter_amount"),status:!1},errInfo2:{btnText:h.a.get("repay.enter_amount"),status:!1},isClear:!1,poolCash:null,totalBorrowUsdAfter:"",totalRepayUsdAfter:"",totalRepayAfter:"",trxFee:""},e}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){clearInterval(this.timerInterval),this.timerInterval=null}},{key:"componentDidUpdate",value:function(e,t){if(!Object(b.a)(e.lend.borrowLimit).eq(this.props.lend.borrowLimit)){if(1===Number(this.props.lend.borrowModalInfo.type))return this.onChangeBorrow(this.state.borrowValue);if(2===Number(this.props.lend.borrowModalInfo.type))return this.onChangeRepay(this.state.repayValue)}}},{key:"render",value:function(){var e=this,t=this.props.lend,a=t.borrowModalInfo,r=t.marketList,n=t.userList,s=a.jtokenAddress,o=a.type,l=a.visible,c=n[s]||r[s],i=c||{},m=i.collateralSymbol,d=i.logoUrl;return p.a.createElement(E.a,{title:p.a.createElement("div",null,p.a.createElement("img",{src:d}),m||""),maskClosable:!1,visible:l,closable:!0,onCancel:function(){return e.props.lend.hideBorrowModal()},footer:null,className:"borrow-modal",getContainer:function(){return document.querySelector(".main")}},!!c&&p.a.createElement(f.a,{className:"tabs-lend",defaultActiveKey:o,activeKey:o,centered:!0,type:"card",onChange:this.changeTab},p.a.createElement(I,{className:"tab-lend",tab:h.a.get("borrow.borrow"),key:"1"},this.renderContent(1)),p.a.createElement(I,{className:"tab-repay",tab:h.a.get("repay.repay"),key:"2"},this.renderContent(2))))}}]),a}(p.a.Component))||r)||r)||r)||r;t.a=S},1583:function(e,t,a){e.exports=a.p+"static/media/homeAuthodizeLogo.773838eb.svg"}}]);