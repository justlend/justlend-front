(this["webpackJsonpjustlend-front"]=this["webpackJsonpjustlend-front"]||[]).push([[15],{1182:function(e,t,a){"use strict";a.r(t);var n,l,r=a(5),s=a(6),i=a(13),c=a(12),o=a(0),m=a.n(o),p=a(1),u=a.n(p),d=a(9),b=a(149),E=a(24),j=a.n(E),g=a(129),x=a(610),v=a(8),h=a(571),O=a(859),k=a.n(O),y=a(11),f=a(35),w=(a(693),Object(g.b)("network")(n=Object(g.b)("lend")(n=Object(g.c)(n=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.title="Market - JustLend DAO",e.next=3,n.props.lend.getMintInfo();case 3:return(t=window.location.hash.split("?")).length>1&&t[1].split("&").map((function(e){var t=e.split("=");t.length>1&&"jtokenAddress"===t[0]&&n.setState({jtokenAddress:t[1]},(function(){n.getJTokenData()}))})),e.next=7,n.props.network.getNowTime();case 7:n.props.network.getCountTime();case 8:case"end":return e.stop()}}),e)}))),n.getJTokenData=Object(d.a)(u.a.mark((function e(){var t,a,l,r,s,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.state.jtokenAddress,e.next=4,Object(f.d)(t);case 4:if(a=e.sent,l=n.props.lend.assetList,r=0,s=Object(y.E)(a.data,l),i=s.mintApy,c=s.mintApyWithUSDD,Object(y.a)(i).gte(0)&&(r=i),v.a.usddMint.includes(t)&&(r=c),a.success){e.next=12;break}return e.abrupt("return");case 12:n.setState({jTokenData:a.data},(function(){var e=a.data.model,t=[],l=[],s=[],i=[];e.map((function(e){e.current?n.setState({current:{base:Object(y.a)(e.base).times(100),borrow:Object(y.a)(e.borrow).times(100),supply:Object(y.a)(e.supply).times(100)}}):(t.push(Object(y.i)(Object(y.a)(e.borrow).times(100),2,{miniText:.01,per:!0})),l.push(Object(y.i)(Object(y.a)(e.supply).times(100).plus(r),2,{miniText:.01,per:!0})),s.push(Object(y.i)(r,2,{miniText:.01,per:!0})),i.push(Object(y.i)(Object(y.a)(e.base).times(100),2,{miniText:.01,per:!0})))})),n.setState({borrowList:t,supplyList:l,baseList:i,mintList:s})})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("getMarketData",e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])}))),n.judgeBox=function(){n.state.mobile&&n.hideDBox()},n.hideDBox=function(){n.setState({curStatus:!1})},n.showDBox=function(){n.setState({curStatus:!0})},n.canvasHover=function(){n.setState({labelStatus:!1})},n.canvasBlur=function(){n.setState({labelStatus:!0})},n.state={mobile:Object(b.a)(window.navigator).any,lang:window.localStorage.getItem("lang")||j.a.options.currentLocale,jTokenData:{priceUSD:"--",depositHeadcount:"--",borrowHeadcount:"--",borrowLimit:"--",earnUSDPerDay:"--",totalReserves:"--",reserveFactor:"--",collateralFactor:"--",collateralSymbol:"--",totalSupply:"--",oneToExchangeRate:"--"},jtokenAddress:"",borrowList:[],supplyList:[],baseList:[],mintList:[],current:{base:"--",borrow:"--",supply:"--"},curStatus:!0,labelStatus:!0},n}return Object(s.a)(a,[{key:"renderHeader",value:function(){var e=this.state,t=e.jTokenData,a=e.current,n=this.props.lend.assetList,l=Object(y.E)(t,n),r=l.totalApy,s=(l.depositApy,l.mintApy),i=l.mintApyWithUSDD;return t&&t.logoUrl?m.a.createElement("div",{className:"market-detail-header flex-between"},m.a.createElement("div",{className:"common-title header-title"},m.a.createElement("img",{src:t.logoUrl,alt:"logo"}),m.a.createElement("span",null,"".concat(t.collateralName,"(").concat(t.collateralSymbol,")"))),m.a.createElement("div",{className:"header-info flex-between"},m.a.createElement("div",{className:""},m.a.createElement("p",null,j.a.getHTML("market.deposit_size")),m.a.createElement("p",null,Object(y.c)(t.depositedUSD,2,{miniText:.01,needDolar:!0}))),m.a.createElement("div",{className:""},m.a.createElement("p",null,j.a.getHTML("market.deposit_apy")),m.a.createElement(h.a,{title:m.a.createElement("div",{className:"info-tooltip"},m.a.createElement("div",null,j.a.get("market.deposit_base_nex")," :"," ",Object(y.i)(a.supply,2,{per:!0,miniText:"0.01"}),"%"),m.a.createElement("div",null,v.a.usddMint.includes(t.jtokenAddress)?j.a.get("market.sun_mining_nex1"):j.a.get("market.sun_mining_nex")," ",":"," ",v.a.usddMint.includes(t.jtokenAddress)?"".concat(Object(y.i)(i,2,{per:!0,miniText:"0.01"})):Object(y.i)(s,2,{per:!0,miniText:"0.01"}),"%"),v.a.usddMint.includes(t.jtokenAddress)&&m.a.createElement("div",null,j.a.get("usddapy.hover2"))),placement:"bottomRight"},m.a.createElement("p",null,"--"===Object(y.i)(Object(y.a)(Object(y.i)(a.supply,2,{miniText:.01,per:!0})).plus(Object(y.i)(s,2,{miniText:.01,per:!0})),2,{miniText:.01,per:!0})?Object(y.i)(r,2,{cutZero:!1,miniText:.01,needDolar:!1,per:!0}):Object(y.i)(Object(y.a)(Object(y.i)(a.supply,2,{miniText:.01,per:!0})).plus(Object(y.i)(s,2,{miniText:.01,per:!0})),2,{miniText:.01,per:!0}),"%"))),m.a.createElement("div",{className:""},m.a.createElement("p",null,j.a.getHTML("market.borrow_size")),m.a.createElement("p",null,Object(y.c)(t.borrowedUSD,2,{miniText:.01,needDolar:!0}))),m.a.createElement("div",{className:""},m.a.createElement("p",null,j.a.getHTML("market.borrow_apy")),m.a.createElement("p",null,Object(y.i)(Object(y.a)(t.borrowedAPY).times(100),2,{miniText:.01,per:!0}),"%")))):m.a.createElement("div",{className:"market-detail-header flex-between"},m.a.createElement("div",{className:"common-title header-title"},m.a.createElement("span",null,"--")),m.a.createElement("div",{className:"header-info flex-between"},m.a.createElement("div",{className:""},m.a.createElement("p",null,j.a.getHTML("market.deposit_size")),m.a.createElement("p",null,"--")),m.a.createElement("div",{className:""},m.a.createElement("p",null,j.a.getHTML("market.deposit_apy")),m.a.createElement("p",null,"--","%")),m.a.createElement("div",{className:""},m.a.createElement("p",null,j.a.getHTML("market.borrow_size")),m.a.createElement("p",null,"--")),m.a.createElement("div",{className:""},m.a.createElement("p",null,j.a.getHTML("market.borrow_apy")),m.a.createElement("p",null,"--","%"))))}},{key:"renderInfo",value:function(){var e=this.state,t=e.jTokenData,a=e.jtokenAddress;return m.a.createElement("div",{className:"market-detail-info"},m.a.createElement("div",{className:"detail-title"},j.a.getHTML("market.detail_data")," ",Object(y.U)(j.a.get("to_tronscan")+" >",a)),m.a.createElement("div",{className:"detail-info"},m.a.createElement("div",{className:"flex-between"},m.a.createElement("span",null,j.a.get("market.detail_price")),m.a.createElement("span",null,"--"==t.priceUSD?"--":Object(y.c)(t.priceUSD,2,{miniText:.01,needDolar:!0}))),m.a.createElement("div",{className:"flex-between"},m.a.createElement("span",null,j.a.get("market.detail_number_of_deposit_accounts")),m.a.createElement("span",null,t.depositHeadcount)),m.a.createElement("div",{className:"flex-between"},m.a.createElement("span",null,j.a.get("market.detail_number_of_borrow_accounts")),m.a.createElement("span",null,t.borrowHeadcount)),m.a.createElement("div",{className:"flex-between"},m.a.createElement("span",null,j.a.get("market.detail_limitmax")),m.a.createElement("span",null,Object(y.a)(t.borrowLimit).gt(0)?Object(y.i)(t.borrowLimit,0)+" "+t.collateralSymbol:j.a.get("market.detail_none"))),m.a.createElement("div",{className:"flex-between"},m.a.createElement("span",{className:"flex-between"},j.a.getHTML("market.borrow_market"),m.a.createElement(h.a,{overlayClassName:"mltr",title:j.a.getHTML("market_lend_tip"),placement:"bottom"},m.a.createElement("span",{className:"tooltip-icon"}))),m.a.createElement("span",null,Object(y.i)(Object(y.J)(t),0,{miniText:.01})," ",t.collateralSymbol)),m.a.createElement("div",{className:"flex-between"},m.a.createElement("span",null,j.a.get("market.detail_dailyinterest")),m.a.createElement("span",null,Object(y.i)(t.earnUSDPerDay,2,{miniText:.01,needDolar:!0}))),m.a.createElement("div",{className:"flex-between"},m.a.createElement("span",null,j.a.get("market.detail_reserves")),m.a.createElement("span",null,Object(y.i)(t.totalReserves,6,{miniText:1e-6}))),m.a.createElement("div",{className:"flex-between"},m.a.createElement("span",null,j.a.get("market.detail_factor")),m.a.createElement("span",null,Object(y.R)(t.reserveFactor,{decimal:16,miniText:"0.0000000000000001",multi100:!0}))),m.a.createElement("div",{className:"flex-between"},m.a.createElement("span",null,j.a.get("market.detail_collateral")),m.a.createElement("span",null,Object(y.R)(t.collateralFactor,{decimal:16,miniText:"0.0000000000000001",multi100:!0}))),m.a.createElement("div",{className:"flex-between"},m.a.createElement("span",null,j.a.getHTML("market.detail_jminted",{value:"j"+t.collateralSymbol})),m.a.createElement("span",null,Object(y.i)(t.totalSupply,0,{miniText:1}))),m.a.createElement("div",{className:"flex-between"},m.a.createElement("span",null,j.a.getHTML("market.detail_jexchangerate",{value:"j"+t.collateralSymbol})),m.a.createElement("span",null,Object(y.a)(t.oneToExchangeRate).lt(Object(y.a)(1).div(v.a.tokenDefaultPrecision))?"--":"1 "+t.collateralSymbol+" : "+Object(y.i)(t.oneToExchangeRate,18)+" j"+t.collateralSymbol))))}},{key:"getEchartsOption",value:function(){var e=this.state,t=e.borrowList,a=e.supplyList,n=e.baseList,l=e.labelStatus,r=this.state,s=r.current,i=r.jTokenData,c=this.props.lend.assetList,o=Object(y.E)(i,c),m=o.mintApy,p=o.mintApyWithUSDD;return{tooltip:{trigger:"axis",axisPointer:{type:"cross",animation:!1,lineStyle:{color:"rgba(69, 77, 226, 0.2)",type:"dashed"},label:{precision:2}},backgroundColor:"rgba(255,255,255,0.5)",borderWidth:"0",textStyle:{color:"#333",fontFamily:"AvenirNext-Medium",fontSize:"14px"},formatter:function(e){var t="--",a=v.a.usddMint.includes(i.jtokenAddress)?p:m;"--"!==m&&(t=Object(y.i)(Object(y.a)(e[1].value).minus(Object(y.a)(a)._toFixed(2,1)),2));var n=Object(y.a)(i.model[e[0].dataIndex+1].base).times(100);return'<div class="default-text-clone"><p class="use-rate">'+j.a.get("use_rate")+"<span>"+Number(Object(y.i)(Object(y.a)(n).gt(100)?100:n,2))+"%</span></p><p>"+j.a.get("lend.depositapy")+'<span class="blue">'+Object(y.i)(e[1].value,2)+"%</span></p><p>-"+j.a.get("market.baseAPY")+'<span class="sub-span">'+t+"%</span></p><p>-"+j.a.get("lend.miningapy")+'<span class="sub-span">'+Object(y.i)(a,2)+"%</span></p><p>"+e[0].seriesName+'<span class="green">'+Object(y.i)(e[0].value,2)+"%</span></p></div>"}},grid:{left:"0%",right:"3%",bottom:"5%",containLabel:!0},yAxis:{name:"APY(%)",nameTextStyle:{color:"#84869E",align:"left"},type:"value",axisLine:{show:!1},splitLine:{show:!0,lineStyle:{type:"dotted",color:["#ccc"]}},splitNumber:3,axisTick:{show:!1},axisLabel:{textStyle:{color:"#84869E"}}},xAxis:{type:"category",axisPointer:{value:Number(Object(y.i)(s.base,2)),lineStyle:{color:"#e9e9e9",width:2},label:{show:l,formatter:function(e,t){return j.a.get("market.current")},backgroundColor:"rgba(0,0,0,0.5)"},handle:{show:!0,color:"transparent"}},name:"",nameTextStyle:{color:"#84869E"},data:n,axisLine:{lineStyle:{color:["#E9E9E9"]}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{interval:0,formatter:function(e,t){return t%10==0&&0!=t?t:null},textStyle:{color:"#84869E"}}},series:[{name:j.a.get("market.borrow_apy"),type:"line",hoverAnimation:!1,itemStyle:{normal:{color:"#1ED0AC",lineStyle:{width:4}},emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(255, 255, 255, 0.5)",color:"#9EF9E6",borderColor:"#1ED0AC",borderWidth:3}},data:t,showSymbol:!1,symbolSize:11},{name:j.a.get("market.deposit_apy"),type:"line",itemStyle:{normal:{color:"#3D56D6",lineStyle:{width:4}},emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(255, 255, 255, 0.5)",color:"#BBBAFF",borderColor:"#3D56D6",borderWidth:3}},hoverAnimation:!1,data:a,showSymbol:!1,symbolSize:11}]}}},{key:"render",value:function(){var e=this,t=this.state,a=t.mobile,n=(t.jtokenAddress,t.current),l=t.curStatus,r=t.jTokenData,s=(t.lang,this.props.network.menuFlag),i=this.props.lend.assetList,c=Object(y.E)(r,i),o=c.mintApy,p=c.mintApyWithUSDD,u=(c.totalApy,Object(y.i)(Object(y.a)(n.supply).plus(o),2,{cutZero:!1,miniText:.01,needDolar:!1,per:!0}),this.props.network.multyRealStart),d=Object(y.a)(n.base);return m.a.createElement("div",{className:a?"":"flex-end"},m.a.createElement(x.a,null),m.a.createElement("div",{className:a?"market-container right-container mobile-right-container":s?"market-container right-container":"market-container right-container max-width"},this.renderHeader(),m.a.createElement("div",{className:"market-info-block flex-between"},this.renderInfo(),m.a.createElement("div",{className:"echarts-frame",onClick:function(){return e.judgeBox()},onTouchStart:function(){return e.judgeBox()},onTouchMove:function(){return e.judgeBox()},onMouseOver:function(){return e.hideDBox()},onMouseLeave:function(){return e.showDBox()}},m.a.createElement("span",{className:"echarts-title"},j.a.getHTML("market.detail_apymodel"),m.a.createElement("br",null),u?"":m.a.createElement("p",{className:"echarts-subtitle"},j.a.get("market.deposit_apy_include"))),m.a.createElement("span",{className:"left"},"APY(%)"),m.a.createElement("div",{className:"canvas-box",onMouseOver:function(){return e.canvasHover()},onMouseLeave:function(){return e.canvasBlur()}},m.a.createElement(k.a,{option:this.getEchartsOption(),className:"market-detail-echarts"})),m.a.createElement("div",{className:"default-text "+(l?"":"hide")},m.a.createElement("p",{className:"use-rate"},j.a.get("use_rate"),m.a.createElement("span",null,Object(y.i)(Object(y.a)(d).gt(100)?100:d,2),"%")),m.a.createElement("p",null,j.a.get("lend.depositapy"),m.a.createElement("span",{className:"blue"},"--"===Object(y.i)(Object(y.a)(Object(y.i)(n.supply,2,{miniText:.01,per:!0})).plus(Object(y.i)(o,2,{miniText:.01,per:!0})),2,{miniText:.01,per:!0})?Object(y.i)(Object(y.a)(n.supply).plus(o),2,{miniText:.01,per:!0}):Object(y.i)(Object(y.a)(Object(y.i)(n.supply,2,{miniText:.01,per:!0})).plus(Object(y.i)(o,2,{miniText:.01,per:!0})),2,{miniText:.01,per:!0}),"%")),m.a.createElement("p",null,"-",j.a.get("market.baseAPY"),m.a.createElement("span",{className:"sub-span"},Object(y.i)(n.supply,2,{miniText:.01,per:!0}),"%")),m.a.createElement("p",null,"-",j.a.get("lend.miningapy"),m.a.createElement("span",{className:"sub-span"},Object(y.i)(o,2,{miniText:.01,per:!0}),"%")),m.a.createElement("p",null,j.a.get("market.borrow_apy"),m.a.createElement("span",{className:"green"},Object(y.i)(n.borrow,2,{miniText:.01,per:!0}),"%"))),m.a.createElement("span",{className:"right"},j.a.get("market.detail_use_rate")+"(%)"),u&&!(v.a.hideMarketMintIcon.indexOf(r.collateralSymbol)>-1)&&m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"flexB gray-bar"},m.a.createElement("span",{className:"title"},j.a.get("market.detail_distubutedapy")),m.a.createElement("span",null,m.a.createElement("span",{className:"data-tip"},v.a.usddMint.includes(r.jtokenAddress)?j.a.get("market.sun_mining_nex1"):j.a.get("market.sun_mining_nex")),m.a.createElement("span",{className:"data"},v.a.usddMint.includes(r.jtokenAddress)?"".concat(Object(y.i)(p,2,{per:!0,miniText:"0.01",needDolar:!1})):Object(y.i)(o,2,{per:!0,miniText:"0.01",needDolar:!1}),"%"))),m.a.createElement("div",{className:"bottom-bar"},"USDD"===(null===r||void 0===r?void 0:r.collateralSymbol)?j.a.get("market.detail_data_hotdesc1"):j.a.get("market.detail_data_hotdesc")))))))}}]),a}(m.a.Component))||n)||n)||n),T=Object(g.b)("network")(l=Object(g.c)(l=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.network.setData({routeName:"market"})}},{key:"render",value:function(){return m.a.createElement("div",null,m.a.createElement(w,null))}}]),a}(m.a.Component))||l)||l;t.default=T},693:function(e,t,a){}}]);