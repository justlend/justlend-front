/*! For license information please see 14.5ec32280.chunk.js.LICENSE.txt */
(this["webpackJsonpjustlend-front"]=this["webpackJsonpjustlend-front"]||[]).push([[14],{1576:function(e,t,r){},1627:function(e,t,r){},1639:function(e,t,r){"use strict";r.r(t);var n,a=r(3),o=r(9),s=r(10),i=r(17),l=r(18),c=r(0),u=r.n(c),m=r(2),p=r.n(m),g=r(59),d=r(23),y=r(203),v=r.n(y),f=r(458),h=r(456),_=r(164),x=r(105),E=r(369),b=r(457),j=r(1),N=r(241),w=(r(454),r(1576),r(8));function T(){T=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(O){l=function(e,t,r){return e[t]=r}}function c(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,s=Object.create(o.prototype),i=new w(a||[]);return n(s,"_invoke",{value:E(e,r,i)}),s}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(O){return{type:"throw",arg:O}}}e.wrap=c;var m={};function p(){}function g(){}function d(){}var y={};l(y,o,(function(){return this}));var v=Object.getPrototypeOf,f=v&&v(v(k([])));f&&f!==t&&r.call(f,o)&&(y=f);var h=d.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){var a;n(this,"_invoke",{value:function(n,o){function s(){return new t((function(a,s){!function n(a,o,s,i){var l=u(e[a],e,o);if("throw"!==l.type){var c=l.arg,m=c.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(m).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,i)}))}i(l.arg)}(n,o,a,s)}))}return a=a?a.then(s,s):s()}})}function E(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return R()}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var i=b(s,r);if(i){if(i===m)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function b(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,m;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:R}}function R(){return{value:void 0,done:!0}}return g.prototype=d,n(h,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:g,configurable:!0}),g.displayName=l(d,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,l(e,i,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},_(x.prototype),l(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var s=new x(c(t,r,n,a),o);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},_(h),l(h,i,"Generator"),l(h,o,(function(){return this})),l(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),m}},e}var k,R,O=Object(d.b)("network")(n=Object(d.b)("lend")(n=Object(d.b)("system")(n=Object(d.b)("pool")(n=Object(d.b)("strx")(n=Object(d.c)(n=function(e){Object(i.a)(r,e);var t=Object(l.a)(r);function r(){var e;return Object(o.a)(this,r),(e=t.call(this)).close=function(){e.props.strx.setData({returnResourceVisible:!1})},e.returnResource=Object(a.a)(T().mark((function t(){var r,n,a,o,s,i,l,c,u;return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,gtag("event","click",{event_category:"sTRX",event_label:"energy_return_confirm"}),0!==e.props.network.isRightChain){t.next=5;break}return e.props.network.changeChain(),t.abrupt("return");case 5:return e.props.system.clearRejectError(),r=e.props.strx,n=r.rentBalance,a=r.returnResourceEnergy,o=r.energyFee,s=r.getEnergyFee,i={title:"v2.transaction_confirm",title2:"deposit.transactionsent",title3:"v2.transaction_confirm_fail",title4:"deposit.confirm_transaction",obj:{value:Object(j.k)(a,w.b.trxDecimal),token:"TRX"},trnasType:"returnResource"},l=w.b.feeLimit,t.next=11,e.props.system.getRentFeeLimit(window.defaultAccount,Object(j.a)(n).times(w.b.trxPrecision)._toFixed(0,1),1,i);case 11:if(c=t.sent,t.t0=o,t.t0){t.next=17;break}return t.next=16,s();case 16:t.t0=t.sent;case 17:return u=t.t0,l=Object(j.a)(Object(j.a)(c).times(u).div(1e6)._toFixed(0,1)).plus(2).toNumber(),e.setState({approving:!0}),t.next=22,e.props.system.returnResource(window.defaultAccount,Object(j.a)(n).times(w.b.trxPrecision)._toFixed(0,1),1,Object(j.a)(l).times(w.b.trxPrecision),i);case 22:t.sent&&(e.props.callback(),e.close(),gtag("event","click",{event_category:"sTRX",event_label:"energy_return_confirm_success"}),setTimeout((function(){e.props.strx.getUserTrxBalance(),e.props.strx.getAccountRentInfos(),e.props.strx.getNotAccountRentInfos()}),5e3)),e.setState({approving:!1}),t.next=30;break;case 27:t.prev=27,t.t1=t.catch(0),console.log("error: returnSource");case 30:case"end":return t.stop()}}),t,null,[[0,27]])}))),e.state={lang:window.localStorage.getItem("lang")||p.a.options.currentLocale,approving:!1,mobile:Object(g.a)(window.navigator).any},e}return Object(s.a)(r,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.system.transModalInfo,r=t.trnasType,n=t.declined,a=this.props.lend.theme,o=this.props.strx,s=o.returnResourceVisible,i=o.securityDeposit,l=o.returnResourceEnergy,c=this.props.returnSourceInfo,m=c.rentMoney,g=c.totalEnergy,d=c.fee,y=c.isExpired,v=Object(j.a)(l).gt(i)?Object(j.a)(l).minus(i):Object(j.a)(i).minus(l),f=Object(j.a)(m).plus(d).minus(v),h=this.state,_=h.approving,E=h.lang,b=h.mobile,T=E&&E.includes("en")?"https://justlendorg.zendesk.com/hc/en-us/articles/16512503468057":"https://justlendorg.zendesk.com/hc/zh-cn/articles/16512503468057";return u.a.createElement(N.a,{title:p.a.get("strx.energy_end_rental2"),visible:s,closable:!0,icon:null,onCancel:function(){return e.close()},footer:null,width:b?"calc(100% - 40px)":400,centered:!0,className:"j-modal j-return-resource-modal  header-border ".concat(a," "),getContainer:function(){return document.querySelector(".j-wrapper")}},u.a.createElement("div",{className:"return-resource"},u.a.createElement("div",{className:"return-icon"}),u.a.createElement("div",{className:"rs-title"},p.a.get("strx.energy_end_tip0")),u.a.createElement("div",{className:"rs-info"},u.a.createElement("div",null,u.a.createElement("div",{className:"rsi-title"},p.a.get("strx.energy_deducted")),u.a.createElement("div",{className:"rsi-value"},Object(j.k)(g,0)," ",p.a.get("strx.energy_energy"))),u.a.createElement("div",null,u.a.createElement("div",{className:"rsi-title"},p.a.get("strx.energy_asset_returned")),u.a.createElement("div",{className:"rsi-value flex items-center"},Object(j.a)(l).eq(0)?"":"\u2248"," ",Object(j.k)(l,w.b.trxDecimal)," TRX"," ",u.a.createElement(x.a,{title:u.a.createElement("span",null,p.a.get("strx.energy_include_info",{value1:y?0:Object(j.k)(Object(j.a)(i).minus(m).minus(d),w.b.trxDecimal),value2:y?l:Object(j.k)(f,w.b.trxDecimal)}),u.a.createElement("a",{className:"learn-more",href:T,target:"_blank",rel:"noopener noreferrer"},"\xa0\xa0",p.a.get("strx.energy_lerna_more2"))),placement:"topRight",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown"},u.a.createElement("span",{className:"j-tooltip-icon ml-4",onMouseEnter:function(){gtag("event","click",{event_category:"sTRX",event_label:"energy_return_hover"})}}))))),_?u.a.createElement("button",{className:"j-large-btn j-supply rent-now j-signing",disabled:!0},p.a.get("v2.sign_in_wallet"),u.a.createElement("span",{className:"siging-icon"})):u.a.createElement("button",{className:"j-large-btn j-supply rent-now",onClick:function(){return e.returnResource()}},p.a.get("strx.energy_confirm_end")),n&&"returnResource"===r&&u.a.createElement("div",{className:"j-error-tip wallet-reject"},u.a.createElement("span",{className:"j-error-img"}),u.a.createElement("div",null,p.a.get("v2.reject_in_wallet")))))}}]),r}(u.a.Component))||n)||n)||n)||n)||n)||n,L=r(284),I=r.n(L),C=r(375),S=r.n(C),D=Object(d.b)("network")(k=Object(d.b)("lend")(k=Object(d.b)("system")(k=Object(d.b)("pool")(k=Object(d.b)("strx")(k=Object(d.c)(k=function(e){Object(i.a)(r,e);var t=Object(l.a)(r);function r(){var e;return Object(o.a)(this,r),(e=t.call(this)).close=function(){e.props.strx.setData({rentPausedVisible:!1})},e.state={lang:window.localStorage.getItem("lang")||p.a.options.currentLocale,approving:!1},e}return Object(s.a)(r,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.lend.theme,r=this.props.strx.rentPausedVisible;return u.a.createElement(N.a,{title:p.a.get("collateral_tip_title"),visible:r,closable:!1,icon:null,footer:null,width:400,centered:!0,className:"j-modal j-rent-paused-modal  header-border ".concat(t," "),getContainer:function(){return document.querySelector(".j-wrapper")}},u.a.createElement("div",{className:"rent-paused"},u.a.createElement("img",{className:"rp-icon",src:"white"===t?S.a:I.a,alt:""}),u.a.createElement("div",{className:"rp-des"},p.a.getHTML("strx.energy_under_upgrading")),u.a.createElement("button",{className:"j-large-btn j-supply rent-now",onClick:function(){return e.close()}},p.a.get("got_it"))))}}]),r}(u.a.Component))||k)||k)||k)||k)||k)||k,A=(r(57),r(55),r(1566),r(1627),r(792),r(19)),M=r.n(A),P=r(1578),V=r(1567),W=r(1577);function X(){X=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(R){l=function(e,t,r){return e[t]=r}}function c(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,s=Object.create(o.prototype),i=new w(a||[]);return n(s,"_invoke",{value:E(e,r,i)}),s}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(R){return{type:"throw",arg:R}}}e.wrap=c;var m={};function p(){}function g(){}function d(){}var y={};l(y,o,(function(){return this}));var v=Object.getPrototypeOf,f=v&&v(v(T([])));f&&f!==t&&r.call(f,o)&&(y=f);var h=d.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){var a;n(this,"_invoke",{value:function(n,o){function s(){return new t((function(a,s){!function n(a,o,s,i){var l=u(e[a],e,o);if("throw"!==l.type){var c=l.arg,m=c.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(m).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,i)}))}i(l.arg)}(n,o,a,s)}))}return a=a?a.then(s,s):s()}})}function E(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return k()}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var i=b(s,r);if(i){if(i===m)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function b(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,m;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return g.prototype=d,n(h,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:g,configurable:!0}),g.displayName=l(d,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,l(e,i,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},_(x.prototype),l(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var s=new x(c(t,r,n,a),o);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},_(h),l(h,i,"Generator"),l(h,o,(function(){return this})),l(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),m}},e}_.a.Option;var F,H=Object(d.b)("network")(R=Object(d.b)("lend")(R=Object(d.b)("system")(R=Object(d.b)("pool")(R=Object(d.b)("strx")(R=Object(d.c)(R=function(e){Object(i.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this,e)).componentDidMount=Object(a.a)(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.lend.getLatestBlockInfo();case 2:n.props.strx.setVariablesInterval(),document.title="Energy Rental - JustLend DAO",gtag("event","pageView",{event_category:"sTRX",event_label:"page-energy"});case 5:case"end":return e.stop()}}),e)}))),n.getUserData=Object(a.a)(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.strx.getUserTrxBalance();case 2:return e.next=4,n.props.strx.getAccountRentInfos();case 4:n.props.network.on("connect",Object(a.a)(X().mark((function e(){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.strx.getUserTrxBalance();case 2:return e.next=4,n.props.strx.getAccountRentInfos();case 4:case"end":return e.stop()}}),e)}))));case 5:case"end":return e.stop()}}),e)}))),n.initForm=function(){n.setState({rentAmountsEnergyInputValue:"",rentAmountsStakeInputValue:"",rentWaysTimeInputValue:"",rentWaysRentInputValue:""})},n.getMarketData=Object(a.a)(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.props.strx.getMarketData(),e.next=4,n.props.strx.getNotAccountRentInfos();case 4:t=n.timeToRent("",!0),n.setState({defaultRent:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error: getMarketData");case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),n.getAnnouncementUrl=function(){var e=n.state.lang,t=e&&e.includes("en")?"https://justlendorg.zendesk.com/hc/en-us/articles/17080698112537":"https://justlendorg.zendesk.com/hc/zh-cn/articles/17080698112537",r=e&&e.includes("en")?"https://justlendorg.zendesk.com/hc/en-us/articles/17525313120281":"https://justlendorg.zendesk.com/hc/zh-cn/articles/17525313120281";return w.a.nile?t:r},n.getLearnUrl=function(){var e=n.state.lang,t=e&&e.includes("en")?"https://justlendorg.zendesk.com/hc/en-us/articles/16512503468057":"https://justlendorg.zendesk.com/hc/zh-cn/articles/16512503468057",r=e&&e.includes("en")?"https://justlendorg.zendesk.com/hc/en-us/articles/17526112107417":"https://justlendorg.zendesk.com/hc/zh-cn/articles/17526112107417";return w.a.nile?t:r},n.getCurrentInfos=function(){try{var e=n.props.strx,t=e.rentBalance,r=e.securityDeposit,a=e.feeRatio,o=e.minFee,s=e.liquidateThreshold,i=e.basicRate,l=Math.max(o,M()(M()(t).times(a))),c=M()(t).times(i).times(M()(86400).plus(s)),u=M()(c).plus(l).minus(r),m=M()(t).times(i).times(86400),p=M()(M()(r).minus(l).minus(c)).div(M()(t).times(i)).times(1e3),g=(new Date).getTime();return{fee:l,rentMoney:c,needToPayTrx:u,rentPerDay:m,rentDaysLeft:M()(Math.abs(p)).plus(g),rentDaysLeftTrue:M()(p).plus(g),rentDaysLeftSecs:M()(Math.abs(p)).div(1e3)}}catch(d){console.log("error: getCurrentInfos")}},n.getDynamicInfos=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;try{var a=n.props.strx,o=a.rentBalance,s=a.securityDeposit,i=a.feeRatio,l=a.minFee,c=a.liquidateThreshold,u=a.rate,m=a.basicRate,p=n.getCurrentInfos(),g=p.rentDaysLeftSecs,d=Math.max(l,M()(e).times(i)),y=M()(e).times(u).times(M()(86400).plus(c)),v=0;if("addEnergy"===r){y=M()(e).minus(o).times(u).times(M()(g));var f=M()(e).times(u).times(M()(g).plus(86400).plus(c));v=M()(f).plus(d).minus(s)}else if("addTime"===r)v=M()(o).times(m).times(t);else if("notLogin"===r){var h=M()(e).times(u).times(M()(t).plus(86400).plus(c));v=M()(h).plus(d)}var _=M()(e).times(u).times(86400),x=M()(M()(s).minus(d).minus(y)).div(M()(e).times(u)).times(1e3);return{fee:d,rentMoney:y,needToPayTrx:v,rentPerDay:_,rentDaysLeft:M()(x).plus((new Date).getTime())}}catch(E){console.log("error: getDynamicInfos")}},n.rentToTime=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.rentWaysRentInputValue,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;try{var a=n.props.strx,o=a.rentBalance,s=a.securityDeposit,i=a.feeRatio,l=a.minFee,c=a.liquidateThreshold,u=a.rate,m=a.basicRate,p=0,g="--";if(!M()(u).isNaN()){if(M()(o).gt(0))p=M()(e).div(o).div(m);else{var d=n.state.rentAmountsStakeInputValue,y=Math.max(l,M()(d||n.energyToTrx()).times(i)),v=M()(e).plus(s).minus(y);p=M()(v).div(d||n.energyToTrx()).div(u).minus(c).minus(86400)}var f=n.judgeExpiredClear(),h=f.isExpired,_=n.getCurrentInfos(),x=_.rentDaysLeft;h&&(p=M()(p).minus(M()(x).minus((new Date).getTime()).div(1e3))),g=M()(p).div(86400)._toFixed(1,1),M()(g).gt(0)||(g=0)}if(t)return g;n.setState({rentWaysTimeInputValue:!r&&M()(g).eq(3)?"":g})}catch(E){console.log("error: rentToTime")}},n.timeToRent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.rentWaysTimeInputValue,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var r=n.props.strx.rentBalance,a=n.state,o=(a.rentAmountsEnergyInputValue,a.rentAmountsStakeInputValue),s=e||3,i=o||n.energyToTrx(),l=n.judgeExpiredClear(),c=l.isExpired,u=n.getCurrentInfos(),m=u.rentDaysLeft,p=0;if(M()(r).gt(0)){var g=c?M()(m).minus((new Date).getTime()).plus(M()(s).times(864e5)).div(1e3):M()(s).times(86400),d=n.getDynamicInfos(0,g,"addTime");p=d.needToPayTrx}else{var y=n.getDynamicInfos(i,M()(s).times(86400),"notLogin");p=y.needToPayTrx}if(t)return p;n.setState({rentWaysRentInputValue:M()(p).isNaN()||!n.state.rentWaysTimeInputValue&&M()(p).eq(n.state.defaultRent)?"":M()(p)._toFixed(w.a.trxDecimal,1)})}catch(v){console.log("error: timeToRent")}},n.trxMax=function(){try{if(n.props.system.clearRejectError(),!n.props.network.isConnected)return n.props.network.connectWalletV2();gtag("event","click",{event_category:"sTRX",event_label:"energy_trx_max"});var e=n.props.strx.trxBalance;e=M()(e).div(w.a.trxPrecision);var t=n.rentToTime(e,!0),r=n.state.rentDaysArray[1];M()(t).gt(r)?(n.timeToRent(r),n.setState({rentWaysTimeInputValue:r})):(n.timeToRent(t),n.setState({rentWaysTimeInputValue:t,rentWaysRentInputValue:e})),setTimeout((function(){n.rentWaysRentInputValid()}))}catch(a){console.log("error: trxMax")}},n.timeMax=function(){try{if(n.props.system.clearRejectError(),!n.props.network.isConnected)return n.props.network.connectWalletV2();var e=n.props.strx.trxBalance;e=M()(e).div(w.a.trxPrecision);var t=n.rentToTime(e,!0),r=n.state.rentDaysArray[1];M()(t).gt(r)?n.setState({rentWaysTimeInputValue:r}):n.rentToTime(e),setTimeout((function(){n.rentWaysTimeInputValid()})),gtag("event","click",{event_category:"sTRX",event_label:"energy_time_max"})}catch(a){console.log("error: timeMax")}},n.rentInfoNotLogin=function(){var e=n.props.strx.marketData;return u.a.createElement("div",{className:"my-rent-info"},u.a.createElement("div",{className:"rent-info-top"},u.a.createElement("div",{className:"rent-info-content"},u.a.createElement("div",{className:"rent-info-title"},p.a.get("strx.energy_rent_10w_per_day")),u.a.createElement("div",{className:"rent-energy-amount"},u.a.createElement("span",{className:"equal-alike"},"\u2248 "),u.a.createElement("span",{className:"rent-amount"},Object(j.k)(M()(e.trx1wEnergy).times(10),3,{miniText:"0.001"}))," ",u.a.createElement("span",{className:"rent-unit"},"TRX/",p.a.get("strx.energy_day2")))),u.a.createElement("div",{className:"rent-info-icon"})),u.a.createElement("div",{className:"energy-info not-login-info"},u.a.createElement("div",{className:"energy-info-top"},p.a.get("strx.energy_get_same_energy")),u.a.createElement("div",{className:"energy-info-content"},u.a.createElement("div",{className:"need-stake"},u.a.createElement("div",{className:"icon"}),u.a.createElement("div",{className:"title"},p.a.get("strx.energy_need_stake_trx")),u.a.createElement("div",{className:"value"},Object(j.k)(M()(1e5).div(e.energyStakePerTrx),0,{miniText:"1"}),u.a.createElement("span",null,"TRX"))),u.a.createElement("div",{className:"need-burn"},u.a.createElement("div",{className:"icon"}),u.a.createElement("div",{className:"title"},p.a.get("strx.energy_need_burn_trx")),u.a.createElement("div",{className:"value"},Object(j.k)(M()(1e5).div(e.energyBurnPerTrx),3,{miniText:"0.001"}),u.a.createElement("span",null,"TRX"))))))},n.rentFormNotLogin=function(){var e=n.props.network.isConnected,t=n.props.strx.trxBalance;t=M()(t).div(w.a.trxPrecision);var r=n.state,a=r.approving,o=r.rentWaysTimeInputValue,s=(r.rentAmountsEnergyInputValue,r.rentAmountsStakeInputValue),i=r.rentWaysRentInputValue,l=r.rentWaysSelectValue,c=r.defaultRent,m=r.showBalanceError,g=n.props.strx,d=g.maxRentableOfType,y=g.marketData.energyStakePerTrx,v=n.props.lend.lang,f=o||3,h=i||c,_=s||n.energyToTrx(),E=n.getDynamicInfos(_,M()(f).times(86400),"notLogin"),b=E.rentMoney,N=E.fee,T=E.needToPayTrx,k="3"===l?h:T,R=n.getLearnUrl(),O=n.props.system.transModalInfo,L=O.declined,I=O.trnasType,C=d,S=M()(C).times(y),D=M()(1e5);return u.a.createElement("div",{className:"rent-form"},u.a.createElement("div",{className:"rent-form-tabs"},u.a.createElement("span",{className:"single-tab"},p.a.get("strx.energy_rent_energy"))),u.a.createElement("div",{className:"rent-content"},n.rentAmountsRender("1"),n.rentWaysRender("1"),u.a.createElement("div",{className:"energy-infos energy-infos-new mt20"},u.a.createElement("div",{className:"energy-info"},u.a.createElement("div",{className:"info-subtitle pre-title flex aic"},p.a.get("strx.energy_prepay")," ",u.a.createElement(W.a,{className:"learn-more ml-10",href:R,target:"_blank",rel:"noopener noreferrer"},p.a.get("strx.energy_fee_compute_rule"))),u.a.createElement("div",{className:"pay-amount ellipsis fw600"+(M()(k).gt(t)&&m?" pay-error":"")},Object(j.k)(k,w.a.trxDecimal)," ",u.a.createElement("span",null,"TRX"))),u.a.createElement("div",{className:"energy-info energy-info-item"},u.a.createElement("div",{className:"info-subtitle flex ".concat(v)},u.a.createElement(x.a,{title:p.a.getHTML("strx.energy_tips_4"),placement:"top",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown"},u.a.createElement("span",{className:"j-tooltip-icon mr-6"})),u.a.createElement(V.a,{title:p.a.getHTML("strx.energy_tips_4"),placement:"topLeft",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown"},p.a.get("strx.energy_prepay_tips1")),u.a.createElement("br",null),p.a.get("strx.energy_prepay_tips2")),u.a.createElement("div",{className:"pay-amount-sub ellipsis"},M()(k).minus(b).minus(N).eq(0)?0:Object(j.k)(M()(k).minus(b).minus(N),w.a.trxDecimal)," ","TRX")),u.a.createElement("div",{className:"energy-info energy-info-item"},u.a.createElement("div",{className:"info-subtitle flex ".concat(v)},u.a.createElement(x.a,{title:u.a.createElement(u.a.Fragment,null,p.a.getHTML("strx.energy_tips_5")," ",u.a.createElement("a",{className:"learn-more",href:R,target:"_blank",rel:"noopener noreferrer"},p.a.get("strx.energy_lerna_more"))),placement:"top",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown"},u.a.createElement("span",{className:"j-tooltip-icon mr-6"})),u.a.createElement(V.a,{title:u.a.createElement(u.a.Fragment,null,p.a.getHTML("strx.energy_tips_5")," ",u.a.createElement("a",{className:"learn-more",href:R,target:"_blank",rel:"noopener noreferrer"},p.a.get("strx.energy_lerna_more"))),placement:"topLeft",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown"},p.a.get("strx.energy_rent_money_tips1")),u.a.createElement("br",null),p.a.get("strx.energy_rent_money_tips2")),u.a.createElement("div",{className:"pay-amount-sub ellipsis"},M()(b).plus(N).eq(0)?0:Object(j.k)(M()(b).plus(N),w.a.trxDecimal)," ","TRX"))),a?u.a.createElement("button",{className:"j-large-btn j-supply rent-now j-signing",disabled:!0},p.a.get("v2.sign_in_wallet"),u.a.createElement("span",{className:"siging-icon"})):e?u.a.createElement("button",{className:"j-large-btn j-supply rent-now",disabled:(M()(S).lt(D)||n.state.rentAmountsErrorMsg||n.state.rentWaysErrorMsg&&!["-1","-2","-3"].includes(n.state.rentWaysErrorMsg)||M()(k).gt(t))&&m,onClick:function(){return n.rentResource(_,k)}},p.a.get("strx.energy_rent_now")):u.a.createElement("button",{className:"j-large-btn j-supply rent-now",onClick:function(){n.props.network.connectWalletV2(),gtag("event","click",{event_category:"sTRX",event_label:"energy_connect_wallet"})}},p.a.get("strx.energy_connect_to_rent")),L&&"rentResource"===I&&u.a.createElement("div",{className:"j-error-tip wallet-reject"},u.a.createElement("span",{className:"j-error-img"}),u.a.createElement("div",null,p.a.get("v2.reject_in_wallet"))),M()(k).gt(t)&&m&&u.a.createElement("div",{className:"j-error-tip wallet-reject"},u.a.createElement("span",{className:"j-error-img"}),u.a.createElement("div",null,p.a.getHTML("strx.energy_insufficient_balance",{value:Object(j.k)(t,w.a.trxDecimal)})))))},n.rentInfo=function(){var e=n.state,t=e.rentDaysLeftStatus,r=e.mobile,a=n.props.strx,o=a.securityDeposit,s=a.rentBalance,i=a.returnResourceEnergy,l=a.marketData,c=n.getCurrentInfos(),m=c.fee,g=(c.rate,c.rentPerDay),d=c.rentDaysLeft,y=c.rentMoney,f=c.rentDaysLeftTrue,h=n.judgeExpiredClear().isExpired,_=Object(j.pb)(d),E=_.days,b=_.hours,N=_.mins,w=n.getLearnUrl(),T=0;M()(i).isNaN()||(T=M()(i).gt(o)?M()(i).minus(o):M()(o).minus(i));var k=M()(y).plus(m).minus(T);return u.a.createElement("div",{className:"my-rent-info login"},u.a.createElement("div",{className:"rent-info-top"},u.a.createElement("div",{className:"rent-info-content"},u.a.createElement("div",{className:"rent-info-title"},p.a.get("strx.energy_rental_amount")),u.a.createElement("div",{className:"rent-energy-amount underline"},u.a.createElement(x.a,{title:p.a.get("strx.energy_trx_energy_desc"),placement:"top",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown"},u.a.createElement("span",{className:"rent-amount"},Object(j.k)(M()(s).times(l.energyStakePerTrx),0)),u.a.createElement("span",{className:"rent-unit"},p.a.get("strx.energy_energy_day")))),u.a.createElement("div",{className:"rent-delegate-amount flex aic"},u.a.createElement(V.a,{title:p.a.get("strx.energy_trx_to_get_energy"),placement:"topLeft",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown"},u.a.createElement("span",null,p.a.get("strx.energy_delegate_trx",{value:Object(j.k)(s,0,{miniText:"1"})}))),u.a.createElement(x.a,{title:p.a.get("strx.energy_trx_to_get_energy"),placement:"top",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown"},u.a.createElement("span",{className:"j-tooltip-icon ml-6",onMouseEnter:function(){gtag("event","click",{event_category:"sTRX",event_label:"energy_trx_energy_hover"})}})))),u.a.createElement("div",{className:"rent-info-icon"})),u.a.createElement("div",{className:"energy-info"},u.a.createElement("div",{className:"energy-info-content login"},u.a.createElement("div",{className:"energy-info-content-item"},u.a.createElement("div",{className:"title flex items-center"},u.a.createElement(V.a,{title:p.a.get("strx.energy_end_rent_desc",{value1:h?0:Object(j.k)(M()(o).minus(y).minus(m),3,{miniText:"0.001"}),value2:h?Object(j.k)(i,2):M()(k).eq(0)?0:Object(j.k)(k,2)}),placement:"topLeft",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown",onOpen:function(){gtag("event","click",{event_category:"sTRX",event_label:"energy_end_rent_hover"})}},p.a.get("strx.energy_remaining_rent")),u.a.createElement(x.a,{title:p.a.get("strx.energy_end_rent_desc",{value1:h?0:Object(j.k)(M()(o).minus(y).minus(m),3,{miniText:"0.001"}),value2:h?Object(j.k)(i,2):M()(k).eq(0)?0:Object(j.k)(k,2)}),placement:"top",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown"},u.a.createElement("span",{className:"j-tooltip-icon ml-6",onMouseEnter:function(){gtag("event","click",{event_category:"sTRX",event_label:"energy_end_rent_hover"})}}))),u.a.createElement("div",{className:"value"},h?0:Object(j.k)(M()(o).minus(y).minus(m),3,{miniText:"0.001"}),u.a.createElement("span",null," TRX"))),u.a.createElement("div",{className:"energy-info-content-item"},u.a.createElement("div",{className:"title flex items-center"},u.a.createElement(V.a,{title:p.a.get("strx.energy_rental_rate"),placement:"topLeft",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown",onOpen:function(){gtag("event","click",{event_category:"sTRX",event_label:"energy_end_rent_hover"})}},u.a.createElement("span",{className:"title-top"},p.a.get("strx.energy_daily_rent"))),r?null:u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"vertical-line"}),u.a.createElement("div",{className:"j-tooltip-text"},p.a.get("strx.energy_rental_rate")))),u.a.createElement("div",{className:"value"},Object(j.k)(g,3,{miniText:"0.001"}),u.a.createElement("span",null," TRX"))),u.a.createElement("div",{className:"energy-info-content-item"},u.a.createElement("div",{className:"title flex items-center"},u.a.createElement(V.a,{title:p.a.get("strx.energy_tips_5"),placement:"top",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown",onOpen:function(){gtag("event","click",{event_category:"sTRX",event_label:"energy_end_rent_hover"})}},p.a.get("strx.energy_rent_money")),u.a.createElement(x.a,{title:u.a.createElement(u.a.Fragment,null,p.a.getHTML("strx.energy_tips_5")," ",u.a.createElement("a",{className:"learn-more",href:w,target:"_blank",rel:"noopener noreferrer"},p.a.get("strx.energy_lerna_more"))),placement:"top",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown"},u.a.createElement("span",{className:"j-tooltip-icon ml-6",onMouseEnter:function(){gtag("event","click",{event_category:"sTRX",event_label:"energy_end_rent_hover"})}}))),u.a.createElement("div",{className:"value"},h?Object(j.k)(i,2):M()(k).eq(0)?0:Object(j.k)(k,2),u.a.createElement("span",null," TRX")))),u.a.createElement("div",{className:"rent-left"},u.a.createElement("div",null,u.a.createElement("div",{className:"rent-left-label",onClick:function(){n.setState({rentDaysLeftStatus:!t}),gtag("event","click",{event_category:"sTRX",event_label:"energy_exchange_icon"})}},t?p.a.get("strx.energy_expire_date"):p.a.get("strx.energy_remaining_duration"),u.a.createElement("span",{className:"j-exchange-icon"})),u.a.createElement("div",{className:"rent-left-time"},!M()(f).isNaN()&&u.a.createElement(u.a.Fragment,null,u.a.createElement("span",{className:"rent-left-wavyline"}),M()(o).minus(y).minus(m).gt(0)?M()(d).isNaN()?"--":t?v()(M()(f).toNumber()).format("YYYY-MM-DD HH:mm"):p.a.getHTML("strx.energy_d_h_m",{value1:E,value2:b,value3:N}):t?v()(M()(f).toNumber()).format("YYYY-MM-DD HH:mm"):p.a.getHTML("strx.energy_d_h_m",{value1:0,value2:0,value3:0}))),u.a.createElement("div",{className:"j-tooltip-text mt-6"},t?p.a.get("strx.energy_expiration_time"):p.a.get("strx.energy_remaining_duration2"))),u.a.createElement("div",{className:"rent-back",onClick:n.returnSource},p.a.get("strx.energy_end_now")))))},n.rentForm=function(){var e=n.state.tabValue;return u.a.createElement("div",{className:"rent-form"},u.a.createElement("div",{className:"rent-form-tabs"},u.a.createElement("span",{className:"energy"===e?"current":"",onClick:function(){n.setState({tabValue:"energy"}),n.props.system.clearRejectError(),gtag("event","click",{event_category:"sTRX",event_label:"energy_rent_more"})}},p.a.get("strx.energy_rent_more")),u.a.createElement("span",{className:"time"===e?"current":"",onClick:function(){n.setState({tabValue:"time"}),n.props.system.clearRejectError(),gtag("event","click",{event_category:"sTRX",event_label:"energy_rent_time"})}},p.a.get("strx.energy_extend_rent_duration"))),"energy"===e?n.energyAddRender():n.timeAddRender())},n.rentAmountsSelectChange=function(e){try{n.props.system.clearRejectError(),n.setState({rentAmountsSelectValue:e}),setTimeout((function(){"0"===e?(n.rentAmountsEnergyInputValid(),gtag("event","click",{event_category:"sTRX",event_label:"energy_select_energy"})):"1"===e&&(n.rentAmountsStakeInputValid(),gtag("event","click",{event_category:"sTRX",event_label:"energy_select_trx"}))}))}catch(t){console.log("error: rentAmountsSelectChange")}},n.setRate=function(){var e=Object(a.a)(X().mark((function e(t){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=M()(t).isNaN()||!t&&!M()(t).eq(0)?n.energyToTrx():t,n.props.strx.setData({stakeAmount:t}),n.props.strx.rentalRate(t)}catch(r){console.log("error: setRate")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.energyToTrx=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e5;try{var t=n.props.strx.marketData,r=t.energyStakePerTrx;return M()(M()(e).div(r)._toFixed(w.a.trxDecimal,1)).plus(1)}catch(a){console.log("error: energyToTrx")}},n.rentAmountsEnergyInputChange=function(){var e=Object(a.a)(X().mark((function e(t){var r,a,o,s,i,l,c,u,m;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n.props.system.clearRejectError(),r=n.state,a=r.rentAmountsStakeInputDecimal,o=r.rentAmountsEnergyInputDecimal,s=n.props.strx.marketData,i=s.energyStakePerTrx,l=Object(j.ab)(""+t.target.value,o),c=l.valid,u=l.str,c&&/^\d*$/.test(u)&&(m=u?M()(M()(u).div(i)._toFixed(a,1)).plus(1):"",n.setState({rentAmountsEnergyInputValue:u,rentAmountsStakeInputValue:m}),n.rentAmountsEnergyInputValid(u),n.setRate(m),setTimeout((function(){n.commonSelectChange()})))}catch(t){console.log("error: rentAmountsEnergyInputChange")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.rentAmountsEnergyInputValid=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.rentAmountsEnergyInputValue,t=n.props.strx,r=t.maxRentableOfType,a=t.marketData,o=a.energyStakePerTrx,s=r,i=M()(s).times(o)._toFixed(0,1),l=M()(1e5);e||M()(e).eq(0)?M()(M()(s).times(o)).lt(l)?n.setState({rentAmountsErrorMsg:p.a.get("strx.energy_no_balance")}):M()(e).lt(l)?n.setState({rentAmountsErrorMsg:p.a.getHTML("strx.energy_energy_min_amount",{value:Object(j.k)(l)})}):M()(e).gt(i)?n.setState({rentAmountsErrorMsg:p.a.getHTML("strx.energy_energy_max_amount",{value:Object(j.k)(i)})}):n.setState({rentAmountsErrorMsg:""}):n.setState({rentAmountsErrorMsg:""})},n.rentAmountsStakeInputChange=function(){var e=Object(a.a)(X().mark((function e(t){var r,a,o,s,i,l,c,u,m;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n.props.system.clearRejectError(),r=n.state,a=r.rentAmountsStakeInputDecimal,o=r.rentAmountsEnergyInputDecimal,r.rentWaysTimeInputValue,s=Object(j.ab)(""+t.target.value,a),i=s.valid,l=s.str,c=n.props.strx.marketData,u=c.energyStakePerTrx,i&&/^\d*$/.test(l)&&(m=l?M()(l).times(u)._toFixed(o,1):"",n.setState({rentAmountsStakeInputValue:l,rentAmountsEnergyInputValue:m}),n.rentAmountsStakeInputValid(l),n.setRate(l),setTimeout((function(){n.commonSelectChange()})))}catch(t){console.log("error: rentAmountsStakeInputChange")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.rentAmountsStakeInputValid=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.rentAmountsStakeInputValue,t=n.props.strx,r=t.trxBalance,a=t.maxRentableOfType;t.marketData;r=M()(r).div(w.a.trxPrecision);var o=a,s=M()(o)._toFixed(0,1),i=n.energyToTrx();e||M()(e).eq(0)?M()(o).lt(i)?n.setState({rentAmountsErrorMsg:p.a.get("strx.energy_no_balance")}):M()(e).lt(i)||M()(e).gt(s)?n.setState({rentAmountsErrorMsg:p.a.get("strx.energy_out_of_range",{value1:Object(j.k)(i),value2:Object(j.k)(s)})}):n.setState({rentAmountsErrorMsg:""}):n.setState({rentAmountsErrorMsg:""})},n.rentWaysSelectChange=function(e){try{n.props.system.clearRejectError(),n.setState({rentWaysSelectValue:e}),setTimeout((function(){"2"===e?(n.rentWaysTimeInputValid(),gtag("event","click",{event_category:"sTRX",event_label:"energy_select_duration"})):(n.timeToRent(),n.rentWaysRentInputValid(),gtag("event","click",{event_category:"sTRX",event_label:"energy_select_rent"}))}))}catch(t){console.log("error: rentWaysSelectChange")}},n.commonSelectChange=function(){var e=n.state,t=e.rentWaysSelectValue,r=e.rentWaysRentInputValue,a=e.defaultRent;"2"===t?n.timeToRent():n.rentToTime(r||a)},n.rentWaysTimeInputChange=function(e){try{n.props.system.clearRejectError();var t=Object(j.ab)(e,n.state.rentWaysTimeInputDecimal),r=t.valid,a=t.str;r&&/^\d*(.|.[0-9]){0,1}$/.test(a)&&(n.setState({rentWaysTimeInputValue:a}),n.rentWaysTimeInputValid(a))}catch(o){console.log("error: rentWaysTimeInputChange")}},n.rentWaysTimeInputValid=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.rentWaysTimeInputValue,t=n.props.strx.trxBalance;t=M()(t).div(w.a.trxPrecision);var r=30,a=1,o=n.rentToTime(M()(t).minus(w.a.sTRX.reserveTRX),!0),s=n.timeToRent(e,!0);!e&&!M()(e).eq(0)||M()(s).gt(t)?n.setState({rentWaysErrorMsg:""}):M()(e).lt(a)||M()(e).gt(r)?n.setState({rentWaysErrorMsg:p.a.get("strx.energy_out_of_days",{value1:Object(j.k)(a),value2:Object(j.k)(r)})}):M()(t).lt(w.a.sTRX.reserveTRX)?n.setState({rentWaysErrorMsg:"-2"}):M()(o).lt(e)?n.setState({rentWaysErrorMsg:"-3"}):n.setState({rentWaysErrorMsg:""})},n.rentWaysRentInputChange=function(e){try{n.props.system.clearRejectError();var t=Object(j.ab)(e,w.a.trxDecimal),r=t.valid,a=t.str;if(r)if(n.setState({rentWaysRentInputValue:a}),n.rentWaysRentInputValid(a),a)n.rentToTime(a);else{var o=n.state.defaultRent;n.rentToTime(o,!1,a)}}catch(s){console.log("error: rentWaysRentInputChange")}},n.rentWaysRentInputValid=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.rentWaysRentInputValue,t=n.props.strx,r=t.rentBalance,a=t.trxBalance;a=M()(a).div(w.a.trxPrecision);var o=n.state.rentDaysArray,s=M()(n.timeToRent(o[0],!0))._toFixed(6,1),i=n.timeToRent(o[1],!0),l=M()(M()(i).gt(a)?a:i)._toFixed(6,1);if(l=M()(l).lt(s)?M()(i)._toFixed(6,1):l,!e&&!M()(e).eq(0)||M()(e).gt(a))n.setState({rentWaysErrorMsg:""});else if(M()(e).lt(s)||M()(e).gt(l)){var c=M()(r).gt(0)?"strx.energy_out_of_extend_trx":"strx.energy_out_of_extend_trx1";n.setState({rentWaysErrorMsg:p.a.get(c,{value1:Object(j.k)(s,6),value2:Object(j.k)(l,6)})})}else M()(a).lt(w.a.sTRX.reserveTRX)?n.setState({rentWaysErrorMsg:"-2"}):M()(a).minus(w.a.sTRX.reserveTRX).lt(e)?n.setState({rentWaysErrorMsg:"-1"}):n.setState({rentWaysErrorMsg:""})},n.rentAmountsRender=function(e){var t=n.state,r=t.rentAmountsSelectValue,a=t.rentAmountsEnergyInputValue,o=t.rentAmountsStakeInputValue,s=t.rentAmountsErrorMsg,i=t.energyFocused,l=n.props.strx.marketData,c=n.props.strx.trxBalance;c=M()(c).div(w.a.trxPrecision);var m=n.props.network.isConnected,g=(l.energyStakePerTrx,"1"!==e);return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"rent-labels jce"},u.a.createElement(V.a,{title:p.a.get("strx.energy_tips_2"),placement:"topLeft",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown"},u.a.createElement("span",{className:"rent-label-text"},p.a.get("strx.energy_rent_amount"))),u.a.createElement("span",null,u.a.createElement("span",{className:"rent-days-title"},p.a.get("strx.energy_available_balance"),":"),u.a.createElement("span",{className:"rent-days-value"}," ",m?Object(j.k)(c,w.a.trxDecimal):"--"," TRX"))),u.a.createElement(E.a.Group,{compact:!0,className:"mt-10"+(s?" j-error-input-group":"")},u.a.createElement("div",{className:"j-select-alike j-select-alike-energy"},u.a.createElement(x.a,{title:function(){return u.a.createElement("div",null,u.a.createElement("div",{className:"tal"},p.a.get("strx.energy_tips_2")))},placement:"top",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown"},u.a.createElement("span",{className:"j-tooltip-icon mr-6",onMouseEnter:function(){gtag("event","click",{event_category:"sTRX",event_label:"energy_rent_hover"+("1"===e?"1":"")})}})),u.a.createElement("div",{className:"j-alike-text"},p.a.get("strx.energy_rent_amount"))),"0"===r?u.a.createElement(E.a,{className:"j-input energy-input",placeholder:"100,000",allowClear:!0,addonAfter:u.a.createElement(u.a.Fragment,null,u.a.createElement("span",{className:"energy-unit"},p.a.get("strx.energy_energy_day")),u.a.createElement("span",{className:"exchange",onClick:function(){return n.rentAmountsSelectChange("1")}})," "),value:a,onChange:n.rentAmountsEnergyInputChange,onFocus:function(){n.setState({energyFocused:!0}),n.inputFocus(),gtag("event","click",{event_category:"sTRX",event_label:"energy_rent_energy_focus"+Number(g)})},onBlur:function(){n.setState({energyFocused:!1})}}):u.a.createElement(E.a,{className:"j-input energy-input",placeholder:"100,000",allowClear:!0,addonAfter:u.a.createElement(u.a.Fragment,null,u.a.createElement("span",{className:"stake-trx"},"TRX"),u.a.createElement("span",{className:"exchange",onClick:function(){return n.rentAmountsSelectChange("0")}})),value:o,onChange:n.rentAmountsStakeInputChange,onFocus:function(){n.inputFocus(),gtag("event","click",{event_category:"sTRX",event_label:"energy_rent_trx_focus"+Number(g)})}}),s?u.a.createElement("div",{className:"j-error-tip"},u.a.createElement("span",{className:"j-error-img"}),u.a.createElement("div",{className:"j-safe-text"},s)):M()(a).gte(0)&&i?u.a.createElement("div",{className:"j-error-tip ways-warning"},u.a.createElement("span",{className:"j-warning-icon"}),u.a.createElement("div",null,p.a.getHTML("strx.energy_acquire_info",{value:Object(j.k)(n.energyToTrx(a||1e5),0)}))):null))},n.rentWaysRender=function(e){var t=n.state,r=t.rentWaysSelectValue,a=t.rentWaysTimeInputValue,o=t.rentWaysRentInputValue,s=(t.rentWaysRentInputDecimal,t.rentDaysArray),i=t.rentWaysErrorMsg,l=t.defaultRent,c=(n.props.network.isConnected,n.props.strx),m=c.trxBalance,g=c.rentBalance;m=M()(m).div(w.a.trxPrecision);var d=n.rentToTime(m,!0),y=(M()(d).gt(s[1])&&s[1],"--");if("-3"===i){var f=n.rentToTime(M()(m).minus(w.a.sTRX.reserveTRX),!0),h=M()(a).minus(f);y=M()(h).times(24)}var _=n.timeToRent(s[1],!0);M()(_).gt(m);return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"rent-labels rent-labels-time"},u.a.createElement(V.a,{title:p.a.get("strx.energy_tips_3"),placement:"topLeft",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown"},u.a.createElement("span",{className:"rent-label-text"},p.a.get("strx.energy_rent_time")))),u.a.createElement(E.a.Group,{compact:!0,className:"mt-10"+(i&&!["-1","-2","-3"].includes(i)?" j-error-input-group":"")},u.a.createElement("div",{className:"j-select-alike j-select-alike-energy"},u.a.createElement(x.a,{title:function(){return u.a.createElement("div",null,u.a.createElement("div",{className:"tal"},p.a.get("strx.energy_tips_3")))},placement:"top",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown"},u.a.createElement("span",{className:"j-tooltip-icon mr-6",onMouseEnter:function(){gtag("event","click",{event_category:"sTRX",event_label:"energy_rental_calculation_hover"+Number("1"!==e)})}})),u.a.createElement("div",{className:"j-alike-text"},p.a.get("strx.energy_rent_time"))),"2"===r?u.a.createElement(E.a,{className:"j-input energy-input ",placeholder:"3",allowClear:!0,addonAfter:u.a.createElement("div",{className:"flex aic"},u.a.createElement("div",{className:"energy-max",onClick:n.timeMax},p.a.get("strx.energy_max")),u.a.createElement("span",{className:"energy-unit"},p.a.get("strx.energy_day"))),value:a,onChange:function(e){return n.rentWaysTimeInputChange(e.target.value)},onFocus:function(){n.inputFocus(),gtag("event","click",{event_category:"sTRX",event_label:"energy_rent_duration_focus"+Number("1"!==e)})}}):u.a.createElement(E.a,{className:"j-input energy-input ",placeholder:Object(j.k)(l,w.a.trxDecimal),allowClear:!0,addonAfter:u.a.createElement(u.a.Fragment,null,u.a.createElement("span",{className:"stake-trx"},"TRX")),value:o,onChange:function(e){return n.rentWaysRentInputChange(e.target.value)},onFocus:function(){n.inputFocus(),gtag("event","click",{event_category:"sTRX",event_label:"energy_rent_focus"+Number("1"!==e)})}}),i&&("-1"===i?u.a.createElement("div",{className:"j-error-tip ways-warning"},u.a.createElement("span",{className:"j-warning-icon"}),u.a.createElement("div",null,p.a.get("strx.stake_enough_trx"),u.a.createElement("span",{className:"set-max",onClick:function(){return n.reserveTrx()}},p.a.get("strx.stake_reserve_trx",{value:w.a.sTRX.reserveTRX}),u.a.createElement("em",null)))):"-2"===i?u.a.createElement("div",{className:"j-error-tip ways-warning"},u.a.createElement("span",{className:"j-warning-icon"}),u.a.createElement("div",null,p.a.get("strx.stake_enough_resources"))):"-3"===i?u.a.createElement("div",{className:"j-error-tip ways-warning"},u.a.createElement("span",{className:"j-warning-icon"}),u.a.createElement("div",null,p.a.get("strx.stake_adjust_trx"),u.a.createElement("span",{className:"set-max",onClick:function(){return n.adjustTrx()}},p.a.getHTML("strx.stake_adjust_trx_btn",{value1:Object(j.k)(y,2),value2:w.a.sTRX.reserveTRX}),u.a.createElement("em",null)))):u.a.createElement("div",{className:"j-error-tip"},u.a.createElement("span",{className:"j-error-img"}),u.a.createElement("div",{className:"j-safe-text"},i)))),!M()(g).gt(0)&&u.a.createElement("div",{className:"j-time-tips"},p.a.getHTML("strx.energy_tips_1",{value:v()(M()(a||3).times(864e5).plus((new Date).getTime()).toNumber()).format("YYYY-MM-DD HH:mm")})))},n.inputFocus=function(){n.setState({showBalanceError:!0})},n.reserveTrx=function(){var e=n.props.strx.trxBalance;e=M()(e).div(w.a.trxPrecision),n.rentWaysRentInputChange(M()(e).minus(w.a.sTRX.reserveTRX))},n.adjustTrx=function(){var e=n.props.strx.trxBalance;e=M()(e).div(w.a.trxPrecision);var t=n.rentToTime(M()(e).minus(w.a.sTRX.reserveTRX),!0);n.rentWaysTimeInputChange(t)},n.judgeExpiredClear=function(){var e=n.props.strx,t=e.rentBalance,r=e.securityDeposit,a=n.getCurrentInfos(),o=a.fee,s=a.rentMoney;return{isExpired:M()(t).gt(0)&&!M()(r).minus(s).minus(o).gt(0),isClear:M()(t).gt(0)&&M()(r).eq(0)}},n.energyAddRender=function(){var e=n.state,t=e.rentAmountsStakeInputValue,r=e.rentAmountsEnergyInputValue,a=e.approving,o=e.showBalanceError,s=n.props.strx.marketData.energyStakePerTrx,i=n.props.strx.rentBalance,l=n.props.strx.trxBalance;l=M()(l).div(w.a.trxPrecision);var c=t||n.energyToTrx(),m=r||M()(c).times(s),g=n.getDynamicInfos(M()(c).plus(i),0,"addEnergy"),d=g.rentMoney,y=(g.fee,g.needToPayTrx),f=n.getCurrentInfos(),h=(f.rentDaysLeft,f.rentDaysLeftTrue),_=(M()(h).minus((new Date).getTime()).div(864e5),n.judgeExpiredClear().isExpired),E=n.getLearnUrl(),b=n.props.system.transModalInfo,N=n.props.lend.lang,T=b.declined,k=b.trnasType;return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"rent-content"},n.rentAmountsRender(),u.a.createElement("div",{className:"energy-infos no-padding"},u.a.createElement("div",{className:"add-after"},u.a.createElement("div",null,u.a.createElement("div",{className:"after-title"},Object(j.k)(M()(i).times(s),0)," ",p.a.get("strx.energy_energy_day")),u.a.createElement("div",{className:"after-subtitle date"},p.a.getHTML("strx.energy_withhold",{value:Object(j.k)(i,0)}))),u.a.createElement("div",{className:"add-to-icon"}),u.a.createElement("div",{className:"after-rent"},u.a.createElement("div",{className:"after-title pr"},Object(j.k)(M()(i).times(s).plus(m),0)," ",p.a.get("strx.energy_energy_day")),u.a.createElement("div",{className:"after-subtitle date"},p.a.getHTML("strx.energy_withhold",{value:Object(j.k)(M()(i).plus(c),0)}))))),u.a.createElement("div",{className:"j-time-tips"},_?p.a.get("strx.energy_rental_expired"):p.a.getHTML("strx.energy_tips_1",{value:M()(h).isNaN()?"--":v()(M()(h).toNumber()).format("YYYY-MM-DD HH:mm")})),u.a.createElement("div",{className:"energy-infos energy-infos-new mt20"},u.a.createElement("div",{className:"energy-info"},u.a.createElement("div",{className:"info-subtitle flex aic"},p.a.get("strx.energy_prepay")," ",u.a.createElement(W.a,{className:"learn-more ml-10",href:E,target:"_blank",rel:"noopener noreferrer"},p.a.get("strx.energy_fee_compute_rule"))),u.a.createElement("div",{className:"pay-amount ellipsis fw600"+(M()(y).gt(l)&&o?" pay-error":"")},Object(j.k)(y,w.a.trxDecimal)," TRX")),u.a.createElement("div",{className:"energy-info"},u.a.createElement("div",{className:"info-subtitle flex ".concat(N)},u.a.createElement(x.a,{title:p.a.getHTML("strx.energy_tips_4"),placement:"top",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown"},u.a.createElement("span",{className:"j-tooltip-icon mr-6"})),u.a.createElement(V.a,{title:p.a.getHTML("strx.energy_tips_4"),placement:"topLeft",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown"},p.a.get("strx.energy_prepay_tips1")),u.a.createElement("br",null),p.a.get("strx.energy_prepay_tips2")),u.a.createElement("div",{className:"pay-amount-sub ellipsis"},M()(d).eq(0)?0:Object(j.k)(d,w.a.trxDecimal)," TRX")),u.a.createElement("div",{className:"energy-info"},u.a.createElement("div",{className:"info-subtitle flex ".concat(N)},u.a.createElement(x.a,{title:u.a.createElement(u.a.Fragment,null,p.a.getHTML("strx.energy_tips_5")," ",u.a.createElement("a",{className:"learn-more",href:E,target:"_blank",rel:"noopener noreferrer"},p.a.get("strx.energy_lerna_more"))),placement:"top",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown"},u.a.createElement("span",{className:"j-tooltip-icon mr-6"})),p.a.getHTML("strx.energy_rent_money_tips")),u.a.createElement("div",{className:"pay-amount-sub ellipsis"},M()(y).minus(d).eq(0)?0:Object(j.k)(M()(y).minus(d),w.a.trxDecimal)," ","TRX"))),a?u.a.createElement("button",{className:"j-large-btn j-supply rent-now j-signing",disabled:!0},p.a.get("v2.sign_in_wallet"),u.a.createElement("span",{className:"siging-icon"})):u.a.createElement("button",{className:"j-large-btn j-supply rent-now",disabled:n.state.rentAmountsErrorMsg||M()(y).gt(l)&&o||_,onClick:function(){return n.rentResource(c,y,"addEnergy")}},p.a.get("strx.energy_config_extend")),T&&"addEnergy"===k&&u.a.createElement("div",{className:"j-error-tip wallet-reject"},u.a.createElement("span",{className:"j-error-img"}),u.a.createElement("div",null,p.a.get("v2.reject_in_wallet"))),_?u.a.createElement("div",{className:"j-error-tip wallet-reject"},u.a.createElement("span",{className:"j-error-img"}),u.a.createElement("div",null,p.a.get("strx.expired_tip"))):M()(y).gt(l)&&o&&u.a.createElement("div",{className:"j-error-tip wallet-reject"},u.a.createElement("span",{className:"j-error-img"}),u.a.createElement("div",null,p.a.getHTML("strx.energy_insufficient_balance",{value:Object(j.k)(l,w.a.trxDecimal)})))))},n.timeAddRender=function(){var e=n.judgeExpiredClear().isExpired,t=n.state,r=t.rentWaysTimeInputValue,a=t.rentWaysRentInputValue,o=t.approving,s=t.rentWaysSelectValue,i=t.defaultRent,l=t.showBalanceError,c=n.props.network.isConnected,m=(n.props.strx.marketData.energyStakePerTrx,n.props.strx),g=(m.rentBalance,m.securityDeposit,n.props.strx.trxBalance);g=M()(g).div(w.a.trxPrecision);var d=r||3,y=a||i,f=n.getCurrentInfos(),h=(f.fee,f.rate,f.rentPerDay,f.rentDaysLeft),_=f.rentDaysLeftTrue,E=(f.rentMoney,e?M()(h).minus((new Date).getTime()).plus(M()(d).times(864e5)).div(1e3):M()(d).times(86400)),b=n.getDynamicInfos(0,E,"addTime").needToPayTrx,N="3"===s?y:b,T=e?M()((new Date).getTime()).plus(M()(d).times(864e5)):M()(h).plus(M()(d).times(864e5)),k=Object(j.pb)(e?(new Date).getTime():M()(h)),R=k.days,O=k.hours,L=k.mins,I=Object(j.pb)(T),C=I.days,S=I.hours,D=I.mins,A=n.props.system.transModalInfo,P=n.props.lend.lang,X=A.declined,F=A.trnasType,H=n.getLearnUrl();return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"rent-content"},u.a.createElement("div",{className:"rent-labels jce"},u.a.createElement("span",{className:"rent-days-title"},p.a.get("strx.energy_available_balance"),":"),u.a.createElement("span",{className:"rent-days-value"}," ",c?Object(j.k)(g,w.a.trxDecimal):"--"," TRX")),n.rentWaysRender(),u.a.createElement("div",{className:"energy-infos no-padding"},u.a.createElement("div",{className:"add-after"},u.a.createElement("div",null,u.a.createElement("div",{className:"after-title"},M()(h).isNaN()?"--":p.a.getHTML("strx.energy_d_h_m",{value1:R,value2:O,value3:L})),u.a.createElement("div",{className:"after-subtitle date"},p.a.getHTML("strx.energy_expired",{value:M()(_).isNaN()?"--":v()(M()(_).toNumber()).format("YYYY-MM-DD HH:mm")}))),u.a.createElement("div",{className:"add-to-icon"}),u.a.createElement("div",{className:"after-rent"},u.a.createElement("div",{className:"after-title"},u.a.createElement("div",{className:"after-title-with-go-up"},M()(h).isNaN()?"--":p.a.getHTML("strx.energy_d_h_m",{value1:C,value2:S,value3:D})," ")),u.a.createElement("div",{className:"after-subtitle date"},p.a.getHTML("strx.energy_expired",{value:M()(h).isNaN()?"--":v()(e?(new Date).getTime():M()(h).toNumber()).add(M()(d).times(864e5),"milliseconds").format("YYYY-MM-DD HH:mm")}))))),u.a.createElement("div",{className:"energy-infos energy-infos-new mt20"},u.a.createElement("div",{className:"energy-info"},u.a.createElement("div",{className:"info-subtitle flex aic"},p.a.get("strx.energy_prepay")," ",u.a.createElement(W.a,{className:"learn-more ml-10",href:H,target:"_blank",rel:"noopener noreferrer"},p.a.get("strx.energy_fee_compute_rule"))),u.a.createElement("div",{className:"pay-amount ellipsis fw600"+(M()(b).gt(g)&&l?" pay-error":"")},Object(j.k)(b,w.a.trxDecimal)," TRX")),u.a.createElement("div",{className:"energy-info"},u.a.createElement("div",{className:"info-subtitle flex ".concat(P)},u.a.createElement(x.a,{title:p.a.getHTML("strx.energy_tips_4"),placement:"top",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown"},u.a.createElement("span",{className:"j-tooltip-icon mr-6"})),u.a.createElement(V.a,{title:p.a.getHTML("strx.energy_tips_4"),placement:"topLeft",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown"},p.a.get("strx.energy_prepay_tips1")),u.a.createElement("br",null),p.a.get("strx.energy_prepay_tips2")),u.a.createElement("div",{className:"pay-amount-sub ellipsis"},M()(N).eq(0)?0:Object(j.k)(N,w.a.trxDecimal)," TRX")),u.a.createElement("div",{className:"energy-info"},u.a.createElement("div",{className:"info-subtitle flex ".concat(P)},u.a.createElement(x.a,{title:u.a.createElement(u.a.Fragment,null,p.a.getHTML("strx.energy_tips_5")," ",u.a.createElement("a",{className:"learn-more",href:H,target:"_blank",rel:"noopener noreferrer"},p.a.get("strx.energy_lerna_more"))),placement:"top",arrowPointAtCenter:!0,overlayClassName:"j-tooltip-dropdown"},u.a.createElement("span",{className:"j-tooltip-icon mr-6"})),p.a.getHTML("strx.energy_rent_money_tips")),u.a.createElement("div",{className:"pay-amount-sub ellipsis"},p.a.get("strx.energy_no_need_pay")))),o?u.a.createElement("button",{className:"j-large-btn j-supply rent-now j-signing",disabled:!0},p.a.get("v2.sign_in_wallet"),u.a.createElement("span",{className:"siging-icon"})):u.a.createElement("button",{className:"j-large-btn j-supply rent-now",disabled:(n.state.rentWaysErrorMsg&&!["-1","-2","-3"].includes(n.state.rentWaysErrorMsg)||M()(N).gt(g))&&l,onClick:function(){return n.rentResource(0,N,"addTime")}},p.a.get("strx.energy_config_extend")),X&&"addTime"===F&&u.a.createElement("div",{className:"j-error-tip wallet-reject"},u.a.createElement("span",{className:"j-error-img"}),u.a.createElement("div",null,p.a.get("v2.reject_in_wallet"))),M()(N).gt(g)&&l&&u.a.createElement("div",{className:"j-error-tip wallet-reject"},u.a.createElement("span",{className:"j-error-img"}),u.a.createElement("div",null,p.a.getHTML("strx.energy_insufficient_balance",{value:Object(j.k)(g,w.a.trxDecimal)})))))},n.energyRender=function(){var e=n.props.strx.rentBalance,t=n.props.network,r=t.isConnected;t.defaultAccount;return M()(e).gt(0)&&r?u.a.createElement(u.a.Fragment,null,n.rentInfo(),n.rentForm()):u.a.createElement(u.a.Fragment,null,n.rentInfoNotLogin(),n.rentFormNotLogin())},n.rentResource=function(){var e=Object(a.a)(X().mark((function e(t,r,a){var o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"addTime"===a?gtag("event","click",{event_category:"sTRX",event_label:"energy_rent_extend_time_button"}):"addEnergy"===a?gtag("event","click",{event_category:"sTRX",event_label:"energy_rent_extend_energy_button"}):gtag("event","click",{event_category:"sTRX",event_label:"energy_rent_button"}),0!==n.props.network.isRightChain){e.next=5;break}return n.props.network.changeChain(),e.abrupt("return");case 5:if(!n.props.strx.rentPaused){e.next=7;break}return e.abrupt("return",n.props.strx.setData({rentPausedVisible:!0}));case 7:return n.props.system.clearRejectError(),o={title:"v2.transaction_confirm",title2:"deposit.transactionsent",title3:"v2.transaction_confirm_fail",title4:"deposit.confirm_transaction",obj:{value:Object(j.k)(r,w.a.trxDecimal),token:"TRX"},trnasType:a||"rentResource"},n.setState({approving:!0}),e.next=12,n.props.system.rentResource(window.defaultAccount,M()(t).times(w.a.trxPrecision)._toFixed(0,1),1,new M.a(r).times(w.a.trxPrecision)._toFixed(0,1),o);case 12:e.sent&&("addTime"===a?gtag("event","click",{event_category:"sTRX",event_label:"energy_rent_extend_time_success"}):"addEnergy"===a?gtag("event","click",{event_category:"sTRX",event_label:"energy_rent_extend_energy_success"}):gtag("event","click",{event_category:"sTRX",event_label:"energy_rent_success"}),setTimeout((function(){n.initForm(),n.props.strx.getUserTrxBalance(),n.props.strx.getAccountRentInfos(),n.props.strx.getNotAccountRentInfos()}),5e3)),n.setState({approving:!1}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log("error: rentResource");case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,r,n){return e.apply(this,arguments)}}(),n.returnSource=function(){try{if(gtag("event","click",{event_category:"sTRX",event_label:"energy_return_source"}),0===n.props.network.isRightChain)return void n.props.network.changeChain();var e=n.props.strx,t=e.rentBalance,r=e.marketData,a=n.getCurrentInfos(),o=a.rentMoney,s=a.rentDaysLeft,i=a.fee,l=a.rentPerDay,c=n.judgeExpiredClear().isExpired;n.setState({returnSourceInfo:{rentMoney:o,rentDaysLeft:s,fee:i,rentPerDay:l,totalEnergy:M()(t).times(null===r||void 0===r?void 0:r.energyStakePerTrx),isExpired:c}}),n.props.strx.setData({returnResourceVisible:!0})}catch(u){console.log("error: returnSource")}},n.state={marketData:{trx1wEnergy:"--",model:[]},lang:window.localStorage.getItem("lang")||p.a.options.currentLocale,mobile:Object(g.a)(window.navigator).any,rentInfo:{},tabValue:"energy",rentAmountsSelectValue:"0",rentAmountsEnergyInputValue:"",rentAmountsEnergyInputDecimal:0,rentAmountsStakeInputValue:"",rentAmountsStakeInputDecimal:0,rentWaysSelectValue:"2",rentWaysTimeInputValue:"",rentWaysTimeInputDecimal:1,rentWaysRentInputValue:"",rentWaysRentInputDecimal:6,rentPerDay:0,rentYjn:0,rentDaysArray:[1,30],rentDaysLeftStatus:!0,approving:!1,returnSourceInfo:{},rentAmountsErrorMsg:"",rentWaysErrorMsg:"",defaultRent:"",showBalanceError:!1,energyFocused:!1},n}return Object(s.a)(r,[{key:"componentWillUnmount",value:function(){this.props.system.clearRejectError(),this.props.strx.clearVariablesInterval()}},{key:"render",value:function(){var e=this.props.lend.theme,t=this.state,r=t.returnSourceInfo,n=(t.lang,this.props.strx.marketData),a=this.getAnnouncementUrl(),o=this.getLearnUrl();return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"j-wrapper "+e},u.a.createElement(f.a,{instantActions:this.getMarketData,mountedActions:this.getUserData}),u.a.createElement("div",{className:"j-stake-container j-energy-rent"},u.a.createElement("div",{className:"j-liquidity-stake "},u.a.createElement("div",{className:"top-header"},u.a.createElement("div",{className:"title energy-rent-title"},p.a.get("strx.energy_rental")),u.a.createElement("div",{className:"info"},u.a.createElement("div",{className:"desc"},p.a.get("strx.energy_rental_desc"),u.a.createElement("a",{className:"learn-more",href:o,target:"_blank",rel:"noopener noreferrer",onClick:gtag("event","click",{event_category:"sTRX",event_label:"energy_learn_more"})},p.a.get("strx.energy_lerna_more"),u.a.createElement("em",null))),u.a.createElement("div",{className:"announce"},u.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer",onClick:gtag("event","click",{event_category:"sTRX",event_label:"energy_announce"})},p.a.get("strx.announce_text")),u.a.createElement("em",null))))),u.a.createElement("div",{className:"j-eles"},this.energyRender()),u.a.createElement(P.a,{data:n,type:"energy"})),u.a.createElement(h.a,null)),u.a.createElement(O,{returnSourceInfo:r,callback:this.initForm}),u.a.createElement(D,null),u.a.createElement(b.a,null))}}]),r}(u.a.Component))||R)||R)||R)||R)||R)||R;function B(){B=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",i=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(R){l=function(e,t,r){return e[t]=r}}function c(e,t,r,a){var o=t&&t.prototype instanceof p?t:p,s=Object.create(o.prototype),i=new w(a||[]);return n(s,"_invoke",{value:E(e,r,i)}),s}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(R){return{type:"throw",arg:R}}}e.wrap=c;var m={};function p(){}function g(){}function d(){}var y={};l(y,o,(function(){return this}));var v=Object.getPrototypeOf,f=v&&v(v(T([])));f&&f!==t&&r.call(f,o)&&(y=f);var h=d.prototype=p.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){var a;n(this,"_invoke",{value:function(n,o){function s(){return new t((function(a,s){!function n(a,o,s,i){var l=u(e[a],e,o);if("throw"!==l.type){var c=l.arg,m=c.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(m).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,i)}))}i(l.arg)}(n,o,a,s)}))}return a=a?a.then(s,s):s()}})}function E(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return k()}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var i=b(s,r);if(i){if(i===m)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function b(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,m;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return g.prototype=d,n(h,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:g,configurable:!0}),g.displayName=l(d,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,l(e,i,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},_(x.prototype),l(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var s=new x(c(t,r,n,a),o);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},_(h),l(h,i,"Generator"),l(h,o,(function(){return this})),l(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),m}},e}var Y=Object(d.b)("network")(F=Object(d.c)(F=function(e){Object(i.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this,e)).componentDidMount=Object(a.a)(B().mark((function e(){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.network.setData({routeName:"EnergyRent"});case 1:case"end":return e.stop()}}),e)}))),n}return Object(s.a)(r,[{key:"render",value:function(){return u.a.createElement(H,null)}}]),r}(u.a.Component))||F)||F;t.default=Y}}]);