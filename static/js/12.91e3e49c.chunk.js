/*! For license information please see 12.91e3e49c.chunk.js.LICENSE.txt */
(this["webpackJsonpjustlend-front"]=this["webpackJsonpjustlend-front"]||[]).push([[12],{1552:function(e,t,a){},1565:function(e,t,a){"use strict";var n,r=a(3),o=a(9),c=a(10),i=a(17),l=a(18),s=a(0),u=a.n(s),v=(a(59),a(23)),d=a(1),p=a(241),m=a(2),h=a.n(m),f=a(8);a(454),a(1546);function g(){g=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",c=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(S){l=function(e,t,a){return e[t]=a}}function s(e,t,a,r){var o=t&&t.prototype instanceof d?t:d,c=Object.create(o.prototype),i=new k(r||[]);return n(c,"_invoke",{value:_(e,a,i)}),c}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(S){return{type:"throw",arg:S}}}e.wrap=s;var v={};function d(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var f=Object.getPrototypeOf,y=f&&f(f(O([])));y&&y!==t&&a.call(y,o)&&(h=y);var b=m.prototype=d.prototype=Object.create(h);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var r;n(this,"_invoke",{value:function(n,o){function c(){return new t((function(r,c){!function n(r,o,c,i){var l=u(e[r],e,o);if("throw"!==l.type){var s=l.arg,v=s.value;return v&&"object"==typeof v&&a.call(v,"__await")?t.resolve(v.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(v).then((function(e){s.value=e,c(s)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(n,o,r,c)}))}return r=r?r.then(c,c):c()}})}function _(e,t,a){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return V()}for(a.method=r,a.arg=o;;){var c=a.delegate;if(c){var i=N(c,a);if(i){if(i===v)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var l=u(e,t,a);if("normal"===l.type){if(n=a.done?"completed":"suspendedYield",l.arg===v)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(n="completed",a.method="throw",a.arg=l.arg)}}}function N(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,N(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),v;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,v;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,v):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:V}}function V(){return{value:void 0,done:!0}}return p.prototype=m,n(b,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,i,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(E.prototype),l(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,r,o){void 0===o&&(o=Promise);var c=new E(s(t,a,n,r),o);return e.isGeneratorFunction(a)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},w(b),l(b,i,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return c.type="throw",c.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),x(a),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;x(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:O(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),v}},e}var y=Object(v.b)("network")(n=Object(v.b)("lend")(n=Object(v.b)("system")(n=Object(v.c)(n=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).startInterval=Object(r.a)(g().mark((function t(){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.timerInterval||(e.timerInterval=setInterval(Object(r.a)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),3e3));case 1:case"end":return t.stop()}}),t)}))),e.componentDidMount=function(){e.startInterval()},e.withdrawVotes=function(){var t=Object(r.a)(g().mark((function t(a){var n,r,o,c;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return gtag("event","click",{event_category:"PC_V1.5",event_label:"recycle_votes_modal"}),e.setState({clickProposalId:a}),e.props.system.clearRejectError(),n=f.b.oldVoteLastId,r=a<=n?f.b.contract.oldWJSTAddress:f.b.contract.WJSTAddress,c={title:"toast.ex",title2:"deposit.transactionsent",title3:"toast.ex_failed",title4:"deposit.confirm_transaction",obj:{value:(o={proposalId:a,contractAddr:r}).votes,token:o.proposalId||""},trnasType:"withdrawVotes"},t.next=9,e.props.system.withdrawVotes(o,c);case 9:t.sent?(gtag("event","click",{event_category:"PC_V1.5",event_label:"recycle_votes_modal_success"}),e.props.lend.setData({redeemFromVotePop:!1}),e.setState({clickProposalId:""})):e.setState({clickProposalId:""});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderVoting=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.props.lend.voteSourceData,r=e.state,o=r.lang,c=r.clickProposalId;if((null===t||void 0===t?void 0:t.length)>0)return null===t||void 0===t?void 0:t.map((function(t,r){var i;return u.a.createElement("div",{className:"vote-detail-item",key:r},u.a.createElement("div",{className:"proposalId"},"#",null===t||void 0===t?void 0:t.proposalId),u.a.createElement("div",{className:"title "+("en-US"===o?"":"zh")},n&&(null===(i=n[null===t||void 0===t?void 0:t.proposalId])||void 0===i?void 0:i.title)?"en-US"===o?n[t.proposalId].title.split("&&")[1]:n[t.proposalId].title.split("&&")[0]:""),u.a.createElement("div",{className:"amount ellipsis",title:Object(d.k)(t.allVotes,3)},Object(d.k)(t.allVotes,3)),a&&(c?c===t.proposalId?u.a.createElement("div",{className:"link disabled"},u.a.createElement("span",{className:"siging-icon"})):u.a.createElement("div",{className:"link disabled"},h.a.get("v2.vote.redeem_vote_btn")):u.a.createElement("div",{className:"link",onClick:function(){return e.withdrawVotes(t.proposalId)}},h.a.get("v2.vote.redeem_vote_btn"))))}))},e.timerInterval=null,e.state={lang:window.localStorage.getItem("lang")||h.a.options.currentLocale,visible:!1,clickProposalId:""},e}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){clearInterval(this.timerInterval),this.timerInterval=null}},{key:"render",value:function(){var e=this,t=this.props.lend,a=t.userCanRedeemVoteList,n=t.userVotingVote,r=t.voteDetailModalVisible,o=t.userCanRedeemVoteNum,c=t.theme,i=this.state.clickProposalId,l=this.props.system.transModalInfo,s=l.declined,v=l.trnasType,m=Object(d.a)(o).eq(0)?0:Object(d.k)(o,3,{miniText:.001});return u.a.createElement(p.a,{title:h.a.get("v2.vote.recovered_vote"),maskClosable:!1,visible:r,closable:!0,onCancel:function(){e.props.system.clearRejectError(),e.props.lend.setData({voteDetailModalVisible:!1}),gtag("event","click",{event_category:"PC_V1.5",event_label:"recycle_votes_close"})},footer:null,className:"vote-detail-modal-v2 ".concat(c),width:457,centered:!0},u.a.createElement("div",{className:"tick-vote-logo"}),u.a.createElement("p",{className:"redeemNum"},h.a.getHTML("v2.vote.recover_vote",{value:m})),n&&(null===n||void 0===n?void 0:n.length)>0||a&&(null===a||void 0===a?void 0:a.length)>0?u.a.createElement("div",{className:"vote-detail-container"},a.length>4&&u.a.createElement("div",{className:"linear"}),a&&(null===a||void 0===a?void 0:a.length)>0&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"box"},this.renderVoting(a,!0))),i?u.a.createElement("div",{className:"info"},u.a.createElement("div",{className:"j-sign-tip flex aic jcc"},u.a.createElement("span",{className:"j-warning-icon"}),u.a.createElement("span",null,h.a.get("v2.sign_in_wallet")))):s&&"withdrawVotes"===v&&u.a.createElement("div",{className:"info"},u.a.createElement("div",{className:"j-reject-tip"},u.a.createElement("span",{className:"j-reject-img mt-3"}),u.a.createElement("span",null,h.a.get("v2.reject_in_wallet"))))):null)}}]),a}(u.a.Component))||n)||n)||n)||n;t.a=y},1622:function(e,t,a){},1633:function(e,t,a){"use strict";a.r(t);var n,r=a(9),o=a(10),c=a(17),i=a(18),l=a(0),s=a.n(l),u=a(23),v=a(456),d=a(458),p=a(34),m=a(3),h=a(40),f=a(7),g=a(4),y=a(14),b=a.n(y),w=a(124),E=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},_=function(e){return l.createElement(w.a,null,(function(t){var a,n=t.getPrefixCls,r=t.direction,o=e.prefixCls,c=e.type,i=void 0===c?"horizontal":c,s=e.orientation,u=void 0===s?"center":s,v=e.className,d=e.children,p=e.dashed,m=e.plain,h=E(e,["prefixCls","type","orientation","className","children","dashed","plain"]),y=n("divider",o),w=u.length>0?"-".concat(u):u,_=!!d,N=b()(y,"".concat(y,"-").concat(i),(a={},Object(g.a)(a,"".concat(y,"-with-text"),_),Object(g.a)(a,"".concat(y,"-with-text").concat(w),_),Object(g.a)(a,"".concat(y,"-dashed"),!!p),Object(g.a)(a,"".concat(y,"-plain"),!!m),Object(g.a)(a,"".concat(y,"-rtl"),"rtl"===r),a),v);return l.createElement("div",Object(f.a)({className:N},h,{role:"separator"}),d&&l.createElement("span",{className:"".concat(y,"-inner-text")},d))}))},N=a(369),j=a(105),x=a(241),k=a(2),O=a.n(k),V=(a(1622),a(8)),S=a(1);a(59),a(454),a(1546);function P(){P=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",c=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(V){l=function(e,t,a){return e[t]=a}}function s(e,t,a,r){var o=t&&t.prototype instanceof d?t:d,c=Object.create(o.prototype),i=new x(r||[]);return n(c,"_invoke",{value:E(e,a,i)}),c}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(V){return{type:"throw",arg:V}}}e.wrap=s;var v={};function d(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var f=Object.getPrototypeOf,g=f&&f(f(k([])));g&&g!==t&&a.call(g,o)&&(h=g);var y=m.prototype=d.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;n(this,"_invoke",{value:function(n,o){function c(){return new t((function(r,c){!function n(r,o,c,i){var l=u(e[r],e,o);if("throw"!==l.type){var s=l.arg,v=s.value;return v&&"object"==typeof v&&a.call(v,"__await")?t.resolve(v.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(v).then((function(e){s.value=e,c(s)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(n,o,r,c)}))}return r=r?r.then(c,c):c()}})}function E(e,t,a){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return O()}for(a.method=r,a.arg=o;;){var c=a.delegate;if(c){var i=_(c,a);if(i){if(i===v)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var l=u(e,t,a);if("normal"===l.type){if(n=a.done?"completed":"suspendedYield",l.arg===v)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(n="completed",a.method="throw",a.arg=l.arg)}}}function _(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),v;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,v;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,v):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=m,n(y,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(w.prototype),l(w.prototype,c,(function(){return this})),e.AsyncIterator=w,e.async=function(t,a,n,r,o){void 0===o&&(o=Promise);var c=new w(s(t,a,n,r),o);return e.isGeneratorFunction(a)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},b(y),l(y,i,"Generator"),l(y,o,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return c.type="throw",c.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;j(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:k(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),v}},e}var L,C=Object(u.b)("network")(n=Object(u.b)("lend")(n=Object(u.b)("system")(n=Object(u.c)(n=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).startInterval=Object(m.a)(P().mark((function t(){return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.timerInterval||(e.timerInterval=setInterval(Object(m.a)(P().mark((function e(){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),3e3));case 1:case"end":return t.stop()}}),t)}))),e.componentDidMount=function(){e.startInterval()},e.closeOldAndOpenNewModal=function(){e.props.lend.setData({voteOldWithdrawModalVisible:!1}),gtag("event","click",{event_category:"PC_V1.5",event_label:"invalid_vote_close"})},e.toWithdraw=function(){var t=Object(m.a)(P().mark((function t(a){var n,r;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return gtag("event","click",{event_category:"PC_V1.5",event_label:"invalid_vote_btn"}),n={collateralAddress:V.b.contract.JST,jtokenAddress:V.b.contract.oldWJSTAddress,amount:Object(S.a)(a).times(V.b.tokenDefaultPrecision)._toHex()},r={title:"toast.ex",title2:"deposit.transactionsent",title3:"toast.ex_failed",title4:"deposit.confirm_transaction",obj:{value:n.collateralSymbol},trnasType:"voteWithdraw"},e.setState({isSuccess:!1,txID:"",approving:!0}),t.next=6,e.props.system.voteWithdraw(n,r);case 6:t.sent&&e.props.lend.setData({voteOldWithdrawModalVisible:!1}),e.setState({approving:!1});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.timerInterval=null,e.state={lang:window.localStorage.getItem("lang")||O.a.options.currentLocale,visible:!1,approving:!1},e}return Object(o.a)(a,[{key:"componentWillUnmount",value:function(){clearInterval(this.timerInterval),this.timerInterval=null}},{key:"render",value:function(){var e=this,t=this.props.lend,a=t.oldVoteInfo,n=t.voteOldWithdrawModalVisible,r=t.theme,o=this.state.approving,c=this.props.system.transModalInfo,i=c.declined,l=c.trnasType;return s.a.createElement(x.a,{title:O.a.get("v2.vote.redeem_votes"),maskClosable:!1,visible:n,closable:!0,onCancel:function(){e.props.system.clearRejectError(),e.closeOldAndOpenNewModal()},footer:null,width:400,centered:!0,className:"vote-old-withdraw-modal-v2 ".concat(r)},s.a.createElement("div",{className:"vote-old-withdraw-content"},s.a.createElement("div",{className:"tick-vote-logo"}),s.a.createElement("div",{className:"title"},O.a.get("v2.vote.redeem_to_get")),s.a.createElement("div",{className:"amount"},a&&a.success&&(null===a||void 0===a?void 0:a.surplusVotes.div(V.b.tokenDefaultPrecision).toString())," ","JST"),s.a.createElement("div",{className:"desc"},O.a.get("v2.vote.redeem_invalid_vote")),o?s.a.createElement("button",{className:"j-large-btn j-supply j-signing",disabled:!0},O.a.get("v2.sign_in_wallet"),s.a.createElement("span",{className:"siging-icon"})):s.a.createElement("button",{className:"j-large-btn j-supply",onClick:function(){return e.toWithdraw(a&&a.success&&(null===a||void 0===a?void 0:a.surplusVotes.div(V.b.tokenDefaultPrecision)))}},O.a.get("v2.vote.redeem_now")),i&&"voteWithdraw"===l&&s.a.createElement("div",{className:"j-error-tip wallet-reject"},s.a.createElement("span",{className:"j-error-img"}),s.a.createElement("div",null,O.a.get("v2.reject_in_wallet")))))}}]),a}(s.a.Component))||n)||n)||n)||n,I=a(457),T=a(1565);function D(){D=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",c=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(V){l=function(e,t,a){return e[t]=a}}function s(e,t,a,r){var o=t&&t.prototype instanceof d?t:d,c=Object.create(o.prototype),i=new x(r||[]);return n(c,"_invoke",{value:E(e,a,i)}),c}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(V){return{type:"throw",arg:V}}}e.wrap=s;var v={};function d(){}function p(){}function m(){}var h={};l(h,o,(function(){return this}));var f=Object.getPrototypeOf,g=f&&f(f(k([])));g&&g!==t&&a.call(g,o)&&(h=g);var y=m.prototype=d.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;n(this,"_invoke",{value:function(n,o){function c(){return new t((function(r,c){!function n(r,o,c,i){var l=u(e[r],e,o);if("throw"!==l.type){var s=l.arg,v=s.value;return v&&"object"==typeof v&&a.call(v,"__await")?t.resolve(v.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(v).then((function(e){s.value=e,c(s)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(n,o,r,c)}))}return r=r?r.then(c,c):c()}})}function E(e,t,a){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return O()}for(a.method=r,a.arg=o;;){var c=a.delegate;if(c){var i=_(c,a);if(i){if(i===v)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var l=u(e,t,a);if("normal"===l.type){if(n=a.done?"completed":"suspendedYield",l.arg===v)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(n="completed",a.method="throw",a.arg=l.arg)}}}function _(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),v;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,v;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,v):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=m,n(y,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(w.prototype),l(w.prototype,c,(function(){return this})),e.AsyncIterator=w,e.async=function(t,a,n,r,o){void 0===o&&(o=Promise);var c=new w(s(t,a,n,r),o);return e.isGeneratorFunction(a)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},b(y),l(y,i,"Generator"),l(y,o,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return c.type="throw",c.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;j(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:k(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),v}},e}var M,F,A=function(){return s.a.createElement("div",{className:"step-container"},s.a.createElement("div",{className:"left-steps"},Object(h.a)(Array(3).keys()).map((function(e){return e++,s.a.createElement("div",{className:"step",key:e},s.a.createElement("div",{className:"step-number"},e),s.a.createElement("div",{className:"step-text-box"},s.a.createElement("div",{className:"step-title"},O.a.get("v2.vote.step".concat(e,"_title"))),s.a.createElement("div",{className:"step-desc"},O.a.get("v2.vote.step".concat(e,"_desc")))),e<=2&&s.a.createElement("div",{className:"step-arrow"}))}))),s.a.createElement("div",{className:"right-forum"},s.a.createElement("div",{className:"forum-title"},O.a.get("v2.vote.forum_title")),s.a.createElement("span",null,s.a.createElement("a",{href:"https://forum.justlend.org",target:"_blank",className:"forum-desc hover",onClick:gtag("event","click",{event_category:"PC_V1.5",event_label:"join_discussion"})},O.a.get("v2.vote.forum_desc")),s.a.createElement("div",{className:"purple-right-arrow"}))))},W=function(e){var t=e.lang,a="en-US"===t,n="zh-TC"===t;return s.a.createElement("div",{className:"faq-container"},s.a.createElement("div",{className:"faq-header"},s.a.createElement("div",{className:"faq-title"},O.a.get("v2.vote.faq")),s.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://justlendorg.zendesk.com/hc/".concat(a?"en-us":"zh-cn","/sections/360011296312"),className:"faq-more",onClick:gtag("event","click",{event_category:"PC_V1.5",event_label:"vote_faq_more"})},O.a.get("more"))),s.a.createElement(_,null),s.a.createElement("div",{className:"faq-body"},s.a.createElement("ul",null,[{url:function(e){return"https://justlendorg.zendesk.com/hc/".concat(e?"en-us":"zh-cn","/articles/360053116731")},title:function(e,t){return e?"How to get more votes?":t?"\u5982\u4f55\u514c\u63db\u9078\u7968\uff1f":"\u5982\u4f55\u5151\u6362\u9009\u7968\uff1f"}},{url:function(e){return"https://justlendorg.zendesk.com/hc/".concat(e?"en-us":"zh-cn","/articles/360053116751")},title:function(e,t){return e?"How to vote on a proposal?":t?"\u5982\u4f55\u9032\u884c\u6295\u7968\uff1f":"\u5982\u4f55\u8fdb\u884c\u6295\u7968\uff1f"}},{url:function(e){return"https://justlendorg.zendesk.com/hc/".concat(e?"en-us":"zh-cn","/articles/360052662212")},title:function(e,t){return e?"How to convert my votes back to JST?":t?"\u5982\u4f55\u8d16\u56de\u9078\u7968\uff1f":"\u5982\u4f55\u8d4e\u56de\u9009\u7968\uff1f"}}].map((function(e,t){return s.a.createElement("li",{key:t},s.a.createElement("a",{href:e.url(a),target:"_blank",rel:"noopener noreferrer",onClick:gtag("event","click",{event_category:"PC_V1.5",event_label:"vote_faq_link"})},e.title(a,n)))})))))},G=function(e){var t=(100*e).toFixed(2);return 0==t&&0!=e?"<0.01":100==t&&1!=e?"99.99":t},z=function(e){var t=e.forVotes,a=e.againstVotes,n=(t=parseInt(t))+(a=parseInt(a));return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"p-vote-bar hide-md"},s.a.createElement("div",{className:"p-for hide-md "},0===n?"0%":G(t/n)+"%"),0!==t&&s.a.createElement("div",{className:"p-for-bar hide-md "+(t/n>=1?" per100":""),style:{width:"".concat(22+t/n*128,"px")}}),0!==a&&s.a.createElement("div",{className:"p-against-bar hide-md "+(a/n>=1?" per100":""),style:{width:"".concat(22+a/n*128,"px")}}),0===t&&0===a&&s.a.createElement("div",{className:"p-default-bar",style:{width:"150px"}}),s.a.createElement("div",{className:"p-against hide-md "},0===n?"0%":G(a/n)+"%")),s.a.createElement("div",{className:"p-vote-bar hide-lg"},s.a.createElement("div",{className:"bar-first-row hide-lg"},s.a.createElement("div",{className:"p-for"},0===n?"0%":G(t/n)+"%"),s.a.createElement("div",{className:"p-against"},0===n?"0%":G(a/n)+"%")),s.a.createElement("div",{className:"bar-second-row"},s.a.createElement("div",{className:"p-for-bar hide-lg",style:{width:"".concat(12.5+t/n*105,"px")}}),s.a.createElement("div",{className:"p-against-bar hide-lg",style:{width:"".concat(12.5+a/n*105,"px")}}))))},J=Object(u.b)("network")(L=Object(u.b)("system")(L=Object(u.b)("lend")(L=Object(u.c)(L=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){var n,o;return Object(r.a)(this,a),(o=t.call(this,e)).componentDidMount=Object(m.a)(D().mark((function e(){var t,a,n,r;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.title="Vote - JustLend DAO",o.props.lend.setData({voteForPop:!1,redeemFromVotePop:!1}),e.prev=2,e.next=5,o.props.lend.getCurrentBlock();case 5:return a=e.sent,e.next=8,o.props.lend.getVoteList(a);case 8:n=e.sent,o.setState({dataList:n.arr}),r=null===(t=n.arr)||void 0===t?void 0:t[0],o.props.lend.getVoteDetail(null===r||void 0===r?void 0:r.id),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.log("getVoteList: ",e.t0);case 17:o.props.network.on("connect",(function(){o.getMountedData()})),o.props.network.isConnected&&o.getMountedData(),gtag("event","pageView",{event_category:"PC_V1.5",event_label:"vote-new"});case 20:case"end":return e.stop()}}),e,null,[[2,14]])}))),o.getMountedData=Object(m.a)(D().mark((function e(){var t;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.getApprove();case 3:t=e.sent,o.setState({approveStatus:t},(function(){o.props.lend.getBalanceForVote(),o.props.lend.getOldWjstBalanceForVote(),o.startInterval()})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("getVoteDataError: ",e.t0);case 10:return e.next=12,o.props.lend.getUserWithdrawInfo();case 12:case"end":return e.stop()}}),e,null,[[0,7]])}))),o.startInterval=Object(m.a)(D().mark((function e(){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.timerInterval||(o.timerInterval=setInterval(Object(m.a)(D().mark((function e(){var t;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.getApprove();case 2:return t=e.sent,o.setState({approveStatus:t}),e.next=6,o.props.lend.getBalanceForVote();case 6:return e.next=8,o.props.lend.getOldWjstBalanceForVote();case 8:return e.next=10,o.props.lend.getUserWithdrawInfo();case 10:case"end":return e.stop()}}),e)}))),6e4));case 1:case"end":return e.stop()}}),e)}))),o.getApprove=Object(m.a)(D().mark((function e(){var t,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={collateralAddress:V.b.contract.JST,jtokenAddress:V.b.contract.WJSTAddress,precision:V.b.tokenDefaultPrecision},e.next=4,o.props.lend.getVoteBalanceOf(t);case 4:return a=e.sent,e.abrupt("return",Object(S.a)(a).gt(0));case 8:return e.prev=8,e.t0=e.catch(0),console.log("getApprove, ",e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),o.toggleShowProposalSectionForMobile=function(e){1===e&&o.state.showProposalSectionForMobile||(2!==e||o.state.showProposalSectionForMobile)&&o.setState((function(e){return Object(p.a)(Object(p.a)({},e),{},{showProposalSectionForMobile:!e.showProposalSectionForMobile})}))},o.openModal=function(){var e=o.props.network.isConnected,t=o.state.approveStatus;o.props.system.clearRejectError(),0!==o.props.network.isRightChain?0!==o.props.network.isMainNetwork?(o.setState({isTxSigning:!1}),e?t?(o.authorize(),gtag("event","click",{event_category:"PC_V1.5",event_label:"get_votes"})):o.props.lend.setData({authorizePop:!0}):o.props.network.connectWallet()):o.props.network.showNetworkErrorModal():o.props.network.changeChain()},o.withdrawClick=function(){var e=o.props.network.isConnected;o.props.lend.oldVoteInfo;o.setState({isTxSigning:!1}),e?(o.setState({exchangeVoteValue:"",withdrawValue:""}),o.props.lend.setData({withdrawPop:!0}),gtag("event","click",{event_category:"PC_V1.5",event_label:"redeem_votes"})):o.props.network.connectWalletV2()},o.authorize=function(){o.setState({exchangeVoteValue:""}),o.props.lend.setData({exchangeVotePop:!0,authorizePop:!1})},o.toApprove=Object(m.a)(D().mark((function e(){var t;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.props.system.clearRejectError(),t={collateralAddress:V.b.contract.JST,jtokenAddress:V.b.contract.WJSTAddress,trnasType:"approve"},{title:"deposit.confirm_approve",obj:{value:t.collateralSymbol}},o.setState({isSuccess:!1,txID:"",approving:!0}),e.next=6,o.props.system.approveToken(t,[["lend/hideAuthorizePop"]]);case 6:e.sent&&o.setState({approveStatus:!0},(function(){o.authorize()})),o.setState({approving:!1});case 9:case"end":return e.stop()}}),e)}))),o.renderApprovePop=function(){var e=o.state.approving,t=o.props.system.transModalInfo,a=t.declined,n=t.trnasType;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"v-title"},O.a.get("deposit.confirm_approve")),s.a.createElement(_,null),s.a.createElement("div",{className:"vote-authorize-logo"}),s.a.createElement("div",{className:"v-desc"},O.a.getHTML("vote.approve_text")),e?s.a.createElement("button",{className:"modal-btn is-valid",disabled:!0},O.a.get("v2.sign_in_wallet"),s.a.createElement("span",{className:"siging-icon"})):s.a.createElement("div",{className:"modal-btn is-valid",onClick:o.toApprove},O.a.get("vote.approve_btn")),a&&"approve"===n&&s.a.createElement("div",{className:"j-error-tip wallet-reject"},s.a.createElement("span",{className:"j-error-img"}),s.a.createElement("div",null,O.a.get("v2.reject_in_wallet"))))},o.chooseMax=function(){var e=o.props.lend.voteInfo,t=Object(S.k)(e.jstBalance.div(V.b.tokenDefaultPrecision),3,{per:!0});o.setState({exchangeVoteValue:t})},o.chooseWithdrawMax=function(){var e=o.props.lend.voteInfo,t=Object(S.k)(e.surplusVotes.div(V.b.tokenDefaultPrecision),3,{per:!0});o.setState({withdrawValue:t})},o.maxRender=function(e){return 1===e?s.a.createElement("div",{className:"v-max-btn",onClick:o.chooseMax},O.a.get("vote.voteto_input_max")):2===e?s.a.createElement("div",{className:"v-max-btn",onClick:o.chooseWithdrawMax},O.a.get("vote.voteto_input_max")):void 0},o.exchangeVoteChange=function(e){var t=Object(S.ab)(e.target.value,3),a=t.valid,n=t.str;a&&o.setState({exchangeVoteValue:n})},o.toDeposit=Object(m.a)(D().mark((function e(){var t,a,n,r,c,i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.props.system.clearRejectError(),gtag("event","click",{event_category:"PC_V1.5",event_label:"get_votes_modal"}),t=o.props.lend.voteInfo,o.setState({isTxSigning:!0}),a=Object(S.k)(t.jstBalance.div(V.b.tokenDefaultPrecision),3,{per:!0}),n=o.state.exchangeVoteValue,!Object(S.a)(a).lt(Object(S.a)(n))){e.next=8;break}return e.abrupt("return");case 8:return r={collateralAddress:V.b.contract.JST,jtokenAddress:V.b.contract.WJSTAddress,amount:Object(S.a)(n).times(V.b.tokenDefaultPrecision)._toHex()},c={title:"toast.ex",title2:"deposit.transactionsent",title3:"toast.ex_failed",title4:"deposit.confirm_transaction",obj:{value:r.collateralSymbol},trnasType:"depositVote"},e.prev=10,e.next=13,o.props.system.voteDeposit(r,c);case 13:(i=e.sent)?(gtag("event","click",{event_category:"PC_V1.5",event_label:"get_votes_modal_success"}),o.setState({isSuccess:!0,txID:i,isTxSigning:!1}),o.props.lend.setData({authorizePop:!1,exchangeVotePop:!1,withdrawPop:!1})):o.setState({isSuccess:!1,txID:i,isTxSigning:!1}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),o.setState({isSuccess:!1,isTxSigning:!1});case 20:case"end":return e.stop()}}),e,null,[[10,17]])}))),o.renderDepositPop=function(){var e,t=o.props.lend.voteInfo,a=o.props.system.transModalInfo,n=a.declined,r=a.trnasType;t&&t.success&&(e=Object(S.k)(t.jstBalance.div(V.b.tokenDefaultPrecision),3,{per:!0}));var c=Object(S.a)(e).gte(Object(S.a)(o.state.exchangeVoteValue)),i=Object(S.a)(o.state.exchangeVoteValue).gt(0),l=!c&&i;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"v-title"},O.a.get("vote.myvote_deposit")),s.a.createElement(_,null),s.a.createElement("div",{className:"tick-vote-logo"}),s.a.createElement("div",{className:"v-desc"},O.a.getHTML("v2.vote.get_vote_modal_text")),s.a.createElement("div",{className:"v-desc2"},s.a.createElement("div",{className:"v-amount"},O.a.get("vote.deposit_amount")),s.a.createElement("div",{className:"v-right"},s.a.createElement("div",{className:"v-text"},O.a.get("wallet_ballance")),t&&t.success&&s.a.createElement("div",{className:"v-balance"},Object(S.k)(t.jstBalance.div(V.b.tokenDefaultPrecision),3,{miniText:.001})," JST"),s.a.createElement("a",{className:"v-get-btn hover",target:"_blank",rel:"noopener noreferrer",href:"".concat(V.b.sunSwap,"?lang=").concat(o.state.lang,"?tokenAddress=").concat(V.b.contract.JST,"&type=swap"),onClick:gtag("event","click",{event_category:"PC_V1.5",event_label:"get_jst_btn"})},O.a.get("lend.get")),s.a.createElement("span",{className:"v-arrow"}))),s.a.createElement(N.a,{allowClear:!0,className:"vote-input ".concat(l?"invalid":""),value:o.state.exchangeVoteValue,placeholder:O.a.get("vote.convert_input_tips"),suffix:o.maxRender(1),onChange:o.exchangeVoteChange,disabled:!!o.state.isTxSigning}),l&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"exceed-remain-votes"},O.a.get("tab.not_enough"))),o.state.isTxSigning?s.a.createElement("div",{className:"modal-btn"},O.a.get("v2.sign_in_wallet"),s.a.createElement("span",{className:"siging-icon"})):s.a.createElement("div",{onClick:!l&&i&&o.toDeposit||void 0,className:"modal-btn ".concat(!l&&i?"is-valid":"")},O.a.get("v2.vote.deposit_now")),n&&"depositVote"===r&&s.a.createElement("div",{className:"tx-failed"},s.a.createElement("span",{className:"error-img"}),O.a.get("v2.reject_in_wallet")))},o.withdrawChange=function(e){var t=Object(S.ab)(e.target.value,3),a=t.valid,n=t.str;a&&o.setState({withdrawValue:n})},o.toWithdraw=function(){var e=Object(m.a)(D().mark((function e(t){var a,n,r;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={collateralAddress:V.b.contract.JST,jtokenAddress:V.b.contract.WJSTAddress,amount:Object(S.a)(t).times(V.b.tokenDefaultPrecision)._toHex()},n={title:"toast.ex",title2:"deposit.transactionsent",title3:"toast.ex_failed",title4:"deposit.confirm_transaction",obj:{value:a.collateralSymbol},trnasType:"withdrawVote"},e.prev=2,e.next=5,o.props.system.voteWithdraw(a,n);case 5:(r=e.sent)?(gtag("event","click",{event_category:"PC_V1.5",event_label:"redeem_votes_modal_success"}),o.setState({isSuccess:!0,txID:r,isTxSigning:!1}),o.props.lend.setData({authorizePop:!1,exchangeVotePop:!1,withdrawPop:!1})):o.setState({isSuccess:!1,txID:r,isTxSigning:!1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o.setState({isSuccess:!1,isTxSigning:!1});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),o.withdrawSubmit=function(){gtag("event","click",{event_category:"PC_V1.5",event_label:"redeem_votes_modal"}),o.props.system.clearRejectError();var e=o.state.withdrawValue;o.setState({isTxSigning:!0}),o.toWithdraw(e)},o.renderWithdrawPop=function(){var e,t=o.props.lend.voteInfo,a=o.props.system.transModalInfo,n=a.declined,r=a.trnasType;t&&t.success&&(e=Object(S.k)(t.surplusVotes.div(V.b.tokenDefaultPrecision),3,{miniText:.001,per:!0}));var c=Object(S.a)(e).gte(Object(S.a)(o.state.withdrawValue)),i=Object(S.a)(o.state.withdrawValue).gt(0),l=!c&&i;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"v-title"},O.a.get("v2.vote.redeem_votes")),s.a.createElement(_,null),s.a.createElement("div",{className:"tick-vote-logo"}),s.a.createElement("div",{className:"v-desc"},O.a.getHTML("v2.vote.vote_modal_convert_jst")),s.a.createElement("div",{className:"v-desc2"},s.a.createElement("div",{className:"v-amount"},O.a.getHTML("v2.vote.redeem_count")),s.a.createElement("div",{className:"v-right"},s.a.createElement("div",{className:"v-text"},O.a.get("v2.vote.surplus_votes")),s.a.createElement("div",{className:"v-balance"},e))),s.a.createElement(N.a,{allowClear:!0,className:"vote-input ".concat(l?"invalid":""),value:o.state.withdrawValue,placeholder:O.a.get("v2.vote.votes_amount"),suffix:o.maxRender(2),onChange:o.withdrawChange,disabled:!!o.state.isTxSigning}),l&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"exceed-remain-votes"},O.a.get("tab.not_enough"))),o.state.isTxSigning?s.a.createElement("div",{className:"modal-btn"},O.a.get("v2.sign_in_wallet"),s.a.createElement("span",{className:"siging-icon"})):s.a.createElement("div",{onClick:!l&&i&&o.withdrawSubmit||void 0,className:"modal-btn ".concat(!l&&i?"is-valid":"")},O.a.get("v2.vote.redeem_now")),n&&"withdrawVote"===r&&s.a.createElement("div",{className:"tx-failed"},s.a.createElement("span",{className:"error-img"}),O.a.get("v2.reject_in_wallet")))},o.hideDepositPop=function(){var e=o.props.lend,t=e.withdrawPop,a=e.exchangeVotePop;t?gtag("event","click",{event_category:"PC_V1.5",event_label:"redeem_votes_close"}):a&&gtag("event","click",{event_category:"PC_V1.5",event_label:"get_votes_close"}),o.props.lend.setData({authorizePop:!1,exchangeVotePop:!1,withdrawPop:!1})},o.renderMobileMenu=function(){var e=o.state,t=(e.page,e.dataList),a=e.showProposalSectionForMobile,n=(e.lang,null===t||void 0===t?void 0:t[0]);return s.a.createElement("div",{className:"mobile-menu"},s.a.createElement("span",{onClick:function(){return o.toggleShowProposalSectionForMobile(1)},className:a?"menu-item current":"menu-item"},s.a.createElement("div",{className:"p-left"},s.a.createElement("div",{className:"p-title"},O.a.get("v2.vote.proposal")),n&&s.a.createElement("div",{className:"p-count"},t.length))),s.a.createElement("span",{onClick:function(){return o.toggleShowProposalSectionForMobile(2)},className:a?"menu-item":"menu-item current"},O.a.get("v2.vote.my_vote_header")))},o.renderMyVote=function(){var e=o.props.lend,t=e.voteInfo,a=e.oldVoteInfo,n=e.userCanRedeemVoteNum,r=e.userVotingVoteNum,c=Object(S.a)(n).eq(0)?0:Object(S.k)(n,3,{miniText:.001}),i=Object(S.a)(r).eq(0)?0:Object(S.k)(r,3,{miniText:.001}),l=t&&t.success&&a&&a.success&&Object(S.k)(t.castVote.plus(a.castVote).div(V.b.tokenDefaultPrecision),3,{miniText:.001,per:!0})||0,u=t&&t.success&&a&&a.success&&Object(S.k)(t.totalVote.plus(a.totalVote).div(V.b.tokenDefaultPrecision),3,{miniText:.001,per:!0})||0,v=t&&t.success&&Object(S.k)(t.surplusVotes.div(V.b.tokenDefaultPrecision),3,{miniText:.001,per:!0})||0,d=a&&a.success&&Object(S.k)(a.surplusVotes.div(V.b.tokenDefaultPrecision),3,{miniText:.001,per:!0})||0,p=(Object(S.a)(l).gt(0)||Object(S.a)(u).gt(0)||Object(S.a)(v).gt(0))&&Object(S.a)(u).gt(Object(S.a)(d));return s.a.createElement("div",{className:"my-vote-container"},o.renderMobileMenu(),s.a.createElement("div",{className:"my-vote-header"},O.a.get("v2.vote.my_vote_header")),s.a.createElement(_,{className:"proposal-title my-vote-title"}),s.a.createElement("div",{className:"space-60"}),o.props.network.isConnected?p?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"total-votes"},O.a.get("vote.myvote_total"),s.a.createElement(j.a,{overlayClassName:"j-tooltip-dropdown",title:O.a.get("vote.myvote_help"),arrowPointAtCenter:!0,placement:"topLeft",trigger:["click","hover"]},s.a.createElement("span",{className:"j-tooltip-icon"}))),s.a.createElement("div",{className:"total-votes-amount"},Object(S.k)(u)),s.a.createElement("div",{className:"vote-info-box"},s.a.createElement("div",{className:"vote-info-row"},s.a.createElement("div",{className:"vote-info-text"},O.a.get("v2.vote.surplus")),s.a.createElement("div",{className:"vote-info-amount"},Object(S.k)(v))),s.a.createElement("div",{className:"vote-info-row"},s.a.createElement("div",{className:"vote-info-text"},O.a.get("v2.vote.recycle_votes")),Object(S.a)(n).gt(0)?s.a.createElement("div",{className:"vote-info-amount clickable hover",onClick:function(){o.props.system.clearRejectError(),o.props.lend.setData({voteDetailModalVisible:!0}),gtag("event","click",{event_category:"PC_V1.5",event_label:"recycle_votes"})}},c):s.a.createElement("div",{className:"vote-info-amount"},c)),s.a.createElement("div",{className:"vote-info-row"},s.a.createElement("div",{className:"vote-info-text"},O.a.get("v2.vote.cast_votes")),s.a.createElement("div",{className:"vote-info-amount"},i))),s.a.createElement("div",{className:"my-vote-btn-wrapper2"},s.a.createElement("div",{className:"my-vote-btn2",onClick:function(){return o.withdrawClick()}},O.a.get("v2.vote.redeem_votes")),s.a.createElement("div",{className:"my-vote-btn",onClick:function(){return o.openModal()}},O.a.get("vote.myvote_deposit"))),a&&a.success&&(null===a||void 0===a?void 0:a.surplusVotes.gt(0))&&s.a.createElement("div",{className:"invalid-vote hover",onClick:function(){o.props.system.clearRejectError(),o.props.lend.setData({voteOldWithdrawModalVisible:!0}),gtag("event","click",{event_category:"PC_V1.5",event_label:"invalid_vote"})}},O.a.getHTML("v2.vote.invalid_vote",{value:Object(S.k)(d)}),s.a.createElement("div",{className:"purple-right-arrow2"}))):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"tick-vote-logo"}),s.a.createElement("div",{className:"my-vote-text"},O.a.get("v2.vote.get_vote")),s.a.createElement("div",{className:"my-vote-btn-wrapper"},s.a.createElement("div",{className:"my-vote-btn",onClick:function(){return o.openModal()}},O.a.get("vote.myvote_deposit"))),a&&a.success&&(null===a||void 0===a?void 0:a.surplusVotes.gt(0))&&s.a.createElement("div",{className:"invalid-vote hover",onClick:function(){o.props.system.clearRejectError(),o.props.lend.setData({voteOldWithdrawModalVisible:!0}),gtag("event","click",{event_category:"PC_V1.5",event_label:"invalid_vote"})}},O.a.getHTML("v2.vote.invalid_vote",{value:Object(S.k)(d)}),s.a.createElement("div",{className:"purple-right-arrow2"}))):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"unconnected-wallet-logo"}),s.a.createElement("div",{className:"my-vote-text"},O.a.get("v2.vote.unconnected_wallet")),s.a.createElement("div",{className:"my-vote-btn-wrapper"},s.a.createElement("div",{className:"my-vote-btn",onClick:function(){return o.props.network.connectWalletV2()}},O.a.get("navi.wallet_linkbtn")))))},o.state={dataList:[],page:0,showProposalSectionForMobile:!0,approveStatus:null,exchangeVoteValue:"",withdrawValue:"",isSuccess:!1,txID:"",lang:(null===(n=Object(S.K)())||void 0===n?void 0:n.lang)||window.localStorage.getItem("lang")||O.a.options.currentLocale,isTxSigning:!1,approving:!1},o}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.page,n=t.dataList,r=t.showProposalSectionForMobile,o=t.lang,c=null===n||void 0===n?void 0:n[0],i=1===(null===c||void 0===c?void 0:c.state)||-1===(null===c||void 0===c?void 0:c.state),l=n.slice(i?1:0,20*(a+1)),u="en-US"===o,v=this.props.lend,d=v.exchangeVotePop,m=v.authorizePop,h=v.withdrawPop,f=v.theme,g=v.addVote,y=v.lockNum,b=v.votedList,w=m||d||h,E=Object(S.a)(y).gt(0),N="no"==g&&E||"yes"==g&&E;return s.a.createElement("div",{className:"vote-container ".concat(f)},s.a.createElement("div",{className:"common-flex"},s.a.createElement("div",{className:"common-title"},O.a.get("vote.title")),s.a.createElement("div",{className:"common-desc"},O.a.get("v2.vote.top_desc"))),s.a.createElement(A,null),s.a.createElement("div",{className:"body-container"},s.a.createElement("div",{className:"proposal-container ".concat(r?"":"hide-md")},this.renderMobileMenu(),s.a.createElement("div",{className:"proposal-header"},s.a.createElement("div",{className:"proposal-left"},s.a.createElement("div",{className:"proposal-title"},O.a.get("v2.vote.proposal")),c&&s.a.createElement("div",{className:"proposal-count"},n.length))),s.a.createElement(_,{className:"proposal-title ".concat(r?"hide-md":"")}),1===(null===c||void 0===c?void 0:c.state)||-1===(null===c||void 0===c?void 0:c.state)?s.a.createElement("div",{className:"active-proposal"},s.a.createElement("div",{className:"corner-tag"},O.a.get("v2.vote.ongoing")),s.a.createElement("div",{className:"p-body"},s.a.createElement("div",{className:"p-first-row"},s.a.createElement("div",{className:"p-title"},c.title.split("&&")[[u?1:0]]),N&&s.a.createElement(j.a,{overlayClassName:"j-tooltip-dropdown",title:O.a.get("v2.vote.voted_before"),arrowPointAtCenter:!0,placement:"top",trigger:["click","hover"],defaultVisible:!0},s.a.createElement("span",{className:"ticket-icon"})),s.a.createElement("a",{href:"?lang=".concat(o,"#/voteDetailNew?proposalId=").concat(null===c||void 0===c?void 0:c.proposalId),className:"vote-btn hide-md",onClick:gtag("event","click",{event_category:"PC_V1.5",event_label:"join_vote"})},O.a.get("v2.vote.join_vote"))),s.a.createElement("div",{className:"p-second-row"},s.a.createElement("div",{className:"p-desc"},s.a.createElement("div",{className:"p-id"},"#",c.id),s.a.createElement("div",{className:"p-countdown-text"},O.a.get("v2.vote.countdown_text")),s.a.createElement("div",{className:"p-countdown-date"},function(e){var t=(new Date).getTime();t>=e&&window.location.reload();var a=e-t,n=Math.floor(a/36e5),r=Math.floor(a%36e5/6e4)>0?Math.floor(a%36e5/6e4):"<1";return"".concat(n>0?"".concat(n).concat(O.a.get("v2.vote.hrs"),":"):"").concat(r).concat(O.a.get("v2.vote.min"))}(c.endTime))),s.a.createElement("div",{className:"p-right-mobile"},s.a.createElement(z,{forVotes:c.forVotes,againstVotes:c.againstVotes}),s.a.createElement("a",{href:"?lang=".concat(o,"##/voteDetailNew?proposalId=").concat(null===c||void 0===c?void 0:c.proposalId),className:"vote-btn hide-lg"},O.a.get("v2.vote.join_vote")))))):s.a.createElement("div",{className:"no-new-proposal"},s.a.createElement("div",{className:"proposal-title"},O.a.get("v2.vote.no_new_proposal_title")),s.a.createElement("span",null,s.a.createElement("a",{href:"https://forum.justlend.org",className:"proposal-desc hover",onClick:gtag("event","click",{event_category:"PC_V1.5",event_label:"no_new_proposal_join_discussion"})},O.a.get("v2.vote.no_new_proposal_desc")),s.a.createElement("span",{className:"purple-right-arrow"}))),s.a.createElement(_,{style:{padding:"0 30px"}},O.a.get("v2.vote.previous_voting")),s.a.createElement("div",{className:"past-proposal-list"},c&&l.length>0?l.map((function(e){return s.a.createElement("a",{href:"?lang=".concat(o,"#/voteDetailNew?proposalId=").concat(e.proposalId),target:"_blank",rel:"noopener noreferrer",key:e.id,onClick:gtag("event","click",{event_category:"PC_V1.5",event_label:"vote_proposal_list"})},s.a.createElement("div",{className:"p-item",key:e.id},s.a.createElement("div",{className:"first-row"},s.a.createElement("span",{className:"p-title"},e.title.split("&&")[u?1:0],b&&-1!=b.indexOf(e.proposalId)&&s.a.createElement(j.a,{overlayClassName:"j-tooltip-dropdown",title:O.a.get("v2.vote.voted_before"),arrowPointAtCenter:!0,placement:"top",trigger:["click","hover"]},s.a.createElement("span",{className:"ticket-icon"})),s.a.createElement("span",{className:"arrow-right"})),s.a.createElement("div",{className:e.state>=4?"p-green-tick":"p-red-exclamation"})),s.a.createElement("div",{className:"second-row"},s.a.createElement("div",{className:"p-left"},s.a.createElement("div",{className:"p-id"},"#",e.id),s.a.createElement("div",{className:"p-date"},new Date(e.endTime).format("yyyy-MM-dd h:m:s"))),s.a.createElement("div",{className:"p-status"},e.exIntl?e.exIntl:e.intl))))})):Object(S.j)()),n.length>20&&l.length<n.length&&s.a.createElement(s.a.Fragment,null,s.a.createElement(_,{className:"proposal-title mb20"}),s.a.createElement("div",{className:"load-more mb4",onClick:function(){return e.setState((function(e){return Object(p.a)(Object(p.a)({},e),{},{page:e.page+1})}))}},O.a.get("load_more")))),s.a.createElement("div",{className:"right-panel ".concat(r?"hide-md":"")},this.renderMyVote(),s.a.createElement(W,{lang:o}))),s.a.createElement(x.a,{visible:w,width:400,footer:null,className:"vote-modal ".concat(f),onCancel:function(){e.props.system.clearRejectError(),e.hideDepositPop()}},m?this.renderApprovePop():d?this.renderDepositPop():this.renderWithdrawPop()),s.a.createElement(I.a,null),s.a.createElement(T.a,null),s.a.createElement(C,null))}}]),a}(s.a.Component))||L)||L)||L)||L,R=(a(1552),a(792),Object(u.b)("network")(M=Object(u.b)("lend")(M=Object(u.b)("system")(M=Object(u.c)(M=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.lend.theme;return s.a.createElement("div",{className:"j-wrapper "+e},s.a.createElement(d.a,null),s.a.createElement("div",{className:"j-container j-home"},s.a.createElement(J,null)),s.a.createElement(v.a,null))}}]),a}(s.a.Component))||M)||M)||M)||M),H=Object(u.b)("network")(F=Object(u.c)(F=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.network.setData({routeName:"vote"})}},{key:"render",value:function(){return s.a.createElement(R,null)}}]),a}(s.a.Component))||F)||F;t.default=H}}]);